{"remainingRequest":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\panels\\FansPanel.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\panels\\FansPanel.vue","mtime":1592248188562},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQondXNlIHN0cmljdCcNCg0KaW1wb3J0IHsgbWFwU3RhdGUsIG1hcEdldHRlcnMsIG1hcEFjdGlvbnMsIG1hcE11dGF0aW9ucyB9IGZyb20gJ3Z1ZXgnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCgljb21wdXRlZDogew0KCQkuLi5tYXBTdGF0ZShbJ3NlbGVjdGVkTWFjaGluZSddKSwNCgkJLi4ubWFwR2V0dGVycyhbJ3VpRnJvemVuJ10pLA0KCQkuLi5tYXBTdGF0ZSgnbWFjaGluZS9tb2RlbCcsIFsnZmFucyddKSwNCgkJLi4ubWFwR2V0dGVycygnbWFjaGluZS9tb2RlbCcsIFsnY3VycmVudFRvb2wnXSksDQoJCS4uLm1hcFN0YXRlKCdtYWNoaW5lL3NldHRpbmdzJywgWydkaXNwbGF5ZWRGYW5zJ10pLA0KCQl2aXNpYmxlRmFucygpIHsNCgkJCXJldHVybiB0aGlzLmRpc3BsYXllZEZhbnMuZmlsdGVyKGZ1bmN0aW9uKGZhbikgew0KCQkJCWlmIChmYW4gPT09IC0xKSB7DQoJCQkJCXJldHVybiB0aGlzLmN1cnJlbnRUb29sICYmIHRoaXMuY3VycmVudFRvb2wuZmFucy5sZW5ndGggPiAwOw0KCQkJCX0NCgkJCQlyZXR1cm4gZmFuIDwgdGhpcy5mYW5zLmxlbmd0aCAmJiB0aGlzLmZhbnNbZmFuXSAmJiB0aGlzLmZhbnNbZmFuXS50aGVybW9zdGF0aWMuaGVhdGVycy5sZW5ndGggPT09IDA7DQoJCQl9LCB0aGlzKTsNCgkJfSwNCgkJdG9vbEZhbigpIHsNCgkJCWlmICh0aGlzLmN1cnJlbnRUb29sICYmIHRoaXMuY3VycmVudFRvb2wuZmFucy5sZW5ndGgpIHsNCgkJCQlyZXR1cm4gdGhpcy5jdXJyZW50VG9vbC5mYW5zWzBdOw0KCQkJfQ0KCQkJcmV0dXJuIDA7DQoJCX0NCgl9LA0KCW1ldGhvZHM6IHsNCgkJLi4ubWFwQWN0aW9ucygnbWFjaGluZScsIFsnc2VuZENvZGUnXSksDQoJCS4uLm1hcE11dGF0aW9ucygnbWFjaGluZS9zZXR0aW5ncycsIFsndG9nZ2xlRmFuVmlzaWJpbGl0eSddKSwNCgkJZ2V0RmFuVmFsdWUoZmFuKSB7DQoJCQlpZiAoZmFuID09PSAtMSkgew0KCQkJCWZhbiA9IHRoaXMudG9vbEZhbjsNCgkJCX0NCgkJCXJldHVybiAoZmFuID49IDAgJiYgZmFuIDwgdGhpcy5mYW5zLmxlbmd0aCAmJiB0aGlzLmZhbnNbZmFuXSkgPyBNYXRoLnJvdW5kKHRoaXMuZmFuc1tmYW5dLnJlcXVlc3RlZFZhbHVlICogMTAwKSA6IDA7DQoJCX0sDQoJCXNldEZhblZhbHVlKGZhbiwgdmFsdWUpIHsNCgkJCWlmIChmYW4gPT09IC0xKSB7DQoJCQkJdGhpcy5zZW5kQ29kZShgTTEwNiBTJHt2YWx1ZSAvIDEwMH1gKTsNCgkJCX0gZWxzZSB7DQoJCQkJdGhpcy5zZW5kQ29kZShgTTEwNiBQJHtmYW59IFMke3ZhbHVlIC8gMTAwfWApOw0KCQkJfQ0KCQl9DQoJfQ0KfQ0K"},{"version":3,"sources":["FansPanel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FansPanel.vue","sourceRoot":"src/components/panels","sourcesContent":["<template>\r\n\t<v-card>\r\n\t\t<v-card-title class=\"pb-0\">\r\n\t\t\t<v-icon small class=\"mr-1\">mdi-fan</v-icon> {{ $t('panel.fans.caption') }}\r\n\t\t\t<v-spacer></v-spacer>\r\n\t\t\t<v-menu offset-y right auto>\r\n\t\t\t\t<template #activator=\"{ on }\">\r\n\t\t\t\t\t<a v-show=\"!uiFrozen && fans.some(fan => fan && fan.thermostatic.heaters.length === 0)\" v-on=\"on\" href=\"javascript:void(0)\" class=\"subtitle-2\">\r\n\t\t\t\t\t\t{{ $t('panel.fans.changeVisibility') }}\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</template>\r\n\r\n\t\t\t\t<v-list>\r\n\t\t\t\t\t<v-list-item v-show=\"currentTool && currentTool.fans.length > 0\" @click=\"toggleFanVisibility(-1)\">\r\n\t\t\t\t\t\t<v-icon class=\"mr-1\">\r\n\t\t\t\t\t\t\t{{ (displayedFans.indexOf(-1) !== -1) ? 'mdi-checkbox-marked' : 'mdi-checkbox-blank' }}\r\n\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t\t{{ $t('panel.fans.toolFan') }}\r\n\t\t\t\t\t</v-list-item>\r\n\r\n\t\t\t\t\t<template v-for=\"(fan, index) in fans\" >\r\n\t\t\t\t\t\t<v-list-item v-if=\"fan && fan.thermostatic.heaters.length === 0\" :key=\"index\" @click=\"toggleFanVisibility(index)\">\r\n\t\t\t\t\t\t\t<v-icon class=\"mr-1\">\r\n\t\t\t\t\t\t\t\t{{ (displayedFans.indexOf(index) !== -1) ? 'mdi-checkbox-marked' : 'mdi-checkbox-blank' }}\r\n\t\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t\t\t{{ fan.name ? fan.name :$t('panel.fans.fan', [index]) }}\r\n\t\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</v-list>\r\n\t\t\t</v-menu>\r\n\t\t</v-card-title>\r\n\t\t\r\n\t\t<v-card-text class=\"d-flex flex-column pb-0\">\r\n\t\t\t<div v-for=\"fan in visibleFans\" :key=\"fan\" class=\"d-flex flex-column pt-2\">\r\n\t\t\t\t{{ (fan === -1) ? $t('panel.fans.toolFan') : (fans[fan].name ? fans[fan].name : $t('panel.fans.fan', [fan])) }}\r\n\t\t\t\t<slider :value=\"getFanValue(fan)\" @input=\"setFanValue(fan, $event)\" :disabled=\"uiFrozen\"></slider>\r\n\t\t\t</div>\r\n\t\t</v-card-text>\r\n\r\n\t\t<v-alert type=\"info\" :value=\"!visibleFans.length\" class=\"mb-0\">\r\n\t\t\t{{ $t('panel.fans.noFans') }}\r\n\t\t</v-alert>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\n'use strict'\r\n\r\nimport { mapState, mapGetters, mapActions, mapMutations } from 'vuex'\r\n\r\nexport default {\r\n\tcomputed: {\r\n\t\t...mapState(['selectedMachine']),\r\n\t\t...mapGetters(['uiFrozen']),\r\n\t\t...mapState('machine/model', ['fans']),\r\n\t\t...mapGetters('machine/model', ['currentTool']),\r\n\t\t...mapState('machine/settings', ['displayedFans']),\r\n\t\tvisibleFans() {\r\n\t\t\treturn this.displayedFans.filter(function(fan) {\r\n\t\t\t\tif (fan === -1) {\r\n\t\t\t\t\treturn this.currentTool && this.currentTool.fans.length > 0;\r\n\t\t\t\t}\r\n\t\t\t\treturn fan < this.fans.length && this.fans[fan] && this.fans[fan].thermostatic.heaters.length === 0;\r\n\t\t\t}, this);\r\n\t\t},\r\n\t\ttoolFan() {\r\n\t\t\tif (this.currentTool && this.currentTool.fans.length) {\r\n\t\t\t\treturn this.currentTool.fans[0];\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t...mapActions('machine', ['sendCode']),\r\n\t\t...mapMutations('machine/settings', ['toggleFanVisibility']),\r\n\t\tgetFanValue(fan) {\r\n\t\t\tif (fan === -1) {\r\n\t\t\t\tfan = this.toolFan;\r\n\t\t\t}\r\n\t\t\treturn (fan >= 0 && fan < this.fans.length && this.fans[fan]) ? Math.round(this.fans[fan].requestedValue * 100) : 0;\r\n\t\t},\r\n\t\tsetFanValue(fan, value) {\r\n\t\t\tif (fan === -1) {\r\n\t\t\t\tthis.sendCode(`M106 S${value / 100}`);\r\n\t\t\t} else {\r\n\t\t\t\tthis.sendCode(`M106 P${fan} S${value / 100}`);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n"]}]}