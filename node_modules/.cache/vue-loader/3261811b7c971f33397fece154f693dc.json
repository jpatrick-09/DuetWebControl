{"remainingRequest":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\lists\\MacroList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\lists\\MacroList.vue","mtime":1592248188544},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQondXNlIHN0cmljdCcNCg0KaW1wb3J0IHsgbWFwU3RhdGUsIG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4Jw0KDQppbXBvcnQgeyBnZXRNb2RpZmllZERpcmVjdG9yaWVzIH0gZnJvbSAnLi4vLi4vc3RvcmUvbWFjaGluZScNCmltcG9ydCB7IERpc2Nvbm5lY3RlZEVycm9yIH0gZnJvbSAnLi4vLi4vdXRpbHMvZXJyb3JzLmpzJw0KaW1wb3J0IFBhdGggZnJvbSAnLi4vLi4vdXRpbHMvcGF0aC5qcycNCg0KZXhwb3J0IGRlZmF1bHQgew0KCWNvbXB1dGVkOiB7DQoJCS4uLm1hcFN0YXRlKFsnc2VsZWN0ZWRNYWNoaW5lJ10pLA0KCQkuLi5tYXBHZXR0ZXJzKFsnaXNDb25uZWN0ZWQnLCAndWlGcm96ZW4nXSksDQoJCS4uLm1hcFN0YXRlKCdtYWNoaW5lL21vZGVsJywgew0KCQkJbWFjcm9zRGlyZWN0b3J5OiBzdGF0ZSA9PiBzdGF0ZS5kaXJlY3Rvcmllcy5tYWNyb3MsDQoJCQl2b2x1bWVzOiBzdGF0ZSA9PiBzdGF0ZS52b2x1bWVzDQoJCX0pLA0KCQlpc1Jvb3REaXJlY3RvcnkoKSB7IHJldHVybiBQYXRoLmVxdWFscyh0aGlzLmRpcmVjdG9yeSwgdGhpcy5tYWNyb3NEaXJlY3RvcnkpOyB9DQoJfSwNCglkYXRhICgpIHsNCgkJcmV0dXJuIHsNCgkJCXVuc3Vic2NyaWJlOiB1bmRlZmluZWQsDQoJCQlsb2FkaW5nOiBmYWxzZSwNCgkJCXdhc01vdW50ZWQ6IGZhbHNlLA0KCQkJZGlyZWN0b3J5OiBQYXRoLm1hY3JvcywNCgkJCWZpbGVsaXN0OiBbXQ0KCQl9DQoJfSwNCgltZXRob2RzOiB7DQoJCS4uLm1hcEFjdGlvbnMoJ21hY2hpbmUnLCBbJ3NlbmRDb2RlJywgJ2dldEZpbGVMaXN0J10pLA0KCQlhc3luYyBsb2FkRGlyZWN0b3J5KGRpcmVjdG9yeSkgew0KCQkJaWYgKHRoaXMubG9hZGluZykgew0KCQkJCXJldHVybjsNCgkJCX0NCg0KCQkJdGhpcy5sb2FkaW5nID0gdHJ1ZTsNCgkJCXRyeSB7DQoJCQkJY29uc3QgZmlsZXMgPSBhd2FpdCB0aGlzLmdldEZpbGVMaXN0KGRpcmVjdG9yeSk7DQoJCQkJZmlsZXMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lLCB1bmRlZmluZWQsIHsgc2Vuc2l2aXR5OiAnYmFzZScgfSkpOw0KCQkJCWZpbGVzLnNvcnQoKGEsIGIpID0+IChhLmlzRGlyZWN0b3J5ID09PSBiLmlzRGlyZWN0b3J5KSA/IDAgOiAoYS5pc0RpcmVjdG9yeSA/IC0xIDogMSkpOw0KCQkJCWZpbGVzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgew0KCQkJCQlpdGVtLmRpc3BsYXlOYW1lID0gUGF0aC5zdHJpcE1hY3JvRmlsZW5hbWUoaXRlbS5uYW1lKTsNCgkJCQkJaXRlbS5leGVjdXRpbmcgPSBmYWxzZTsNCgkJCQl9KTsNCg0KCQkJCXRoaXMuZGlyZWN0b3J5ID0gZGlyZWN0b3J5Ow0KCQkJCXRoaXMuZmlsZWxpc3QgPSBmaWxlczsNCgkJCX0gY2F0Y2ggKGUpIHsNCgkJCQlpZiAoIShlIGluc3RhbmNlb2YgRGlzY29ubmVjdGVkRXJyb3IpKSB7DQoJCQkJCWNvbnNvbGUud2FybihlKTsNCgkJCQkJdGhpcy4kbG9nKCdlcnJvcicsIHRoaXMuJHQoJ2Vycm9yLmZpbGVsaXN0UmVxdWVzdEZhaWxlZCcpLCBlLm1lc3NhZ2UpOw0KCQkJCX0NCgkJCX0NCgkJCXRoaXMubG9hZGluZyA9IGZhbHNlOw0KCQl9LA0KCQlhc3luYyByZWZyZXNoKCkgew0KCQkJYXdhaXQgdGhpcy5sb2FkRGlyZWN0b3J5KHRoaXMuZGlyZWN0b3J5KTsNCgkJfSwNCgkJYXN5bmMgaXRlbUNsaWNrKGl0ZW0pIHsNCgkJCWlmICh0aGlzLnVpRnJvemVuKSB7DQoJCQkJcmV0dXJuOw0KCQkJfQ0KDQoJCQljb25zdCBmaWxlbmFtZSA9IFBhdGguY29tYmluZSh0aGlzLmRpcmVjdG9yeSwgaXRlbS5uYW1lKTsNCgkJCWlmIChpdGVtLmlzRGlyZWN0b3J5KSB7DQoJCQkJYXdhaXQgdGhpcy5sb2FkRGlyZWN0b3J5KGZpbGVuYW1lKTsNCgkJCX0gZWxzZSBpZiAoIWl0ZW0uZXhlY3V0aW5nKSB7DQoJCQkJaXRlbS5leGVjdXRpbmcgPSB0cnVlOw0KCQkJCXRyeSB7DQoJCQkJCWF3YWl0IHRoaXMuc2VuZENvZGUoYE05OCBQIiR7ZmlsZW5hbWV9ImApOw0KCQkJCX0gY2F0Y2ggKGUpIHsNCgkJCQkJaWYgKCEoZSBpbnN0YW5jZW9mIERpc2Nvbm5lY3RlZEVycm9yKSkgew0KCQkJCQkJY29uc29sZS53YXJuKGUpOw0KCQkJCQl9DQoJCQkJfQ0KCQkJCWl0ZW0uZXhlY3V0aW5nID0gZmFsc2U7DQoJCQl9DQoJCX0sDQoJCWFzeW5jIGdvVXAoKSB7DQoJCQlhd2FpdCB0aGlzLmxvYWREaXJlY3RvcnkoUGF0aC5leHRyYWN0RGlyZWN0b3J5KHRoaXMuZGlyZWN0b3J5KSk7DQoJCX0NCgl9LA0KCW1vdW50ZWQoKSB7DQoJCS8vIFBlcmZvcm0gaW5pdGlhbCBsb2FkDQoJCXRoaXMuZGlyZWN0b3J5ID0gdGhpcy5tYWNyb3NEaXJlY3Rvcnk7DQoJCWlmICh0aGlzLmlzQ29ubmVjdGVkKSB7DQoJCQl0aGlzLndhc01vdW50ZWQgPSAodGhpcy52b2x1bWVzLmxlbmd0aCA+IDApICYmIHRoaXMudm9sdW1lc1swXS5tb3VudGVkOw0KCQkJdGhpcy5yZWZyZXNoKCk7DQoJCX0NCg0KCQkvLyBLZWVwIHRyYWNrIG9mIGZpbGUgY2hhbmdlcw0KCQljb25zdCB0aGF0ID0gdGhpczsNCgkJdGhpcy51bnN1YnNjcmliZSA9IHRoaXMuJHN0b3JlLnN1YnNjcmliZUFjdGlvbihhc3luYyBmdW5jdGlvbihhY3Rpb24sIHN0YXRlKSB7DQoJCQlpZiAoZ2V0TW9kaWZpZWREaXJlY3RvcmllcyhhY3Rpb24sIHN0YXRlKS5zb21lKGRpcmVjdG9yeSA9PiBQYXRoLmVxdWFscyhkaXJlY3RvcnksIHRoYXQuZGlyZWN0b3J5KSkpIHsNCgkJCQkvLyBSZWZyZXNoIHRoZSBsaXN0IHdoZW4gYSBmaWxlIG9yIGRpcmVjdG9yeSBoYXMgYmVlbiBjaGFuZ2VkDQoJCQkJYXdhaXQgdGhhdC5yZWZyZXNoKCk7DQoJCQl9DQoJCX0pOw0KCX0sDQoJYmVmb3JlRGVzdHJveSgpIHsNCgkJdGhpcy51bnN1YnNjcmliZSgpOw0KCX0sDQoJd2F0Y2g6IHsNCgkJbWFjcm9zRGlyZWN0b3J5KHRvLCBmcm9tKSB7DQoJCQlpZiAoUGF0aC5lcXVhbHModGhpcy5kaXJlY3RvcnksIGZyb20pIHx8ICFQYXRoLnN0YXJ0c1dpdGgodGhpcy5kaXJlY3RvcnksIHRvKSkgew0KCQkJCXRoaXMuZGlyZWN0b3J5ID0gdG87DQoJCQl9DQoJCX0sDQoJCWlzQ29ubmVjdGVkKHRvKSB7DQoJCQlpZiAodG8pIHsNCgkJCQl0aGlzLndhc01vdW50ZWQgPSAodGhpcy52b2x1bWVzLmxlbmd0aCA+IDApICYmIHRoaXMudm9sdW1lc1swXS5tb3VudGVkOw0KCQkJCXRoaXMucmVmcmVzaCgpOw0KCQkJfSBlbHNlIHsNCgkJCQl0aGlzLmRpcmVjdG9yeSA9IFBhdGgubWFjcm9zOw0KCQkJCXRoaXMuZmlsZWxpc3QgPSBbXTsNCgkJCX0NCgkJfSwNCgkJc2VsZWN0ZWRNYWNoaW5lKCkgew0KCQkJLy8gVE9ETyBzdG9yZSBjdXJyZW50IGRpcmVjdG9yeSBwZXIgc2VsZWN0ZWQgbWFjaGluZQ0KCQkJaWYgKHRoaXMuaXNDb25uZWN0ZWQpIHsNCgkJCQl0aGlzLndhc01vdW50ZWQgPSAodGhpcy52b2x1bWVzLmxlbmd0aCA+IDApICYmIHRoaXMudm9sdW1lc1swXS5tb3VudGVkOw0KCQkJCXRoaXMucmVmcmVzaCgpOw0KCQkJfSBlbHNlIHsNCgkJCQl0aGlzLmRpcmVjdG9yeSA9IFBhdGgubWFjcm9zOw0KCQkJCXRoaXMuZmlsZWxpc3QgPSBbXTsNCgkJCX0NCgkJfSwNCgkJdm9sdW1lczogew0KCQkJZGVlcDogdHJ1ZSwNCgkJCWhhbmRsZXIoKSB7DQoJCQkJaWYgKHRoaXMuaXNDb25uZWN0ZWQpIHsNCgkJCQkJY29uc3Qgdm9sdW1lID0gUGF0aC5nZXRWb2x1bWUodGhpcy5kaXJlY3RvcnkpOw0KCQkJCQlpZiAodm9sdW1lID49IDAgJiYgdm9sdW1lIDwgdGhpcy52b2x1bWVzLmxlbmd0aCkgew0KCQkJCQkJY29uc3QgbW91bnRlZCA9IHRoaXMudm9sdW1lc1t2b2x1bWVdLm1vdW50ZWQ7DQoJCQkJCQlpZiAodGhpcy53YXNNb3VudGVkICE9PSBtb3VudGVkKSB7DQoJCQkJCQkJdGhpcy53YXNNb3VudGVkID0gbW91bnRlZDsNCgkJCQkJCQl0aGlzLnJlZnJlc2goKTsNCgkJCQkJCX0NCgkJCQkJfSBlbHNlIHsNCgkJCQkJCXRoaXMud2FzTW91bnRlZCA9IGZhbHNlOw0KCQkJCQkJdGhpcy5yZWZyZXNoKCk7DQoJCQkJCX0NCgkJCQl9DQoJCQl9DQoJCX0NCgl9DQp9DQo="},{"version":3,"sources":["MacroList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MacroList.vue","sourceRoot":"src/components/lists","sourcesContent":["<template>\r\n\t<v-card>\r\n\t\t<v-card-title>\r\n\t\t\t<v-icon small class=\"mr-1\">mdi-polymer</v-icon> {{ $t('list.macro.caption') }}\r\n\t\t\t<v-spacer></v-spacer>\r\n\t\t\t<span v-show=\"isConnected\" class=\"subtitle-2\">{{ directory.replace(macrosDirectory, $t('list.macro.root')) }}</span>\r\n\t\t</v-card-title>\r\n\r\n\t\t<v-card-text class=\"pa-0\" v-show=\"loading || filelist.length || !isRootDirectory\">\r\n\t\t\t<v-progress-linear v-show=\"loading\" :indeterminate=\"true\" class=\"my-0\"></v-progress-linear>\r\n\r\n\t\t\t<v-list class=\"pt-0\" dense>\r\n\t\t\t\t<v-list-item v-if=\"!isRootDirectory\" @click=\"goUp\">\r\n\t\t\t\t\t<v-list-item-avatar>\r\n\t\t\t\t\t\t<v-icon class=\"list-icon mr-1 grey lighten-1 white--text\">mdi-arrow-up</v-icon>\r\n\t\t\t\t\t</v-list-item-avatar>\r\n\r\n\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t<v-list-item-title>{{ $t('list.baseFileList.goUp') }}</v-list-item-title>\r\n\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t</v-list-item>\r\n\r\n\t\t\t\t<v-list-item v-for=\"item in filelist\" :key=\"item.name\" @click=\"itemClick(item)\">\r\n\t\t\t\t\t<v-list-item-avatar>\r\n\t\t\t\t\t\t<v-icon class=\"mr-1\" :class=\"item.isDirectory ? 'grey lighten-1 white--text' : 'blue white--text'\">\r\n\t\t\t\t\t\t\t{{ item.isDirectory ? 'mdi-folder' : 'mdi-file' }}\r\n\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t</v-list-item-avatar>\r\n\r\n\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t<v-list-item-title>{{ item.displayName }}</v-list-item-title>\r\n\t\t\t\t\t</v-list-item-content>\r\n\r\n\t\t\t\t\t<v-list-item-action v-if=\"!item.isDirectory && item.executing\">\r\n\t\t\t\t\t\t<v-progress-circular class=\"list-icon\" indeterminate color=\"blue\"></v-progress-circular>\r\n\t\t\t\t\t</v-list-item-action>\r\n\t\t\t\t</v-list-item>\r\n\t\t\t</v-list>\r\n\t\t</v-card-text>\r\n\r\n\t\t<v-alert :value=\"!filelist.length\" type=\"info\">\r\n\t\t\t{{ $t('list.macro.noMacros') }}\r\n\t\t</v-alert>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\n'use strict'\r\n\r\nimport { mapState, mapGetters, mapActions } from 'vuex'\r\n\r\nimport { getModifiedDirectories } from '../../store/machine'\r\nimport { DisconnectedError } from '../../utils/errors.js'\r\nimport Path from '../../utils/path.js'\r\n\r\nexport default {\r\n\tcomputed: {\r\n\t\t...mapState(['selectedMachine']),\r\n\t\t...mapGetters(['isConnected', 'uiFrozen']),\r\n\t\t...mapState('machine/model', {\r\n\t\t\tmacrosDirectory: state => state.directories.macros,\r\n\t\t\tvolumes: state => state.volumes\r\n\t\t}),\r\n\t\tisRootDirectory() { return Path.equals(this.directory, this.macrosDirectory); }\r\n\t},\r\n\tdata () {\r\n\t\treturn {\r\n\t\t\tunsubscribe: undefined,\r\n\t\t\tloading: false,\r\n\t\t\twasMounted: false,\r\n\t\t\tdirectory: Path.macros,\r\n\t\t\tfilelist: []\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t...mapActions('machine', ['sendCode', 'getFileList']),\r\n\t\tasync loadDirectory(directory) {\r\n\t\t\tif (this.loading) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.loading = true;\r\n\t\t\ttry {\r\n\t\t\t\tconst files = await this.getFileList(directory);\r\n\t\t\t\tfiles.sort((a, b) => a.name.localeCompare(b.name, undefined, { sensivity: 'base' }));\r\n\t\t\t\tfiles.sort((a, b) => (a.isDirectory === b.isDirectory) ? 0 : (a.isDirectory ? -1 : 1));\r\n\t\t\t\tfiles.forEach(function(item) {\r\n\t\t\t\t\titem.displayName = Path.stripMacroFilename(item.name);\r\n\t\t\t\t\titem.executing = false;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.directory = directory;\r\n\t\t\t\tthis.filelist = files;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tif (!(e instanceof DisconnectedError)) {\r\n\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\tthis.$log('error', this.$t('error.filelistRequestFailed'), e.message);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.loading = false;\r\n\t\t},\r\n\t\tasync refresh() {\r\n\t\t\tawait this.loadDirectory(this.directory);\r\n\t\t},\r\n\t\tasync itemClick(item) {\r\n\t\t\tif (this.uiFrozen) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst filename = Path.combine(this.directory, item.name);\r\n\t\t\tif (item.isDirectory) {\r\n\t\t\t\tawait this.loadDirectory(filename);\r\n\t\t\t} else if (!item.executing) {\r\n\t\t\t\titem.executing = true;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait this.sendCode(`M98 P\"${filename}\"`);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tif (!(e instanceof DisconnectedError)) {\r\n\t\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\titem.executing = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync goUp() {\r\n\t\t\tawait this.loadDirectory(Path.extractDirectory(this.directory));\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\t// Perform initial load\r\n\t\tthis.directory = this.macrosDirectory;\r\n\t\tif (this.isConnected) {\r\n\t\t\tthis.wasMounted = (this.volumes.length > 0) && this.volumes[0].mounted;\r\n\t\t\tthis.refresh();\r\n\t\t}\r\n\r\n\t\t// Keep track of file changes\r\n\t\tconst that = this;\r\n\t\tthis.unsubscribe = this.$store.subscribeAction(async function(action, state) {\r\n\t\t\tif (getModifiedDirectories(action, state).some(directory => Path.equals(directory, that.directory))) {\r\n\t\t\t\t// Refresh the list when a file or directory has been changed\r\n\t\t\t\tawait that.refresh();\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\tthis.unsubscribe();\r\n\t},\r\n\twatch: {\r\n\t\tmacrosDirectory(to, from) {\r\n\t\t\tif (Path.equals(this.directory, from) || !Path.startsWith(this.directory, to)) {\r\n\t\t\t\tthis.directory = to;\r\n\t\t\t}\r\n\t\t},\r\n\t\tisConnected(to) {\r\n\t\t\tif (to) {\r\n\t\t\t\tthis.wasMounted = (this.volumes.length > 0) && this.volumes[0].mounted;\r\n\t\t\t\tthis.refresh();\r\n\t\t\t} else {\r\n\t\t\t\tthis.directory = Path.macros;\r\n\t\t\t\tthis.filelist = [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tselectedMachine() {\r\n\t\t\t// TODO store current directory per selected machine\r\n\t\t\tif (this.isConnected) {\r\n\t\t\t\tthis.wasMounted = (this.volumes.length > 0) && this.volumes[0].mounted;\r\n\t\t\t\tthis.refresh();\r\n\t\t\t} else {\r\n\t\t\t\tthis.directory = Path.macros;\r\n\t\t\t\tthis.filelist = [];\r\n\t\t\t}\r\n\t\t},\r\n\t\tvolumes: {\r\n\t\t\tdeep: true,\r\n\t\t\thandler() {\r\n\t\t\t\tif (this.isConnected) {\r\n\t\t\t\t\tconst volume = Path.getVolume(this.directory);\r\n\t\t\t\t\tif (volume >= 0 && volume < this.volumes.length) {\r\n\t\t\t\t\t\tconst mounted = this.volumes[volume].mounted;\r\n\t\t\t\t\t\tif (this.wasMounted !== mounted) {\r\n\t\t\t\t\t\t\tthis.wasMounted = mounted;\r\n\t\t\t\t\t\t\tthis.refresh();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.wasMounted = false;\r\n\t\t\t\t\t\tthis.refresh();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n"]}]}