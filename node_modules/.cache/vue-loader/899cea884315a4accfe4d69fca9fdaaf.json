{"remainingRequest":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\panels\\HeightmapPanel.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\panels\\HeightmapPanel.vue","mtime":1592248188563},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQondXNlIHN0cmljdCcNCg0KaW1wb3J0IHsgbWFwU3RhdGUsIG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4Jw0KDQppbXBvcnQgeyBTY2VuZSwgUGVyc3BlY3RpdmVDYW1lcmEsIFdlYkdMUmVuZGVyZXIsIFJheWNhc3RlciwgTWVzaCwgTWVzaEJhc2ljTWF0ZXJpYWwsIFZlY3RvcjIsIFZlY3RvcjMsIFZlcnRleENvbG9ycywgRG91YmxlU2lkZSwgQXJyb3dIZWxwZXIsIEdyaWRIZWxwZXIgfSBmcm9tICd0aHJlZScNCmltcG9ydCB7IE9yYml0Q29udHJvbHMgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vY29udHJvbHMvT3JiaXRDb250cm9scycNCg0KaW1wb3J0IHsgZ2V0TW9kaWZpZWRGaWxlcyB9IGZyb20gJy4uLy4uL3N0b3JlL21hY2hpbmUnDQppbXBvcnQgeyBkcmF3TGVnZW5kLCBzZXRGYWNlQ29sb3JzLCBnZW5lcmF0ZUluZGljYXRvcnMsIGdlbmVyYXRlTWVzaEdlb21ldHJ5IH0gZnJvbSAnLi4vLi4vdXRpbHMvM2QuanMnDQppbXBvcnQgQ1NWIGZyb20gJy4uLy4uL3V0aWxzL2Nzdi5qcycNCmltcG9ydCBQYXRoIGZyb20gJy4uLy4uL3V0aWxzL3BhdGguanMnDQoNCmNvbnN0IHNjYWxlWiA9IDAuNSwgbWF4VmlzdWFsaXphdGlvblogPSAwLjI1DQpjb25zdCBpbmRpY2F0b3JDb2xvciA9IDB4RkZGRkZGLCBpbmRpY2F0b3JPcGFjaXR5ID0gMC40LCBpbmRpY2F0b3JPcGFjaXR5SGlnaGxpZ2h0ZWQgPSAxLjANCg0KZXhwb3J0IGRlZmF1bHQgew0KCWJlZm9yZUNyZWF0ZSgpIHsNCgkJdGhpcy50aHJlZSA9IHsJCQkJCQkvLyBub24tcmVhY3RpdmUgZGF0YQ0KCQkJc2NlbmU6IG51bGwsDQoJCQljYW1lcmE6IG51bGwsDQoJCQlyZW5kZXJlcjogbnVsbCwNCgkJCW9yYml0Q29udHJvbHM6IG51bGwsDQoJCQlyYXljYXN0ZXI6IG51bGwsDQoNCgkJCWhhc0hlbHBlcnM6IGZhbHNlLA0KCQkJbWVzaEdlb21ldHJ5OiBudWxsLA0KCQkJbWVzaFBsYW5lOiBudWxsLA0KCQkJbWVzaEluZGljYXRvcnM6IG51bGwsDQoJCQlsYXN0SW50ZXJzZWN0aW9uOiBudWxsDQoJCX0NCgl9LA0KCWNvbXB1dGVkOiB7DQoJCS4uLm1hcEdldHRlcnMoWydpc0Nvbm5lY3RlZCddKSwNCgkJLi4ubWFwU3RhdGUoJ21hY2hpbmUvbW9kZWwnLCB7DQoJCQloZWlnaHRtYXBGaWxlOiBzdGF0ZSA9PiBzdGF0ZS5tb3ZlLmNvbXBlbnNhdGlvbi5maWxlLA0KCQkJc3lzdGVtRGlyZWN0b3J5OiBzdGF0ZSA9PiBzdGF0ZS5kaXJlY3Rvcmllcy5zeXN0ZW0sDQoJCX0pLA0KCQkuLi5tYXBTdGF0ZSgnc2V0dGluZ3MnLCBbJ2xhbmd1YWdlJ10pDQoJfSwNCglkYXRhKCkgew0KCQlyZXR1cm4gew0KCQkJaXNBY3RpdmU6IHRydWUsDQoJCQlyZWFkeTogZmFsc2UsDQoJCQlsb2FkaW5nOiBmYWxzZSwNCgkJCWVycm9yTWVzc2FnZTogbnVsbCwNCg0KCQkJY29sb3JTY2hlbWU6ICd0ZXJyYWluJywNCgkJCXRvb2x0aXA6IHsNCgkJCQljb29yZDogew0KCQkJCQl4OiAwLA0KCQkJCQl5OiAwLA0KCQkJCQl6OiAwDQoJCQkJfSwNCgkJCQl4OiB1bmRlZmluZWQsDQoJCQkJeTogdW5kZWZpbmVkLA0KCQkJCXNob3duOiBmYWxzZQ0KCQkJfSwNCgkJCW51bVBvaW50czogdW5kZWZpbmVkLAkJCS8vIHBvaW50cyBleGNsdWRpbmcgTmFODQoJCQlhcmVhOiB1bmRlZmluZWQsDQoJCQlyYWRpdXM6IHVuZGVmaW5lZCwNCgkJCW1pbkRpZmY6IHVuZGVmaW5lZCwNCgkJCW1heERpZmY6IHVuZGVmaW5lZCwNCgkJCW1lYW5FcnJvcjogdW5kZWZpbmVkLA0KCQkJcm1zRXJyb3I6IHVuZGVmaW5lZCwNCg0KCQkJdW5zdWJzY3JpYmU6IHVuZGVmaW5lZA0KCQl9DQoJfSwNCgltZXRob2RzOiB7DQoJCS4uLm1hcEFjdGlvbnMoJ21hY2hpbmUnLCBbJ2Rvd25sb2FkJ10pLA0KCQlpbml0KCkgew0KCQkJLy8gUGVyZm9ybSBpbml0aWFsIHJlc2l6ZQ0KCQkJY29uc3Qgc2l6ZSA9IHRoaXMucmVzaXplKCk7DQoNCgkJCS8vIENyZWF0ZSBUSFJFRSBpbnN0YW5jZXMNCgkJCXRoaXMudGhyZWUuc2NlbmUgPSBuZXcgU2NlbmUoKTsNCgkJCXRoaXMudGhyZWUuY2FtZXJhID0gbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKDQ1LCBzaXplLndpZHRoIC8gc2l6ZS5oZWlnaHQsIDAuMSwgMTAwMCk7DQoJCQl0aGlzLnRocmVlLmNhbWVyYS5wb3NpdGlvbi5zZXQoMSwgMSwgMSk7DQoJCQl0aGlzLnRocmVlLmNhbWVyYS51cCA9IG5ldyBWZWN0b3IzKDAsIDAsIDEpOw0KCQkJdGhpcy50aHJlZS5yZW5kZXJlciA9IG5ldyBXZWJHTFJlbmRlcmVyKHsgY2FudmFzOiB0aGlzLiRyZWZzLmNhbnZhcyB9KTsNCgkJCXRoaXMudGhyZWUucmVuZGVyZXIuc2V0U2l6ZShzaXplLndpZHRoLCBzaXplLmhlaWdodCk7DQoJCQl0aGlzLnRocmVlLm9yYml0Q29udHJvbHMgPSBuZXcgT3JiaXRDb250cm9scyh0aGlzLnRocmVlLmNhbWVyYSwgdGhpcy50aHJlZS5yZW5kZXJlci5kb21FbGVtZW50KTsNCgkJCXRoaXMudGhyZWUub3JiaXRDb250cm9scy5lbmFibGVLZXlzID0gZmFsc2U7DQoJCQl0aGlzLnRocmVlLnJheWNhc3RlciA9IG5ldyBSYXljYXN0ZXIoKTsNCg0KCQkJLy8gUmVnaXN0ZXIgdGhpcyBpbnN0YW5jZSBpbiBvcmRlciB0byBkZWFsIHdpdGggc2l6ZSBjaGFuZ2VzDQoJCQlpZiAodGhpcy5pc0Nvbm5lY3RlZCkgew0KCQkJCXRoaXMuZ2V0SGVpZ2h0bWFwKCk7DQoJCQl9DQoJCX0sDQoJCXJlc2l6ZSgpIHsNCgkJCWlmICghdGhpcy5pc0FjdGl2ZSkgew0KCQkJCXJldHVybjsNCgkJCX0NCg0KCQkJLy8gUmVzaXplIGNhbnZhcyBlbGVtZW50cw0KCQkJY29uc3Qgd2lkdGggPSBNYXRoLm1heCh0aGlzLiRyZWZzLmNvbnRhaW5lci5vZmZzZXRXaWR0aCAtIDgwLCAwKTsNCgkJCWxldCBoZWlnaHQ7DQoJCQlzd2l0Y2ggKHRoaXMuJHZ1ZXRpZnkuYnJlYWtwb2ludC5uYW1lKSB7DQoJCQkJY2FzZSAneHMnOg0KCQkJCQloZWlnaHQgPSB3aWR0aDsNCgkJCQkJYnJlYWs7DQoJCQkJY2FzZSAnc20nOg0KCQkJCQloZWlnaHQgPSB3aWR0aCAqIDMgLyA0Ow0KCQkJCQlicmVhazsNCgkJCQljYXNlICd4bCc6DQoJCQkJCWhlaWdodCA9IHdpZHRoICogMTAgLyAxNjsNCgkJCQkJYnJlYWs7DQoJCQkJZGVmYXVsdDoNCgkJCQkJaGVpZ2h0ID0gd2lkdGggKiA5IC8gMTY7DQoJCQkJCWJyZWFrOw0KCQkJfQ0KDQoJCQl0aGlzLiRyZWZzLmNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9cHhgOw0KCQkJdGhpcy4kcmVmcy5sZWdlbmQuc3R5bGUubGVmdCA9IGAke3dpZHRofXB4YDsNCgkJCXRoaXMuJHJlZnMubGVnZW5kLmhlaWdodCA9IGhlaWdodDsNCgkJCXRoaXMuJHJlZnMuY2FudmFzLndpZHRoID0gd2lkdGg7DQoJCQl0aGlzLiRyZWZzLmNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7DQoNCgkJCS8vIFJlc2l6ZSB0aGUgM0QgaGVpZ2h0IG1hcA0KCQkJaWYgKHRoaXMudGhyZWUucmVuZGVyZXIpIHsNCgkJCQl0aGlzLnRocmVlLmNhbWVyYS5hc3BlY3QgPSB3aWR0aCAvIGhlaWdodDsNCgkJCQl0aGlzLnRocmVlLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7DQoJCQkJdGhpcy50aHJlZS5yZW5kZXJlci5zZXRTaXplKHdpZHRoLCBoZWlnaHQpOw0KCQkJfQ0KDQoJCQkvLyBSZWRyYXcgdGhlIGxlZ2VuZCBhbmQgcmV0dXJuIHRoZSBjYW52YXMgc2l6ZQ0KCQkJZHJhd0xlZ2VuZCh0aGlzLiRyZWZzLmxlZ2VuZCwgbWF4VmlzdWFsaXphdGlvblosIHRoaXMuY29sb3JTY2hlbWUpOw0KCQkJcmV0dXJuIHsgd2lkdGgsIGhlaWdodCB9Ow0KCQl9LA0KCQlzaG93Q1NWKGNzdkRhdGEpIHsNCgkJCS8vIExvYWQgdGhlIENTVi4gVGhlIGZpcnN0IGxpbmUgaXMgYSBjb21tZW50IHRoYXQgY2FuIGJlIHJlbW92ZWQNCgkJCWNvbnN0IGNzdiA9IG5ldyBDU1YoY3N2RGF0YS5zdWJzdHJpbmcoY3N2RGF0YS5pbmRleE9mKCJcbiIpICsgMSkpOw0KCQkJbGV0IHJhZGl1cyA9IHBhcnNlRmxvYXQoY3N2LmdldCgncmFkaXVzJykpOw0KCQkJaWYgKHJhZGl1cyA8PSAwKSB7IHJhZGl1cyA9IHVuZGVmaW5lZDsgfQ0KCQkJY29uc3QgeE1pbiA9IHBhcnNlRmxvYXQoY3N2LmdldCgneG1pbicpKTsNCgkJCWNvbnN0IHlNaW4gPSBwYXJzZUZsb2F0KGNzdi5nZXQoJ3ltaW4nKSk7DQoJCQlsZXQgeFNwYWNpbmcgPSBwYXJzZUZsb2F0KGNzdi5nZXQoJ3hzcGFjaW5nJykpOw0KCQkJaWYgKGlzTmFOKHhTcGFjaW5nKSkgeyB4U3BhY2luZyA9IHBhcnNlRmxvYXQoY3N2LmdldCgnc3BhY2luZycpKTsgfQ0KCQkJbGV0IHlTcGFjaW5nID0gcGFyc2VGbG9hdChjc3YuZ2V0KCd5c3BhY2luZycpKTsNCgkJCWlmIChpc05hTih5U3BhY2luZykpIHsgeVNwYWNpbmcgPSBwYXJzZUZsb2F0KGNzdi5nZXQoJ3NwYWNpbmcnKSk7IH0NCg0KCQkJLy8gQ29udmVydCBlYWNoIHBvaW50IHRvIGEgdmVjdG9yDQoJCQljb25zdCBwb2ludHMgPSBbXTsNCgkJCWZvciAobGV0IHkgPSAxOyB5IDwgY3N2LmNvbnRlbnQubGVuZ3RoOyB5KyspIHsNCgkJCQlmb3IgKGxldCB4ID0gMDsgeCA8IGNzdi5jb250ZW50W3ldLmxlbmd0aDsgeCsrKSB7DQoJCQkJCWNvbnN0IHZhbHVlID0gY3N2LmNvbnRlbnRbeV1beF0udHJpbSgpOw0KCQkJCQlwb2ludHMucHVzaChbeE1pbiArIHggKiB4U3BhY2luZywgeU1pbiArICh5IC0gMSkgKiB5U3BhY2luZywgKHZhbHVlID09PSAiMCIpID8gTmFOIDogcGFyc2VGbG9hdCh2YWx1ZSldKTsNCgkJCQl9DQoJCQl9DQoNCgkJCS8vIERpc3BsYXkgaGVpZ2h0IG1hcA0KCQkJdGhpcy5zaG93SGVpZ2h0bWFwKHBvaW50cywgcmFkaXVzKTsNCgkJfSwNCgkJc2hvd0hlaWdodG1hcChwb2ludHMsIHByb2JlUmFkaXVzKSB7DQoJCQkvLyBDbGVhbiB1cCBmaXJzdA0KCQkJaWYgKHRoaXMudGhyZWUubWVzaEdlb21ldHJ5KSB7DQoJCQkJdGhpcy50aHJlZS5zY2VuZS5yZW1vdmUodGhpcy50aHJlZS5tZXNoUGxhbmUpOw0KCQkJCXRoaXMudGhyZWUubWVzaEluZGljYXRvcnMuZm9yRWFjaChmdW5jdGlvbihpbmRpY2F0b3IpIHsNCgkJCQkJdGhpcy5yZW1vdmUoaW5kaWNhdG9yKTsNCgkJCQl9LCB0aGlzLnRocmVlLnNjZW5lKTsNCg0KCQkJCXRoaXMudGhyZWUubWVzaEdlb21ldHJ5ID0gbnVsbDsNCgkJCQl0aGlzLnRocmVlLm1lc2hQbGFuZSA9IG51bGw7DQoJCQkJdGhpcy50aHJlZS5tZXNoSW5kaWNhdG9ycyA9IG51bGw7DQoJCQkJdGhpcy50aHJlZS5sYXN0SW50ZXJzZWN0aW9uID0gbnVsbDsNCgkJCX0NCg0KCQkJLy8gR2VuZXJhdGUgc3RhdHMNCgkJCWxldCB4TWluLCB4TWF4LCB5TWluLCB5TWF4Ow0KDQoJCQl0aGlzLnJhZGl1cyA9IHByb2JlUmFkaXVzOw0KCQkJdGhpcy5udW1Qb2ludHMgPSAwOw0KCQkJdGhpcy5taW5EaWZmID0gdW5kZWZpbmVkOw0KCQkJdGhpcy5tYXhEaWZmID0gdW5kZWZpbmVkOw0KCQkJdGhpcy5tZWFuRXJyb3IgPSAwOw0KCQkJdGhpcy5ybXNFcnJvciA9IDA7DQoNCgkJCWZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7DQoJCQkJY29uc3QgeiA9IHBvaW50c1tpXVsyXTsNCgkJCQlpZiAoIWlzTmFOKHopKSB7DQoJCQkJCWNvbnN0IHggPSBwb2ludHNbaV1bMF07DQoJCQkJCWNvbnN0IHkgPSBwb2ludHNbaV1bMV07DQoJCQkJCWlmICh4TWluID09PSB1bmRlZmluZWQgfHwgeE1pbiA+IHgpIHsgeE1pbiA9IHg7IH0NCgkJCQkJaWYgKHhNYXggPT09IHVuZGVmaW5lZCB8fCB4TWF4IDwgeCkgeyB4TWF4ID0geDsgfQ0KCQkJCQlpZiAoeU1pbiA9PT0gdW5kZWZpbmVkIHx8IHlNaW4gPiB5KSB7IHlNaW4gPSB5OyB9DQoJCQkJCWlmICh5TWF4ID09PSB1bmRlZmluZWQgfHwgeU1heCA8IHkpIHsgeU1heCA9IHk7IH0NCg0KCQkJCQl0aGlzLm51bVBvaW50cysrOw0KCQkJCQl0aGlzLm1lYW5FcnJvciArPSB6Ow0KCQkJCQl0aGlzLnJtc0Vycm9yICs9IHogKiB6Ow0KCQkJCQlpZiAodGhpcy5taW5EaWZmID09PSB1bmRlZmluZWQgfHwgdGhpcy5taW5EaWZmID4geikgeyB0aGlzLm1pbkRpZmYgPSB6OyB9DQoJCQkJCWlmICh0aGlzLm1heERpZmYgPT09IHVuZGVmaW5lZCB8fCB0aGlzLm1heERpZmYgPCB6KSB7IHRoaXMubWF4RGlmZiA9IHo7IH0NCgkJCQl9DQoJCQl9DQoNCgkJCXRoaXMuYXJlYSA9IHByb2JlUmFkaXVzID8gKHByb2JlUmFkaXVzICogcHJvYmVSYWRpdXMgKiBNYXRoLlBJKSA6IE1hdGguYWJzKCh4TWF4IC0geE1pbikgKiAoeU1heCAtIHlNaW4pKTsNCgkJCXRoaXMucm1zRXJyb3IgPSBNYXRoLnNxcnQoKCh0aGlzLnJtc0Vycm9yICogdGhpcy5udW1Qb2ludHMpIC0gKHRoaXMubWVhbkVycm9yICogdGhpcy5tZWFuRXJyb3IpKSkgLyB0aGlzLm51bVBvaW50czsNCgkJCXRoaXMubWVhbkVycm9yID0gdGhpcy5tZWFuRXJyb3IgLyB0aGlzLm51bVBvaW50czsNCg0KCQkJLy8gR2VuZXJhdGUgbWVzaCBnZW9tZXRyeSBhbmQgYXBwbHkgZmFjZSBjb2xvcnMNCgkJCXRoaXMudGhyZWUubWVzaEdlb21ldHJ5ID0gZ2VuZXJhdGVNZXNoR2VvbWV0cnkocG9pbnRzLCB4TWluLCB4TWF4LCB5TWluLCB5TWF4LCBzY2FsZVopOw0KCQkJc2V0RmFjZUNvbG9ycyh0aGlzLnRocmVlLm1lc2hHZW9tZXRyeSwgc2NhbGVaLCB0aGlzLmNvbG9yU2NoZW1lLCBtYXhWaXN1YWxpemF0aW9uWik7DQoNCgkJCS8vIE1ha2UgM0QgbWVzaCBhbmQgYWRkIGl0DQoJCQljb25zdCBtYXRlcmlhbCA9IG5ldyBNZXNoQmFzaWNNYXRlcmlhbCh7IHZlcnRleENvbG9yczogVmVydGV4Q29sb3JzLCBzaWRlOiBEb3VibGVTaWRlIH0pOw0KCQkJdGhpcy50aHJlZS5tZXNoUGxhbmUgPSBuZXcgTWVzaCh0aGlzLnRocmVlLm1lc2hHZW9tZXRyeSwgbWF0ZXJpYWwpOw0KCQkJdGhpcy50aHJlZS5zY2VuZS5hZGQodGhpcy50aHJlZS5tZXNoUGxhbmUpOw0KDQoJCQkvLyBNYWtlIGluZGljYXRvcnMgYW5kIGFkZCB0aGVtDQoJCQl0aGlzLnRocmVlLm1lc2hJbmRpY2F0b3JzID0gZ2VuZXJhdGVJbmRpY2F0b3JzKHRoaXMudGhyZWUubWVzaEdlb21ldHJ5LCB0aGlzLm51bVBvaW50cywgc2NhbGVaLCBpbmRpY2F0b3JDb2xvciwgaW5kaWNhdG9yT3BhY2l0eSk7DQoJCQl0aGlzLnRocmVlLm1lc2hJbmRpY2F0b3JzLmZvckVhY2goZnVuY3Rpb24oaW5kaWNhdG9yKSB7DQoJCQkJdGhpcy5hZGQoaW5kaWNhdG9yKTsNCgkJCX0sIHRoaXMudGhyZWUuc2NlbmUpOw0KDQoJCQlpZiAoIXRoaXMudGhyZWUuaGFzSGVscGVycykgew0KCQkJCS8vIE1ha2UgYXhpcyBhcnJvd3MgZm9yIFhZWg0KCQkJCXRoaXMudGhyZWUuc2NlbmUuYWRkKG5ldyBBcnJvd0hlbHBlcihuZXcgVmVjdG9yMygxLCAwLCAwKSwgbmV3IFZlY3RvcjMoLTAuNiwgLTAuNiwgMCksIDAuNSwgMHhGRjAwMDApKTsNCgkJCQl0aGlzLnRocmVlLnNjZW5lLmFkZChuZXcgQXJyb3dIZWxwZXIobmV3IFZlY3RvcjMoMCwgMSwgMCksIG5ldyBWZWN0b3IzKC0wLjYsIC0wLjYsIDApLCAwLjUsIDB4MDBGRjAwKSk7DQoJCQkJdGhpcy50aHJlZS5zY2VuZS5hZGQobmV3IEFycm93SGVscGVyKG5ldyBWZWN0b3IzKDAsIDAsIDEpLCBuZXcgVmVjdG9yMygtMC42LCAtMC42LCAwKSwgMC41LCAweDAwMDBGRikpOw0KDQoJCQkJLy8gTWFrZSBncmlkIG9uIFhZIHBsYW5lDQoJCQkJY29uc3QgZ3JpZCA9IG5ldyBHcmlkSGVscGVyKDEuMSwgMTUpOw0KCQkJCWdyaWQucm90YXRpb24ueCA9IC1NYXRoLlBJIC8gMjsNCgkJCQl0aGlzLnRocmVlLnNjZW5lLmFkZChncmlkKTsNCg0KCQkJCS8vIERvbid0IGFkZCB0aGVzZSBoZWxwZXJzIGFnYWluDQoJCQkJdGhpcy50aHJlZS5oYXNIZWxwZXJzID0gdHJ1ZTsNCgkJCX0NCg0KCQkJLy8gUmVuZGVyIHNjZW5lDQoJCQl0aGlzLnJlYWR5ID0gdHJ1ZTsNCgkJCXRoaXMucmVuZGVyKCk7DQoNCgkJCS8vIFJlc2l6ZSBpdCBhZ2FpbiB3aGVuIHRoZSB2YWx1ZXMgaGF2ZSBiZWVuIGNoYW5nZWQNCgkJCXRoaXMuJG5leHRUaWNrKHRoaXMucmVzaXplKTsNCgkJfSwNCgkJcmVuZGVyKCkgew0KCQkJaWYgKHRoaXMudGhyZWUucmVuZGVyZXIpIHsNCgkJCQlyZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5yZW5kZXIpOw0KCQkJCXRoaXMudGhyZWUucmVuZGVyZXIucmVuZGVyKHRoaXMudGhyZWUuc2NlbmUsIHRoaXMudGhyZWUuY2FtZXJhKTsNCgkJCX0NCgkJfSwNCgkJY2FudmFzTW91c2VNb3ZlKGUpIHsNCgkJCWlmICghZS5jbGllbnRYIHx8ICF0aGlzLnRocmVlLm1lc2hHZW9tZXRyeSkgew0KCQkJCXJldHVybjsNCgkJCX0NCg0KCQkJLy8gVHJ5IHRvIGdldCB0aGUgWiB2YWx1ZSBiZWxvdyB0aGUgY3Vyc29yDQoJCQkvLyBGb3IgdGhhdCB3ZSBuZWVkIG5vcm1hbGl6ZWQgWCtZIGNvb3JkaW5hdGVzIGJldHdlZW4gLTEuMCBhbmQgMS4wDQoJCQljb25zdCByZWN0ID0gZS50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7DQoJCQljb25zdCBtb3VzZSA9IG5ldyBWZWN0b3IyKCk7DQoJCQltb3VzZS54ID0gKGUuY2xpZW50WCAtIHJlY3QubGVmdCkgLyBlLnRhcmdldC5jbGllbnRXaWR0aCAqIDIgLSAxOw0KCQkJbW91c2UueSA9IC0oZS5jbGllbnRZIC0gcmVjdC50b3ApIC8gZS50YXJnZXQuY2xpZW50SGVpZ2h0ICogMiArIDE7DQoNCgkJCS8vIElzIHRoZSBjdXJzb3Igb24gYSBwb2ludCBpbmRpY2F0b3I/DQoJCQl0aGlzLnRocmVlLnJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKG1vdXNlLCB0aGlzLnRocmVlLmNhbWVyYSk7DQoJCQljb25zdCBpbnRlcnNlY3Rpb24gPSB0aGlzLnRocmVlLnJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKHRoaXMudGhyZWUubWVzaEluZGljYXRvcnMpOw0KCQkJaWYgKHRoaXMudGhyZWUubGFzdEludGVyc2VjdGlvbiAmJiAoaW50ZXJzZWN0aW9uLmxlbmd0aCA9PT0gMCB8fCBpbnRlcnNlY3Rpb25bMF0gIT09IHRoaXMudGhyZWUubGFzdEludGVyc2VjdGlvbikpIHsNCgkJCQl0aGlzLnRocmVlLmxhc3RJbnRlcnNlY3Rpb24ub2JqZWN0Lm1hdGVyaWFsLm9wYWNpdHkgPSBpbmRpY2F0b3JPcGFjaXR5Ow0KCQkJCXRoaXMudGhyZWUubGFzdEludGVyc2VjdGlvbiA9IHVuZGVmaW5lZDsNCgkJCX0NCg0KCQkJbGV0IGludGVyc2VjdGlvblBvaW50Ow0KCQkJaWYgKGludGVyc2VjdGlvbi5sZW5ndGggPiAwKSB7DQoJCQkJaWYgKGludGVyc2VjdGlvblswXSAhPT0gdGhpcy50aHJlZS5sYXN0SW50ZXJzZWN0aW9uKSB7DQoJCQkJCWludGVyc2VjdGlvblswXS5vYmplY3QubWF0ZXJpYWwub3BhY2l0eSA9IGluZGljYXRvck9wYWNpdHlIaWdobGlnaHRlZDsNCgkJCQkJdGhpcy50aHJlZS5sYXN0SW50ZXJzZWN0aW9uID0gaW50ZXJzZWN0aW9uWzBdOw0KCQkJCX0NCgkJCQlpbnRlcnNlY3Rpb25Qb2ludCA9IGludGVyc2VjdGlvblswXS5vYmplY3QuY29vcmRzOw0KCQkJfQ0KDQoJCQkvLyBTaG93IG9yIGhpZGUgdGhlIHRvb2x0aXANCgkJCWlmIChpbnRlcnNlY3Rpb25Qb2ludCkgew0KCQkJCXRoaXMudG9vbHRpcC5jb29yZC54ID0gaW50ZXJzZWN0aW9uUG9pbnQueDsNCgkJCQl0aGlzLnRvb2x0aXAuY29vcmQueSA9IGludGVyc2VjdGlvblBvaW50Lnk7DQoJCQkJdGhpcy50b29sdGlwLmNvb3JkLnogPSBpbnRlcnNlY3Rpb25Qb2ludC56Ow0KCQkJCXRoaXMudG9vbHRpcC54ID0gZS5jbGllbnRYOw0KCQkJCXRoaXMudG9vbHRpcC55ID0gZS5jbGllbnRZOw0KCQkJCXRoaXMudG9vbHRpcC5zaG93biA9IHRydWU7DQoJCQl9IGVsc2Ugew0KCQkJCXRoaXMudG9vbHRpcC5zaG93biA9IGZhbHNlOw0KCQkJfQ0KCQl9LA0KCQl0b3BWaWV3KCkgew0KCQkJdGhpcy50aHJlZS5jYW1lcmEucG9zaXRpb24uc2V0KDAsIDAsIDEuNSk7DQoJCQl0aGlzLnRocmVlLmNhbWVyYS5yb3RhdGlvbi5zZXQoMCwgMCwgMCk7DQoJCQl0aGlzLnRocmVlLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7DQoJCX0sDQoNCgkJYXN5bmMgZ2V0SGVpZ2h0bWFwKGZpbGVuYW1lKSB7DQoJCQlpZiAodGhpcy5sb2FkaW5nKSB7DQoJCQkJLy8gRG9uJ3QgYXR0ZW1wdCB0byBsb2FkIG1vcmUgdGhhbiBvbmUgZmlsZSBhdCBvbmNlLi4uDQoJCQkJcmV0dXJuOw0KCQkJfQ0KDQoJCQlpZiAoIWZpbGVuYW1lKSB7DQoJCQkJZmlsZW5hbWUgPSB0aGlzLmhlaWdodG1hcEZpbGU7DQoJCQkJaWYgKCFmaWxlbmFtZSkgew0KCQkJCQlmaWxlbmFtZSA9IFBhdGguY29tYmluZSh0aGlzLnN5c3RlbURpcmVjdG9yeSwgUGF0aC5oZWlnaHRtYXBGaWxlKTsNCgkJCQl9DQoJCQl9DQoNCgkJCXRoaXMucmVhZHkgPSBmYWxzZTsNCgkJCXRoaXMubG9hZGluZyA9IHRydWU7DQoJCQl0cnkgew0KCQkJCWNvbnN0IGhlaWdodG1hcCA9IGF3YWl0IHRoaXMuZG93bmxvYWQoeyBmaWxlbmFtZSwgdHlwZTogJ3RleHQnLCBzaG93UHJvZ3Jlc3M6IGZhbHNlLCBzaG93U3VjY2VzczogZmFsc2UsIHNob3dFcnJvcjogZmFsc2UgfSk7DQoJCQkJdGhpcy5zaG93Q1NWKGhlaWdodG1hcCk7DQoJCQl9IGNhdGNoIChlKSB7DQoJCQkJY29uc29sZS53YXJuKGUpOw0KCQkJCXRoaXMuZXJyb3JNZXNzYWdlID0gZS5tZXNzYWdlOw0KCQkJfQ0KCQkJdGhpcy5sb2FkaW5nID0gZmFsc2U7DQoJCX0sDQoNCgkJdGVzdE1lc2goKSB7DQoJCQljb25zdCBjc3ZEYXRhID0gJ1JlcFJhcEZpcm13YXJlIGhlaWdodCBtYXAgZmlsZSB2MVxueG1pbix4bWF4LHltaW4seW1heCxyYWRpdXMsc3BhY2luZyx4bnVtLHludW1cbi0xNDAuMDAsMTQwLjEwLC0xNDAuMDAsMTQwLjEwLDE1MC4wMCwyMC4wMCwxNSwxNVxuMCwwLDAsMCwwLC0wLjEzOSwtMC4xODgsLTAuMTM5LC0wLjIwMiwtMC4yMjQsMCwwLDAsMCwwXG4wLDAsMCwtMC4wNTgsLTAuMDY2LC0wLjEwOSwtMC4xNDEsLTAuMTI5LC0wLjE4NiwtMC4xOTgsLTAuMTkxLC0wLjE3NiwwLDAsMFxuMCwwLDAuMDEzLC0wLjAwOCwtMC4wNTMsLTAuMDcxLC0wLjA4NywtMC4xMTMsLTAuMTYyLC0wLjE5MCwtMC4xOTksLTAuMjY3LC0wLjIzNywwLDBcbjAsMC4xMjQsMC4wNzYsMC4wMjUsLTAuMDI2LC0wLjA1NCwtMC4wNzgsLTAuMTM3LC0wLjEyNywtMC4xNjUsLTAuMjAxLC0wLjE4OSwtMC4yMjcsLTAuMjI2LDBcbjAsMC4xOTgsMC4xMjAsMC4wNDcsMC4wODksLTAuMDc0LC0wLjA5NywtMC4xNTMsLTAuMTg4LC0wLjQ3NywtMC4xOTAsLTAuMTk5LC0wLjIzNywtMC4yMTEsMFxuMC4zMTIsMC4yMjksMC4xOTgsMC4wOTgsMC4wOTcsMC4wMDQsLTAuMDg5LC0wLjUxNiwtMC4xNTAsLTAuMjA5LC0wLjE5NywtMC4xODMsLTAuMjE2LC0wLjI5NiwtMC4yNTBcbjAuMjg3LDAuMjYzLDAuMjkyLDAuMTAwLDAuMTkwLDAuMDE1LC0wLjEwMiwtMC4wMzksLTAuMTI1LC0wLjE0OSwtMC4xMzcsLTAuMTk4LC0wLjE4OCwtMC4yMjAsLTAuMTkyXG4wLjM3OCwwLjI4OSwwLjMyOCwwLjE3MiwwLjEzMywwLjA3OCwtMC4wODYsMC4xMzQsLTAuMTAwLC0wLjE1MCwtMC4xNzYsLTAuMjM0LC0wLjE4NywtMC4xOTksLTAuMjIxXG4wLjM2MCwwLjI5MSwwLjI2MCwwLjE4NSwwLjExMSwwLjEwOCwwLjAyNCwwLjA3MywtMC4wMjQsLTAuMTE2LC0wLjE4NywtMC4yNTIsLTAuMjAxLC0wLjIxNSwtMC4xODdcbjAuNDQ3LDAuMzk3LDAuMzM2LDAuMjc2LDAuMTgwLDAuMTY0LDAuMDczLC0wLjA1MCwtMC4wNDksLTAuMTA5LC0wLjE1MSwtMC4xNzIsLTAuMjExLC0wLjE3NSwtMC4xNjFcbjAsMC4zMzcsMC4yODksMC4yMjcsMC4xNzksMC4xMjcsMC4wODYsMC4wMzQsLTAuMDM5LC0wLjA2MCwtMC4xMTMsLTAuMTA4LC0wLjE3MSwtMC4xNTMsMFxuMCwwLjQ3OCwwLjM5NywwLjM3NCwwLjI3MCwwLjE0MSwwLjA4NSwwLjA3NCwwLjAzNywtMC4wNDgsLTAuMDgwLC0wLjE4NywtMC4xMjYsLTAuMTc1LDBcbjAsMCwwLjM3MywwLjM2NCwwLjI2NSwwLjE2MSwwLjEzOSwwLjIxMiwwLjA0MCwwLjA0NiwtMC4wMDgsLTAuMTQ5LC0wLjExNSwwLDBcbjAsMCwwLDAuMzQ2LDAuMjk1LDAuMjczLDAuMTQ4LDAuMTM2LDAuMDg0LDAuMDI0LC0wLjA1NSwtMC4wNzgsMCwwLDBcbjAsMCwwLDAsMCwwLjI0MCwwLjE3OCwwLjA4NCwwLjA5MCwwLjAwNCwwLDAsMCwwLDAnOw0KCQkJdGhpcy5zaG93Q1NWKGNzdkRhdGEpOw0KCQl9LA0KCQl0ZXN0QmVkQ29tcGVuc2F0aW9uKG51bVBvaW50cykgew0KCQkJbGV0IHRlc3RQb2ludHM7DQoJCQlzd2l0Y2ggKG51bVBvaW50cykgew0KCQkJCWNhc2UgMzoNCgkJCQkJdGVzdFBvaW50cyA9IFtbMTUuMCwgMTUuMCwgMC4xMjNdLCBbMTUuMCwgMTk1LjAsIC0wLjI0M10sIFsyMTUuMCwgMTA1LjAsIDAuMDM0XV07DQoJCQkJCWJyZWFrOw0KCQkJCWNhc2UgNDoNCgkJCQkJdGVzdFBvaW50cyA9IFtbMTUuMCwgMTUuMCwgMC4wMTVdLCBbMTUuMCwgMTg1LjAsIC0wLjE5M10sIFsxNzUuMCwgMTg1LjAsIDAuMTU2XSwgWzE3NS4wLCAxNS4wLCAwLjEwNV1dOw0KCQkJCQlicmVhazsNCgkJCQljYXNlIDU6DQoJCQkJCXRlc3RQb2ludHMgPSBbWzE1LjAsIDE1LjAsIDAuMDA3XSwgWzE1LjAsIDE4NS4wLCAtMC4xMjFdLCBbMTc1LjAsIDE4NS4wLCAtMC4wMTldLCBbMTc1LjAsIDE1LjAsIDAuMTkzXSwgWzk1LjAsIDEwMC4wLCAwLjA1XV07DQoJCQkJCWJyZWFrOw0KCQkJCWRlZmF1bHQ6DQoJCQkJCXRocm93IG5ldyBFcnJvcigiQmFkIG51bWJlciBvZiBwcm9iZSBwb2ludHMsIG9ubHkgb25lIG9mIDMvNC81IGlzIHN1cHBvcnRlZCIpOw0KCQkJfQ0KCQkJdGhpcy5zaG93SGVpZ2h0bWFwKHRlc3RQb2ludHMpOw0KCQl9DQoJfSwNCglhY3RpdmF0ZWQoKSB7DQoJCXRoaXMuaXNBY3RpdmUgPSB0cnVlOw0KCQl0aGlzLnJlc2l6ZSgpOw0KCX0sDQoJZGVhY3RpdmF0ZSgpIHsNCgkJdGhpcy5pc0FjdGl2ZSA9IGZhbHNlOw0KCX0sDQoJbW91bnRlZCgpIHsNCgkJY29uc3QgZ2V0SGVpZ2h0bWFwID0gdGhpcy5nZXRIZWlnaHRtYXA7DQoJCXRoaXMudW5zdWJzY3JpYmUgPSB0aGlzLiRzdG9yZS5zdWJzY3JpYmVBY3Rpb24oZnVuY3Rpb24oYWN0aW9uLCBzdGF0ZSkgew0KCQkJaWYgKGdldE1vZGlmaWVkRmlsZXMoYWN0aW9uLCBzdGF0ZSkuaW5kZXhPZihQYXRoLmhlaWdodG1hcEZpbGUpICE9PSAtMSB8fA0KCQkJCWFjdGlvbi50eXBlLmVuZHNXaXRoKCdvbkNvZGVDb21wbGV0ZWQnKSAmJiBhY3Rpb24ucGF5bG9hZC5yZXBseS5pbmRleE9mKFBhdGguaGVpZ2h0bWFwRmlsZSkgIT09IC0xKSB7DQoJCQkJZ2V0SGVpZ2h0bWFwKCk7DQoJCQl9DQoJCX0pOw0KDQoJCS8vIEZJWE1FIGdpdmUgdGhlIGdyaWQgc29tZSB0aW1lIHRvIHJlc2l6ZSBldmVyeXRoaW5nLi4uDQoJCXNldFRpbWVvdXQodGhpcy5pbml0LCAxMDApOw0KCX0sDQoJYmVmb3JlRGVzdHJveSgpIHsNCgkJdGhpcy51bnN1YnNjcmliZSgpOw0KDQoJCWlmICh0aGlzLnRocmVlLnJlbmRlcmVyKSB7DQoJCQl0aGlzLnRocmVlLnJlbmRlcmVyLmZvcmNlQ29udGV4dExvc3MoKTsNCgkJCXRoaXMudGhyZWUucmVuZGVyZXIgPSBudWxsOw0KCQl9DQoJfSwNCgl3YXRjaDogew0KCQljb2xvclNjaGVtZSh0bykgew0KCQkJaWYgKHRoaXMudGhyZWUubWVzaEdlb21ldHJ5KSB7DQoJCQkJc2V0RmFjZUNvbG9ycyh0aGlzLnRocmVlLm1lc2hHZW9tZXRyeSwgc2NhbGVaLCB0bywgbWF4VmlzdWFsaXphdGlvblopOw0KCQkJfQ0KCQkJZHJhd0xlZ2VuZCh0aGlzLiRyZWZzLmxlZ2VuZCwgbWF4VmlzdWFsaXphdGlvblosIHRvKTsNCgkJfSwNCgkJaXNDb25uZWN0ZWQodG8pIHsNCgkJCWlmICh0bykgew0KCQkJCXRoaXMuZ2V0SGVpZ2h0bWFwKCk7DQoJCQl9DQoJCX0sDQoJCWhlaWdodG1hcEZpbGUodG8pIHsNCgkJCWlmICh0bykgew0KCQkJCXRoaXMuZ2V0SGVpZ2h0bWFwKHRvKTsNCgkJCX0NCgkJfSwNCgkJbGFuZ3VhZ2UoKSB7DQoJCQlkcmF3TGVnZW5kKHRoaXMuJHJlZnMubGVnZW5kLCBtYXhWaXN1YWxpemF0aW9uWiwgdGhpcy5jb2xvclNjaGVtZSk7DQoJCX0NCgl9DQp9DQo="},{"version":3,"sources":["HeightmapPanel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HeightmapPanel.vue","sourceRoot":"src/components/panels","sourcesContent":["<style scoped>\r\n.heightmap-container {\r\n\tbackground-color: #000;\r\n\tcolor: #FFF;\r\n\tborder-radius: 8px;\r\n\tdisplay: flex;\r\n}\r\n\r\nh1 {\r\n\twidth: 100%;\r\n\talign-self: center;\r\n}\r\n\r\n.canvas-container {\r\n\tposition: relative;\r\n\theight: 100%;\r\n\twidth: 100%;\r\n\toverflow: hidden;\r\n}\r\n\r\n.canvas-container > :first-child {\r\n\tborder-radius: 8px 0 0 8px;\r\n}\r\n\r\n.canvas-container > :last-child {\r\n\tborder-radius: 0 8px 8px 0;\r\n}\r\n\r\n.canvas-container > canvas {\r\n\tposition: absolute;\r\n}\r\n\r\n.no-cursor {\r\n\tpointer-events: none;\r\n}\r\n</style>\r\n\r\n<template>\r\n\t<v-card class=\"card\">\r\n\t\t<v-card-text class=\"py-1\">\r\n\t\t\t<v-row>\r\n\t\t\t\t<!-- TODO: Add CSV list here -->\r\n\r\n\t\t\t\t<v-col :class=\"{ 'pa-1': $vuetify.breakpoint.xs }\">\r\n\t\t\t\t\t<div ref=\"container\" class=\"heightmap-container\" v-resize=\"resize\">\r\n\t\t\t\t\t\t<h1 v-show=\"!ready\" class=\"text-center\">\r\n\t\t\t\t\t\t\t{{ loading ? $t('generic.loading') : (errorMessage ? errorMessage : $t('panel.heightmap.notAvailable')) }}\r\n\t\t\t\t\t\t</h1>\r\n\r\n\t\t\t\t\t\t<div v-show=\"ready\" class=\"canvas-container\">\r\n\t\t\t\t\t\t\t<canvas ref=\"canvas\" @mousemove=\"canvasMouseMove\"></canvas>\r\n\t\t\t\t\t\t\t<canvas ref=\"legend\" class=\"legend\" width=\"80\"></canvas>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</v-col>\r\n\r\n\t\t\t\t<v-col cols=\"12\" md=\"auto\" class=\"d-flex\">\r\n\t\t\t\t\t<div class=\"d-flex flex-column flex-grow-1 justify-space-between\">\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t{{ $t('panel.heightmap.numPoints', [$display(numPoints, 0)]) }}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span v-if=\"radius > 0\">\r\n\t\t\t\t\t\t\t{{ $t('panel.heightmap.radius', [$display(radius, 0, 'mm')]) }}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t{{ $t('panel.heightmap.area', [$display(area / 100, 1, 'cmÂ²')]) }}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t{{ $t('panel.heightmap.maxDeviations', [$display(minDiff, 3), $display(maxDiff, 3, 'mm')]) }}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t{{ $t('panel.heightmap.meanError', [$display(meanError, 3, 'mm')]) }}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t{{ $t('panel.heightmap.rmsError', [$display(rmsError, 3, 'mm')]) }}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<div class=\"d-flex flex-column mt-1\">\r\n\t\t\t\t\t\t\t{{ $t('panel.heightmap.colorScheme') }}\r\n\t\t\t\t\t\t\t<v-btn-toggle v-model=\"colorScheme\" class=\"mt-1\">\r\n\t\t\t\t\t\t\t\t<v-btn value=\"terrain\" class=\"flex-grow-1\">{{ $t('panel.heightmap.terrain') }}</v-btn>\r\n\t\t\t\t\t\t\t\t<v-btn value=\"heat\" class=\"flex-grow-1\">{{ $t('panel.heightmap.heat') }}</v-btn>\r\n\t\t\t\t\t\t\t</v-btn-toggle>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<v-btn @click=\"topView\" :disabled=\"!ready\" class=\"ml-0 my-3\" >\r\n\t\t\t\t\t\t\t<v-icon small class=\"mr-1\">mdi-format-vertical-align-bottom</v-icon> {{ $t('panel.heightmap.topView') }}\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t<v-btn class=\"ml-0\" :disabled=\"!isConnected\" :loading=\"loading\" @click=\"getHeightmap()\">\r\n\t\t\t\t\t\t\t<v-icon class=\"mr-1\">mdi-refresh</v-icon> {{ $t('panel.heightmap.reload') }}\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</v-col>\r\n\t\t\t</v-row>\r\n\r\n\t\t\t<v-tooltip top absolute v-model=\"tooltip.shown\" :position-x=\"tooltip.x\" :position-y=\"tooltip.y\">\r\n\t\t\t\t<span class=\"no-cursor\">\r\n\t\t\t\t\tX: {{ $display(tooltip.coord.x, 1, 'mm') }} <br>\r\n\t\t\t\t\tY: {{ $display(tooltip.coord.y, 1, 'mm') }} <br>\r\n\t\t\t\t\tZ: {{ $display(tooltip.coord.z, 3, 'mm') }}\r\n\t\t\t\t</span>\r\n\t\t\t</v-tooltip>\r\n\t\t</v-card-text>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\n'use strict'\r\n\r\nimport { mapState, mapGetters, mapActions } from 'vuex'\r\n\r\nimport { Scene, PerspectiveCamera, WebGLRenderer, Raycaster, Mesh, MeshBasicMaterial, Vector2, Vector3, VertexColors, DoubleSide, ArrowHelper, GridHelper } from 'three'\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\r\n\r\nimport { getModifiedFiles } from '../../store/machine'\r\nimport { drawLegend, setFaceColors, generateIndicators, generateMeshGeometry } from '../../utils/3d.js'\r\nimport CSV from '../../utils/csv.js'\r\nimport Path from '../../utils/path.js'\r\n\r\nconst scaleZ = 0.5, maxVisualizationZ = 0.25\r\nconst indicatorColor = 0xFFFFFF, indicatorOpacity = 0.4, indicatorOpacityHighlighted = 1.0\r\n\r\nexport default {\r\n\tbeforeCreate() {\r\n\t\tthis.three = {\t\t\t\t\t\t// non-reactive data\r\n\t\t\tscene: null,\r\n\t\t\tcamera: null,\r\n\t\t\trenderer: null,\r\n\t\t\torbitControls: null,\r\n\t\t\traycaster: null,\r\n\r\n\t\t\thasHelpers: false,\r\n\t\t\tmeshGeometry: null,\r\n\t\t\tmeshPlane: null,\r\n\t\t\tmeshIndicators: null,\r\n\t\t\tlastIntersection: null\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(['isConnected']),\r\n\t\t...mapState('machine/model', {\r\n\t\t\theightmapFile: state => state.move.compensation.file,\r\n\t\t\tsystemDirectory: state => state.directories.system,\r\n\t\t}),\r\n\t\t...mapState('settings', ['language'])\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisActive: true,\r\n\t\t\tready: false,\r\n\t\t\tloading: false,\r\n\t\t\terrorMessage: null,\r\n\r\n\t\t\tcolorScheme: 'terrain',\r\n\t\t\ttooltip: {\r\n\t\t\t\tcoord: {\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\ty: 0,\r\n\t\t\t\t\tz: 0\r\n\t\t\t\t},\r\n\t\t\t\tx: undefined,\r\n\t\t\t\ty: undefined,\r\n\t\t\t\tshown: false\r\n\t\t\t},\r\n\t\t\tnumPoints: undefined,\t\t\t// points excluding NaN\r\n\t\t\tarea: undefined,\r\n\t\t\tradius: undefined,\r\n\t\t\tminDiff: undefined,\r\n\t\t\tmaxDiff: undefined,\r\n\t\t\tmeanError: undefined,\r\n\t\t\trmsError: undefined,\r\n\r\n\t\t\tunsubscribe: undefined\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t...mapActions('machine', ['download']),\r\n\t\tinit() {\r\n\t\t\t// Perform initial resize\r\n\t\t\tconst size = this.resize();\r\n\r\n\t\t\t// Create THREE instances\r\n\t\t\tthis.three.scene = new Scene();\r\n\t\t\tthis.three.camera = new PerspectiveCamera(45, size.width / size.height, 0.1, 1000);\r\n\t\t\tthis.three.camera.position.set(1, 1, 1);\r\n\t\t\tthis.three.camera.up = new Vector3(0, 0, 1);\r\n\t\t\tthis.three.renderer = new WebGLRenderer({ canvas: this.$refs.canvas });\r\n\t\t\tthis.three.renderer.setSize(size.width, size.height);\r\n\t\t\tthis.three.orbitControls = new OrbitControls(this.three.camera, this.three.renderer.domElement);\r\n\t\t\tthis.three.orbitControls.enableKeys = false;\r\n\t\t\tthis.three.raycaster = new Raycaster();\r\n\r\n\t\t\t// Register this instance in order to deal with size changes\r\n\t\t\tif (this.isConnected) {\r\n\t\t\t\tthis.getHeightmap();\r\n\t\t\t}\r\n\t\t},\r\n\t\tresize() {\r\n\t\t\tif (!this.isActive) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Resize canvas elements\r\n\t\t\tconst width = Math.max(this.$refs.container.offsetWidth - 80, 0);\r\n\t\t\tlet height;\r\n\t\t\tswitch (this.$vuetify.breakpoint.name) {\r\n\t\t\t\tcase 'xs':\r\n\t\t\t\t\theight = width;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'sm':\r\n\t\t\t\t\theight = width * 3 / 4;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'xl':\r\n\t\t\t\t\theight = width * 10 / 16;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\theight = width * 9 / 16;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tthis.$refs.container.style.height = `${height}px`;\r\n\t\t\tthis.$refs.legend.style.left = `${width}px`;\r\n\t\t\tthis.$refs.legend.height = height;\r\n\t\t\tthis.$refs.canvas.width = width;\r\n\t\t\tthis.$refs.canvas.height = height;\r\n\r\n\t\t\t// Resize the 3D height map\r\n\t\t\tif (this.three.renderer) {\r\n\t\t\t\tthis.three.camera.aspect = width / height;\r\n\t\t\t\tthis.three.camera.updateProjectionMatrix();\r\n\t\t\t\tthis.three.renderer.setSize(width, height);\r\n\t\t\t}\r\n\r\n\t\t\t// Redraw the legend and return the canvas size\r\n\t\t\tdrawLegend(this.$refs.legend, maxVisualizationZ, this.colorScheme);\r\n\t\t\treturn { width, height };\r\n\t\t},\r\n\t\tshowCSV(csvData) {\r\n\t\t\t// Load the CSV. The first line is a comment that can be removed\r\n\t\t\tconst csv = new CSV(csvData.substring(csvData.indexOf(\"\\n\") + 1));\r\n\t\t\tlet radius = parseFloat(csv.get('radius'));\r\n\t\t\tif (radius <= 0) { radius = undefined; }\r\n\t\t\tconst xMin = parseFloat(csv.get('xmin'));\r\n\t\t\tconst yMin = parseFloat(csv.get('ymin'));\r\n\t\t\tlet xSpacing = parseFloat(csv.get('xspacing'));\r\n\t\t\tif (isNaN(xSpacing)) { xSpacing = parseFloat(csv.get('spacing')); }\r\n\t\t\tlet ySpacing = parseFloat(csv.get('yspacing'));\r\n\t\t\tif (isNaN(ySpacing)) { ySpacing = parseFloat(csv.get('spacing')); }\r\n\r\n\t\t\t// Convert each point to a vector\r\n\t\t\tconst points = [];\r\n\t\t\tfor (let y = 1; y < csv.content.length; y++) {\r\n\t\t\t\tfor (let x = 0; x < csv.content[y].length; x++) {\r\n\t\t\t\t\tconst value = csv.content[y][x].trim();\r\n\t\t\t\t\tpoints.push([xMin + x * xSpacing, yMin + (y - 1) * ySpacing, (value === \"0\") ? NaN : parseFloat(value)]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Display height map\r\n\t\t\tthis.showHeightmap(points, radius);\r\n\t\t},\r\n\t\tshowHeightmap(points, probeRadius) {\r\n\t\t\t// Clean up first\r\n\t\t\tif (this.three.meshGeometry) {\r\n\t\t\t\tthis.three.scene.remove(this.three.meshPlane);\r\n\t\t\t\tthis.three.meshIndicators.forEach(function(indicator) {\r\n\t\t\t\t\tthis.remove(indicator);\r\n\t\t\t\t}, this.three.scene);\r\n\r\n\t\t\t\tthis.three.meshGeometry = null;\r\n\t\t\t\tthis.three.meshPlane = null;\r\n\t\t\t\tthis.three.meshIndicators = null;\r\n\t\t\t\tthis.three.lastIntersection = null;\r\n\t\t\t}\r\n\r\n\t\t\t// Generate stats\r\n\t\t\tlet xMin, xMax, yMin, yMax;\r\n\r\n\t\t\tthis.radius = probeRadius;\r\n\t\t\tthis.numPoints = 0;\r\n\t\t\tthis.minDiff = undefined;\r\n\t\t\tthis.maxDiff = undefined;\r\n\t\t\tthis.meanError = 0;\r\n\t\t\tthis.rmsError = 0;\r\n\r\n\t\t\tfor (let i = 0; i < points.length; i++) {\r\n\t\t\t\tconst z = points[i][2];\r\n\t\t\t\tif (!isNaN(z)) {\r\n\t\t\t\t\tconst x = points[i][0];\r\n\t\t\t\t\tconst y = points[i][1];\r\n\t\t\t\t\tif (xMin === undefined || xMin > x) { xMin = x; }\r\n\t\t\t\t\tif (xMax === undefined || xMax < x) { xMax = x; }\r\n\t\t\t\t\tif (yMin === undefined || yMin > y) { yMin = y; }\r\n\t\t\t\t\tif (yMax === undefined || yMax < y) { yMax = y; }\r\n\r\n\t\t\t\t\tthis.numPoints++;\r\n\t\t\t\t\tthis.meanError += z;\r\n\t\t\t\t\tthis.rmsError += z * z;\r\n\t\t\t\t\tif (this.minDiff === undefined || this.minDiff > z) { this.minDiff = z; }\r\n\t\t\t\t\tif (this.maxDiff === undefined || this.maxDiff < z) { this.maxDiff = z; }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.area = probeRadius ? (probeRadius * probeRadius * Math.PI) : Math.abs((xMax - xMin) * (yMax - yMin));\r\n\t\t\tthis.rmsError = Math.sqrt(((this.rmsError * this.numPoints) - (this.meanError * this.meanError))) / this.numPoints;\r\n\t\t\tthis.meanError = this.meanError / this.numPoints;\r\n\r\n\t\t\t// Generate mesh geometry and apply face colors\r\n\t\t\tthis.three.meshGeometry = generateMeshGeometry(points, xMin, xMax, yMin, yMax, scaleZ);\r\n\t\t\tsetFaceColors(this.three.meshGeometry, scaleZ, this.colorScheme, maxVisualizationZ);\r\n\r\n\t\t\t// Make 3D mesh and add it\r\n\t\t\tconst material = new MeshBasicMaterial({ vertexColors: VertexColors, side: DoubleSide });\r\n\t\t\tthis.three.meshPlane = new Mesh(this.three.meshGeometry, material);\r\n\t\t\tthis.three.scene.add(this.three.meshPlane);\r\n\r\n\t\t\t// Make indicators and add them\r\n\t\t\tthis.three.meshIndicators = generateIndicators(this.three.meshGeometry, this.numPoints, scaleZ, indicatorColor, indicatorOpacity);\r\n\t\t\tthis.three.meshIndicators.forEach(function(indicator) {\r\n\t\t\t\tthis.add(indicator);\r\n\t\t\t}, this.three.scene);\r\n\r\n\t\t\tif (!this.three.hasHelpers) {\r\n\t\t\t\t// Make axis arrows for XYZ\r\n\t\t\t\tthis.three.scene.add(new ArrowHelper(new Vector3(1, 0, 0), new Vector3(-0.6, -0.6, 0), 0.5, 0xFF0000));\r\n\t\t\t\tthis.three.scene.add(new ArrowHelper(new Vector3(0, 1, 0), new Vector3(-0.6, -0.6, 0), 0.5, 0x00FF00));\r\n\t\t\t\tthis.three.scene.add(new ArrowHelper(new Vector3(0, 0, 1), new Vector3(-0.6, -0.6, 0), 0.5, 0x0000FF));\r\n\r\n\t\t\t\t// Make grid on XY plane\r\n\t\t\t\tconst grid = new GridHelper(1.1, 15);\r\n\t\t\t\tgrid.rotation.x = -Math.PI / 2;\r\n\t\t\t\tthis.three.scene.add(grid);\r\n\r\n\t\t\t\t// Don't add these helpers again\r\n\t\t\t\tthis.three.hasHelpers = true;\r\n\t\t\t}\r\n\r\n\t\t\t// Render scene\r\n\t\t\tthis.ready = true;\r\n\t\t\tthis.render();\r\n\r\n\t\t\t// Resize it again when the values have been changed\r\n\t\t\tthis.$nextTick(this.resize);\r\n\t\t},\r\n\t\trender() {\r\n\t\t\tif (this.three.renderer) {\r\n\t\t\t\trequestAnimationFrame(this.render);\r\n\t\t\t\tthis.three.renderer.render(this.three.scene, this.three.camera);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcanvasMouseMove(e) {\r\n\t\t\tif (!e.clientX || !this.three.meshGeometry) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Try to get the Z value below the cursor\r\n\t\t\t// For that we need normalized X+Y coordinates between -1.0 and 1.0\r\n\t\t\tconst rect = e.target.getBoundingClientRect();\r\n\t\t\tconst mouse = new Vector2();\r\n\t\t\tmouse.x = (e.clientX - rect.left) / e.target.clientWidth * 2 - 1;\r\n\t\t\tmouse.y = -(e.clientY - rect.top) / e.target.clientHeight * 2 + 1;\r\n\r\n\t\t\t// Is the cursor on a point indicator?\r\n\t\t\tthis.three.raycaster.setFromCamera(mouse, this.three.camera);\r\n\t\t\tconst intersection = this.three.raycaster.intersectObjects(this.three.meshIndicators);\r\n\t\t\tif (this.three.lastIntersection && (intersection.length === 0 || intersection[0] !== this.three.lastIntersection)) {\r\n\t\t\t\tthis.three.lastIntersection.object.material.opacity = indicatorOpacity;\r\n\t\t\t\tthis.three.lastIntersection = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tlet intersectionPoint;\r\n\t\t\tif (intersection.length > 0) {\r\n\t\t\t\tif (intersection[0] !== this.three.lastIntersection) {\r\n\t\t\t\t\tintersection[0].object.material.opacity = indicatorOpacityHighlighted;\r\n\t\t\t\t\tthis.three.lastIntersection = intersection[0];\r\n\t\t\t\t}\r\n\t\t\t\tintersectionPoint = intersection[0].object.coords;\r\n\t\t\t}\r\n\r\n\t\t\t// Show or hide the tooltip\r\n\t\t\tif (intersectionPoint) {\r\n\t\t\t\tthis.tooltip.coord.x = intersectionPoint.x;\r\n\t\t\t\tthis.tooltip.coord.y = intersectionPoint.y;\r\n\t\t\t\tthis.tooltip.coord.z = intersectionPoint.z;\r\n\t\t\t\tthis.tooltip.x = e.clientX;\r\n\t\t\t\tthis.tooltip.y = e.clientY;\r\n\t\t\t\tthis.tooltip.shown = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.tooltip.shown = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\ttopView() {\r\n\t\t\tthis.three.camera.position.set(0, 0, 1.5);\r\n\t\t\tthis.three.camera.rotation.set(0, 0, 0);\r\n\t\t\tthis.three.camera.updateProjectionMatrix();\r\n\t\t},\r\n\r\n\t\tasync getHeightmap(filename) {\r\n\t\t\tif (this.loading) {\r\n\t\t\t\t// Don't attempt to load more than one file at once...\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!filename) {\r\n\t\t\t\tfilename = this.heightmapFile;\r\n\t\t\t\tif (!filename) {\r\n\t\t\t\t\tfilename = Path.combine(this.systemDirectory, Path.heightmapFile);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.ready = false;\r\n\t\t\tthis.loading = true;\r\n\t\t\ttry {\r\n\t\t\t\tconst heightmap = await this.download({ filename, type: 'text', showProgress: false, showSuccess: false, showError: false });\r\n\t\t\t\tthis.showCSV(heightmap);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.warn(e);\r\n\t\t\t\tthis.errorMessage = e.message;\r\n\t\t\t}\r\n\t\t\tthis.loading = false;\r\n\t\t},\r\n\r\n\t\ttestMesh() {\r\n\t\t\tconst csvData = 'RepRapFirmware height map file v1\\nxmin,xmax,ymin,ymax,radius,spacing,xnum,ynum\\n-140.00,140.10,-140.00,140.10,150.00,20.00,15,15\\n0,0,0,0,0,-0.139,-0.188,-0.139,-0.202,-0.224,0,0,0,0,0\\n0,0,0,-0.058,-0.066,-0.109,-0.141,-0.129,-0.186,-0.198,-0.191,-0.176,0,0,0\\n0,0,0.013,-0.008,-0.053,-0.071,-0.087,-0.113,-0.162,-0.190,-0.199,-0.267,-0.237,0,0\\n0,0.124,0.076,0.025,-0.026,-0.054,-0.078,-0.137,-0.127,-0.165,-0.201,-0.189,-0.227,-0.226,0\\n0,0.198,0.120,0.047,0.089,-0.074,-0.097,-0.153,-0.188,-0.477,-0.190,-0.199,-0.237,-0.211,0\\n0.312,0.229,0.198,0.098,0.097,0.004,-0.089,-0.516,-0.150,-0.209,-0.197,-0.183,-0.216,-0.296,-0.250\\n0.287,0.263,0.292,0.100,0.190,0.015,-0.102,-0.039,-0.125,-0.149,-0.137,-0.198,-0.188,-0.220,-0.192\\n0.378,0.289,0.328,0.172,0.133,0.078,-0.086,0.134,-0.100,-0.150,-0.176,-0.234,-0.187,-0.199,-0.221\\n0.360,0.291,0.260,0.185,0.111,0.108,0.024,0.073,-0.024,-0.116,-0.187,-0.252,-0.201,-0.215,-0.187\\n0.447,0.397,0.336,0.276,0.180,0.164,0.073,-0.050,-0.049,-0.109,-0.151,-0.172,-0.211,-0.175,-0.161\\n0,0.337,0.289,0.227,0.179,0.127,0.086,0.034,-0.039,-0.060,-0.113,-0.108,-0.171,-0.153,0\\n0,0.478,0.397,0.374,0.270,0.141,0.085,0.074,0.037,-0.048,-0.080,-0.187,-0.126,-0.175,0\\n0,0,0.373,0.364,0.265,0.161,0.139,0.212,0.040,0.046,-0.008,-0.149,-0.115,0,0\\n0,0,0,0.346,0.295,0.273,0.148,0.136,0.084,0.024,-0.055,-0.078,0,0,0\\n0,0,0,0,0,0.240,0.178,0.084,0.090,0.004,0,0,0,0,0';\r\n\t\t\tthis.showCSV(csvData);\r\n\t\t},\r\n\t\ttestBedCompensation(numPoints) {\r\n\t\t\tlet testPoints;\r\n\t\t\tswitch (numPoints) {\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\ttestPoints = [[15.0, 15.0, 0.123], [15.0, 195.0, -0.243], [215.0, 105.0, 0.034]];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\ttestPoints = [[15.0, 15.0, 0.015], [15.0, 185.0, -0.193], [175.0, 185.0, 0.156], [175.0, 15.0, 0.105]];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 5:\r\n\t\t\t\t\ttestPoints = [[15.0, 15.0, 0.007], [15.0, 185.0, -0.121], [175.0, 185.0, -0.019], [175.0, 15.0, 0.193], [95.0, 100.0, 0.05]];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthrow new Error(\"Bad number of probe points, only one of 3/4/5 is supported\");\r\n\t\t\t}\r\n\t\t\tthis.showHeightmap(testPoints);\r\n\t\t}\r\n\t},\r\n\tactivated() {\r\n\t\tthis.isActive = true;\r\n\t\tthis.resize();\r\n\t},\r\n\tdeactivate() {\r\n\t\tthis.isActive = false;\r\n\t},\r\n\tmounted() {\r\n\t\tconst getHeightmap = this.getHeightmap;\r\n\t\tthis.unsubscribe = this.$store.subscribeAction(function(action, state) {\r\n\t\t\tif (getModifiedFiles(action, state).indexOf(Path.heightmapFile) !== -1 ||\r\n\t\t\t\taction.type.endsWith('onCodeCompleted') && action.payload.reply.indexOf(Path.heightmapFile) !== -1) {\r\n\t\t\t\tgetHeightmap();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// FIXME give the grid some time to resize everything...\r\n\t\tsetTimeout(this.init, 100);\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\tthis.unsubscribe();\r\n\r\n\t\tif (this.three.renderer) {\r\n\t\t\tthis.three.renderer.forceContextLoss();\r\n\t\t\tthis.three.renderer = null;\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tcolorScheme(to) {\r\n\t\t\tif (this.three.meshGeometry) {\r\n\t\t\t\tsetFaceColors(this.three.meshGeometry, scaleZ, to, maxVisualizationZ);\r\n\t\t\t}\r\n\t\t\tdrawLegend(this.$refs.legend, maxVisualizationZ, to);\r\n\t\t},\r\n\t\tisConnected(to) {\r\n\t\t\tif (to) {\r\n\t\t\t\tthis.getHeightmap();\r\n\t\t\t}\r\n\t\t},\r\n\t\theightmapFile(to) {\r\n\t\t\tif (to) {\r\n\t\t\t\tthis.getHeightmap(to);\r\n\t\t\t}\r\n\t\t},\r\n\t\tlanguage() {\r\n\t\t\tdrawLegend(this.$refs.legend, maxVisualizationZ, this.colorScheme);\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n"]}]}