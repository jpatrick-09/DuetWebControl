{"remainingRequest":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\lists\\EventList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\lists\\EventList.vue","mtime":1592248188540},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQondXNlIHN0cmljdCcNCg0KaW1wb3J0IGkxOG4gZnJvbSAnLi4vLi4vaTE4bicNCg0KaW1wb3J0IHNhdmVBcyBmcm9tICdmaWxlLXNhdmVyJw0KaW1wb3J0IHsgbWFwU3RhdGUsIG1hcE11dGF0aW9ucyB9IGZyb20gJ3Z1ZXgnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCgljb21wdXRlZDogew0KCQkuLi5tYXBTdGF0ZSgnbWFjaGluZScsIFsnZXZlbnRzJ10pLA0KCQkuLi5tYXBTdGF0ZSgnbWFjaGluZS9jYWNoZScsIFsnc29ydGluZyddKSwNCgkJLi4ubWFwU3RhdGUoJ3NldHRpbmdzJywgWydkYXJrVGhlbWUnXSksDQoJCWhlYWRlcnMoKSB7DQoJCQlyZXR1cm4gWw0KCQkJCXsNCgkJCQkJdGV4dDogaTE4bi50KCdsaXN0LmV2ZW50TG9nLmRhdGUnKSwNCgkJCQkJdmFsdWU6ICdkYXRlJywNCgkJCQkJd2lkdGg6ICcxNSUnDQoJCQkJfSwNCgkJCQl7DQoJCQkJCXRleHQ6IGkxOG4udCgnbGlzdC5ldmVudExvZy5tZXNzYWdlJyksDQoJCQkJCXZhbHVlOiAnbWVzc2FnZScsDQoJCQkJCXNvcnRhYmxlOiBmYWxzZSwNCgkJCQkJd2lkdGg6ICc3NCUnDQoJCQkJfSwNCgkJCQl7DQoJCQkJCXRleHQ6ICcnLA0KCQkJCQl2YWx1ZTogJ2J0bicsDQoJCQkJCXNvcnRhYmxlOiBmYWxzZSwNCgkJCQkJd2lkdGg6ICcxJScNCgkJCQl9DQoJCQldDQoJCX0sDQoJCXNvcnRCeTogew0KCQkJZ2V0KCkgeyByZXR1cm4gdGhpcy5zb3J0aW5nLmV2ZW50cy5jb2x1bW47IH0sDQoJCQlzZXQodmFsdWUpIHsNCgkJCQl0aGlzLnNldFNvcnRpbmcoeyB0YWJsZTogJ2V2ZW50cycsIGNvbHVtbjogdmFsdWUsIGRlc2NlbmRpbmc6IHRoaXMuc29ydERlc2MgfSk7DQoJCQl9CQkJCQ0KCQl9LA0KCQlzb3J0RGVzYzogew0KCQkJZ2V0KCkgeyByZXR1cm4gdGhpcy5zb3J0aW5nLmV2ZW50cy5kZXNjZW5kaW5nOyB9LA0KCQkJc2V0KHZhbHVlKSB7DQoJCQkJdGhpcy5zZXRTb3J0aW5nKHsgdGFibGU6ICdldmVudHMnLCBjb2x1bW46IHRoaXMuc29ydEJ5LCBkZXNjZW5kaW5nOiB2YWx1ZSB9KTsNCgkJCX0NCgkJfQ0KCX0sDQoJbWV0aG9kczogew0KCQkuLi5tYXBNdXRhdGlvbnMoJ21hY2hpbmUnLCBbJ2NsZWFyTG9nJ10pLA0KCQkuLi5tYXBNdXRhdGlvbnMoJ21hY2hpbmUvY2FjaGUnLCBbJ3NldFNvcnRpbmcnXSksDQoJCWdldEhlYWRlclRleHQ6IChoZWFkZXIpID0+IChoZWFkZXIudGV4dCBpbnN0YW5jZW9mKEZ1bmN0aW9uKSkgPyBoZWFkZXIudGV4dCgpIDogaGVhZGVyLnRleHQsDQoJCWdldENsYXNzQnlFdmVudCh0eXBlKSB7DQoJCQlpZiAodGhpcy5kYXJrVGhlbWUpIHsNCgkJCQlzd2l0Y2ggKHR5cGUpIHsNCgkJCQkJY2FzZSAnc3VjY2Vzcyc6IHJldHVybiAnZ3JlZW4gZGFya2VuLTEnOw0KCQkJCQljYXNlICd3YXJuaW5nJzogcmV0dXJuICdhbWJlciBkYXJrZW4tMSc7DQoJCQkJCWNhc2UgJ2Vycm9yJzogcmV0dXJuICdyZWQgZGFya2VuLTEnOw0KCQkJCX0NCgkJCQlyZXR1cm4gJ2JsdWUgZGFya2VuLTEnOw0KCQkJfSBlbHNlIHsNCgkJCQlzd2l0Y2ggKHR5cGUpIHsNCgkJCQkJY2FzZSAnc3VjY2Vzcyc6IHJldHVybiAnZ3JlZW4gYWNjZW50LTInOw0KCQkJCQljYXNlICd3YXJuaW5nJzogcmV0dXJuICdhbWJlciBhY2NlbnQtMSc7DQoJCQkJCWNhc2UgJ2Vycm9yJzogcmV0dXJuICdyZWQgYWNjZW50LTEnOw0KCQkJCX0NCgkJCQlyZXR1cm4gJ2xpZ2h0LWJsdWUgYWNjZW50LTEnOw0KCQkJfQ0KCQl9LA0KCQlmb3JtYXRNZXNzYWdlKG1lc3NhZ2UpIHsNCgkJCXJldHVybiBtZXNzYWdlLnJlcGxhY2UoL0Vycm9yOi9nLCAnPHN0cm9uZz5FcnJvcjo8L3N0cm9uZz4nKS5yZXBsYWNlKC9XYXJuaW5nOi9nLCAnPHN0cm9uZz5XYXJuaW5nOjwvc3Ryb25nPicpOw0KCQl9LA0KCQlkb3dubG9hZFRleHQoKSB7DQoJCQlsZXQgdGV4dENvbnRlbnQgPSAnJzsNCgkJCXRoaXMuZXZlbnRzLmZvckVhY2goZnVuY3Rpb24oZSkgew0KCQkJCWNvbnN0IHRpdGxlID0gZS50aXRsZS5yZXBsYWNlKC9cbi9nLCAnXHJcbicpOw0KCQkJCWNvbnN0IG1lc3NhZ2UgPSBlLm1lc3NhZ2UgPyBlLm1lc3NhZ2UucmVwbGFjZSgvXG4vZywgJ1xyXG4nKSA6ICcnOw0KCQkJCXRleHRDb250ZW50ICs9IGAke2UuZGF0ZS50b0xvY2FsZVN0cmluZygpfTogJHttZXNzYWdlID8gKHRpdGxlICsgIjogIiArIG1lc3NhZ2UpIDogdGl0bGV9XHJcbmA7DQoJCQl9KTsNCg0KCQkJY29uc3QgZmlsZSA9IG5ldyBGaWxlKFt0ZXh0Q29udGVudF0sICdjb25zb2xlLnR4dCcsIHsgdHlwZTogJ3RleHQvcGxhaW47Y2hhcnNldD11dGYtOCcgfSk7DQoJCQlzYXZlQXMoZmlsZSk7DQoJCX0sDQoJCWRvd25sb2FkQ1NWKCkgew0KCQkJdmFyIGNzdkNvbnRlbnQgPSAnImRhdGUiLCJ0aW1lIiwidGl0bGUiLCJtZXNzYWdlIlxyXG4nOw0KCQkJdGhpcy5ldmVudHMuZm9yRWFjaChmdW5jdGlvbihlKSB7DQoJCQkJY29uc3QgdGl0bGUgPSBlLnRpdGxlLnJlcGxhY2UoLyIvZywgJyIiJykucmVwbGFjZSgvXG4vZywgJ1xyXG4nKTsNCgkJCQljb25zdCBtZXNzYWdlID0gZS5tZXNzYWdlID8gZS5tZXNzYWdlLnJlcGxhY2UoLyIvZywgJyIiJykucmVwbGFjZSgvXG4vZywgJ1xyXG4nKSA6ICcnOw0KCQkJCWNzdkNvbnRlbnQgKz0gYCIke2UuZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoKX0iLCIke2UuZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoKX0iLCIke3RpdGxlfSIsIiR7bWVzc2FnZX0iXHJcbmA7DQoJCQl9KTsNCg0KCQkJY29uc3QgZmlsZSA9IG5ldyBGaWxlKFtjc3ZDb250ZW50XSwgJ2NvbnNvbGUuY3N2JywgeyB0eXBlOiAndGV4dC9jc3Y7Y2hhcnNldD11dGYtOCcgfSk7DQoJCQlzYXZlQXMoZmlsZSk7DQoJCX0sDQoJCXNvcnQoaXRlbXMsIHNvcnRCeSwgc29ydERlc2MpIHsNCgkJCS8vIEZJWE1FIFRoaXMgbWV0aG9kIHNob3VsZCBub3QgYmUgbmVlZGVkIGJ1dCBpdCBhcHBlYXJzIGxpa2UgVnVldGlmeSdzIGRlZmF1bHQNCgkJCS8vIHNvcnQgYWxnb3JpdGhtIG9ubHkgdGFrZXMgaW50byBhY2NvdW50IHRpbWVzIGJ1dCBub3QgZGF0ZXMNCg0KCQkJLy8gU29ydCBieSBkYXRldGltZSAtIGV2ZXJ5dGhpbmcgZWxzZSBpcyB1bnN1cHBvcnRlZA0KCQkJaXRlbXMuc29ydChmdW5jdGlvbihhLCBiKSB7DQoJCQkJaWYgKGEuZGF0ZSA9PT0gYi5kYXRlKSB7DQoJCQkJCXJldHVybiAwOw0KCQkJCX0NCgkJCQlpZiAoYS5kYXRlID09PSBudWxsIHx8IGEuZGF0ZSA9PT0gdW5kZWZpbmVkKSB7DQoJCQkJCXJldHVybiAtMTsNCgkJCQl9DQoJCQkJaWYgKGIuZGF0ZSA9PT0gbnVsbCB8fCBiLmRhdGUgPT09IHVuZGVmaW5lZCkgew0KCQkJCQlyZXR1cm4gMTsNCgkJCQl9DQoJCQkJcmV0dXJuIGEuZGF0ZSAtIGIuZGF0ZTsNCgkJCX0pOw0KDQoJCQkvLyBEZWFsIHdpdGggZGVzY2VuZGluZyBvcmRlcg0KCQkJaWYgKHNvcnREZXNjWzBdKSB7DQoJCQkJaXRlbXMucmV2ZXJzZSgpOw0KCQkJfQ0KCQkJcmV0dXJuIGl0ZW1zOw0KCQl9DQoJfQ0KfQ0K"},{"version":3,"sources":["EventList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4EA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EventList.vue","sourceRoot":"src/components/lists","sourcesContent":["<style>\r\ntd.log-cell {\r\n\tpadding-top: 8px !important;\r\n\tpadding-bottom: 8px !important;\r\n\theight: auto !important;\r\n}\r\n\r\ntd.title-cell {\r\n\tvertical-align: top;\r\n}\r\n</style>\r\n\r\n<style scoped>\r\n.message {\r\n\twhite-space: pre-wrap;\r\n}\r\n\r\nth:last-child {\r\n\tpadding-right: 0 !important;\r\n\twidth: 1%;\r\n}\r\n</style>\r\n\r\n<template>\r\n\t<div class=\"component\">\r\n\t\t<v-data-table\r\n\t\t\t:headers=\"headers\" :items=\"events\" item-key=\"date\"\r\n\t\t\tdisable-pagination hide-default-footer :mobile-breakpoint=\"0\"\r\n\t\t\t:custom-sort=\"sort\" :sort-by.sync=\"sortBy\" :sort-desc.sync=\"sortDesc\" must-sort\r\n\t\t\tclass=\"elevation-3\" :class=\"{ 'empty-table-fix' : !events.length }\">\r\n\r\n\t\t\t<template #no-data>\r\n\t\t\t\t<v-alert :value=\"true\" type=\"info\" class=\"text-left ma-0\">\r\n\t\t\t\t\t{{ $t('list.eventLog.noEvents') }}\r\n\t\t\t\t</v-alert>\r\n\t\t\t</template>\r\n\r\n\t\t\t<template #header.btn>\r\n\t\t\t\t<v-menu offset-y>\r\n\t\t\t\t\t<template #activator=\"{ on }\">\r\n\t\t\t\t\t\t<v-btn v-on=\"on\" icon>\r\n\t\t\t\t\t\t\t<v-icon small>mdi-menu</v-icon>\r\n\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t</template>\r\n\r\n\t\t\t\t\t<v-list>\r\n\t\t\t\t\t\t<v-list-item @click=\"clearLog\">\r\n\t\t\t\t\t\t\t<v-icon class=\"mr-1\">mdi-notification-clear-all</v-icon> {{ $t('list.eventLog.clear') }}\r\n\t\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t\t<v-list-item :disabled=\"!events.length\" @click=\"downloadText\">\r\n\t\t\t\t\t\t\t<v-icon class=\"mr-1\">mdi-file-download</v-icon> {{ $t('list.eventLog.downloadText') }}\r\n\t\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t\t<v-list-item :disabled=\"!events.length\" @click=\"downloadCSV\">\r\n\t\t\t\t\t\t\t<v-icon class=\"mr-1\">mdi-cloud-download</v-icon> {{ $t('list.eventLog.downloadCSV') }}\r\n\t\t\t\t\t\t</v-list-item>\r\n\t\t\t\t\t</v-list>\r\n\t\t\t\t</v-menu>\r\n\t\t\t</template>\r\n\r\n\t\t\t<template #item=\"{ item }\">\r\n\t\t\t\t<tr :class=\"getClassByEvent(item.type)\">\r\n\t\t\t\t\t<td class=\"log-cell title-cell\">\r\n\t\t\t\t\t\t{{ item.date.toLocaleString() }}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td class=\"log-cell content-cell\" colspan=\"2\">\r\n\t\t\t\t\t\t<strong>{{ item.title }}</strong>\r\n\t\t\t\t\t\t<br v-if=\"item.title && item.message\">\r\n\t\t\t\t\t\t<span v-if=\"item.message\" class=\"message\" v-html=\"formatMessage(item.message)\"></span>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t</template>\r\n\t\t</v-data-table>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n'use strict'\r\n\r\nimport i18n from '../../i18n'\r\n\r\nimport saveAs from 'file-saver'\r\nimport { mapState, mapMutations } from 'vuex'\r\n\r\nexport default {\r\n\tcomputed: {\r\n\t\t...mapState('machine', ['events']),\r\n\t\t...mapState('machine/cache', ['sorting']),\r\n\t\t...mapState('settings', ['darkTheme']),\r\n\t\theaders() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: i18n.t('list.eventLog.date'),\r\n\t\t\t\t\tvalue: 'date',\r\n\t\t\t\t\twidth: '15%'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: i18n.t('list.eventLog.message'),\r\n\t\t\t\t\tvalue: 'message',\r\n\t\t\t\t\tsortable: false,\r\n\t\t\t\t\twidth: '74%'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: '',\r\n\t\t\t\t\tvalue: 'btn',\r\n\t\t\t\t\tsortable: false,\r\n\t\t\t\t\twidth: '1%'\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t},\r\n\t\tsortBy: {\r\n\t\t\tget() { return this.sorting.events.column; },\r\n\t\t\tset(value) {\r\n\t\t\t\tthis.setSorting({ table: 'events', column: value, descending: this.sortDesc });\r\n\t\t\t}\t\t\t\t\r\n\t\t},\r\n\t\tsortDesc: {\r\n\t\t\tget() { return this.sorting.events.descending; },\r\n\t\t\tset(value) {\r\n\t\t\t\tthis.setSorting({ table: 'events', column: this.sortBy, descending: value });\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t...mapMutations('machine', ['clearLog']),\r\n\t\t...mapMutations('machine/cache', ['setSorting']),\r\n\t\tgetHeaderText: (header) => (header.text instanceof(Function)) ? header.text() : header.text,\r\n\t\tgetClassByEvent(type) {\r\n\t\t\tif (this.darkTheme) {\r\n\t\t\t\tswitch (type) {\r\n\t\t\t\t\tcase 'success': return 'green darken-1';\r\n\t\t\t\t\tcase 'warning': return 'amber darken-1';\r\n\t\t\t\t\tcase 'error': return 'red darken-1';\r\n\t\t\t\t}\r\n\t\t\t\treturn 'blue darken-1';\r\n\t\t\t} else {\r\n\t\t\t\tswitch (type) {\r\n\t\t\t\t\tcase 'success': return 'green accent-2';\r\n\t\t\t\t\tcase 'warning': return 'amber accent-1';\r\n\t\t\t\t\tcase 'error': return 'red accent-1';\r\n\t\t\t\t}\r\n\t\t\t\treturn 'light-blue accent-1';\r\n\t\t\t}\r\n\t\t},\r\n\t\tformatMessage(message) {\r\n\t\t\treturn message.replace(/Error:/g, '<strong>Error:</strong>').replace(/Warning:/g, '<strong>Warning:</strong>');\r\n\t\t},\r\n\t\tdownloadText() {\r\n\t\t\tlet textContent = '';\r\n\t\t\tthis.events.forEach(function(e) {\r\n\t\t\t\tconst title = e.title.replace(/\\n/g, '\\r\\n');\r\n\t\t\t\tconst message = e.message ? e.message.replace(/\\n/g, '\\r\\n') : '';\r\n\t\t\t\ttextContent += `${e.date.toLocaleString()}: ${message ? (title + \": \" + message) : title}\\r\\n`;\r\n\t\t\t});\r\n\r\n\t\t\tconst file = new File([textContent], 'console.txt', { type: 'text/plain;charset=utf-8' });\r\n\t\t\tsaveAs(file);\r\n\t\t},\r\n\t\tdownloadCSV() {\r\n\t\t\tvar csvContent = '\"date\",\"time\",\"title\",\"message\"\\r\\n';\r\n\t\t\tthis.events.forEach(function(e) {\r\n\t\t\t\tconst title = e.title.replace(/\"/g, '\"\"').replace(/\\n/g, '\\r\\n');\r\n\t\t\t\tconst message = e.message ? e.message.replace(/\"/g, '\"\"').replace(/\\n/g, '\\r\\n') : '';\r\n\t\t\t\tcsvContent += `\"${e.date.toLocaleDateString()}\",\"${e.date.toLocaleTimeString()}\",\"${title}\",\"${message}\"\\r\\n`;\r\n\t\t\t});\r\n\r\n\t\t\tconst file = new File([csvContent], 'console.csv', { type: 'text/csv;charset=utf-8' });\r\n\t\t\tsaveAs(file);\r\n\t\t},\r\n\t\tsort(items, sortBy, sortDesc) {\r\n\t\t\t// FIXME This method should not be needed but it appears like Vuetify's default\r\n\t\t\t// sort algorithm only takes into account times but not dates\r\n\r\n\t\t\t// Sort by datetime - everything else is unsupported\r\n\t\t\titems.sort(function(a, b) {\r\n\t\t\t\tif (a.date === b.date) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (a.date === null || a.date === undefined) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\t\t\t\tif (b.date === null || b.date === undefined) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn a.date - b.date;\r\n\t\t\t});\r\n\r\n\t\t\t// Deal with descending order\r\n\t\t\tif (sortDesc[0]) {\r\n\t\t\t\titems.reverse();\r\n\t\t\t}\r\n\t\t\treturn items;\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n"]}]}