{"remainingRequest":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\buttons\\SDCardBtn.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\buttons\\SDCardBtn.vue","mtime":1592248188508},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQondXNlIHN0cmljdCcNCg0KaW1wb3J0IHsgbWFwU3RhdGUsIG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4Jw0KDQpleHBvcnQgZGVmYXVsdCB7DQoJcHJvcHM6IHsNCgkJdmFsdWU6IHsNCgkJCXR5cGU6IE51bWJlciwNCgkJCXJlcXVpcmVkOiB0cnVlDQoJCX0NCgl9LA0KCWNvbXB1dGVkOiB7DQoJCS4uLm1hcEdldHRlcnMoWydpc0Nvbm5lY3RlZCddKSwNCgkJLi4ubWFwU3RhdGUoJ21hY2hpbmUvbW9kZWwnLCBbJ3ZvbHVtZXMnXSkNCgl9LA0KCWRhdGEoKSB7DQoJCXJldHVybiB7DQoJCQltb3VudGluZzogZmFsc2UNCgkJfQ0KCX0sDQoJbWV0aG9kczogew0KCQkuLi5tYXBBY3Rpb25zKCdtYWNoaW5lJywgWydzZW5kQ29kZSddKSwNCgkJZ2V0Vm9sdW1lTmFtZShpbmRleCkgew0KCQkJaWYgKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLnZvbHVtZXMubGVuZ3RoICYmIHRoaXMudm9sdW1lc1tpbmRleF0ubmFtZSkgew0KCQkJCXJldHVybiB0aGlzLnZvbHVtZXNbaW5kZXhdLm5hbWU7DQoJCQl9DQoJCQlyZXR1cm4gdGhpcy4kdCgnZ2VuZXJpYy5zZENhcmQnLCBbaW5kZXhdKTsNCgkJfSwNCgkJYXN5bmMgc2VsZWN0Vm9sdW1lKGluZGV4KSB7DQoJCQlpZiAoIXRoaXMuaXNDb25uZWN0ZWQpIHsNCgkJCQlyZXR1cm47DQoJCQl9DQoNCgkJCS8vIENoZWNrIGlmIHRoZSB2b2x1bWUgaXMgYWxyZWFkeSBtb3VudGVkDQoJCQljb25zdCB2b2x1bWUgPSB0aGlzLnZvbHVtZXNbaW5kZXhdOw0KCQkJaWYgKHZvbHVtZS5tb3VudGVkKSB7DQoJCQkJdGhpcy4kZW1pdCgnaW5wdXQnLCBpbmRleCk7DQoJCQkJcmV0dXJuOw0KCQkJfQ0KDQoJCQkvLyBUcnkgdG8gbW91bnQgaXQNCgkJCWxldCBzdWNjZXNzID0gdHJ1ZSwgcmVzcG9uc2U7DQoJCQl0aGlzLm1vdW50aW5nID0gdHJ1ZTsNCgkJCXRyeSB7DQoJCQkJcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNlbmRDb2RlKHsgY29kZTogYE0yMSBQJHtpbmRleH1gLCBsb2c6IGZhbHNlIH0pOw0KCQkJCXN1Y2Nlc3MgPSByZXNwb25zZS5pbmRleE9mKCdFcnJvcicpID09PSAtMTsNCgkJCX0gY2F0Y2ggKGUpIHsNCgkJCQlyZXNwb25zZSA9IGUubWVzc2FnZTsNCgkJCQlzdWNjZXNzID0gZmFsc2U7DQoJCQl9DQoJCQl0aGlzLm1vdW50aW5nID0gZmFsc2U7DQoNCgkJCS8vIERlYWwgd2l0aCB0aGUgcmVzdWx0DQoJCQlpZiAoc3VjY2Vzcykgew0KCQkJCXRoaXMuJGxvZygnc3VjY2VzcycsIHRoaXMuJHQoJ25vdGlmaWNhdGlvbi5tb3VudC5zdWNjZXNzVGl0bGUnKSwgcmVzcG9uc2UpOw0KCQkJCXRoaXMuJGVtaXQoJ2lucHV0JywgaW5kZXgpOw0KCQkJfSBlbHNlIHsNCgkJCQl0aGlzLiRsb2coJ2Vycm9yJywgdGhpcy4kdCgnbm90aWZpY2F0aW9uLm1vdW50LmVycm9yVGl0bGUnKSwgcmVzcG9uc2UpOw0KCQkJfQ0KCQl9DQoJfQ0KfQ0K"},{"version":3,"sources":["SDCardBtn.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SDCardBtn.vue","sourceRoot":"src/components/buttons","sourcesContent":["<template>\r\n\t<v-menu offset-y>\r\n\t\t<template #activator=\"{ on }\">\r\n\t\t\t<v-btn v-bind=\"$props\" v-on=\"on\" color=\"success\" :loading=\"mounting\">\r\n\t\t\t\t<v-icon class=\"mr-1\">mdi-sd</v-icon> {{ getVolumeName(value) }} <v-icon class=\"ml-1\">mdi-menu-down</v-icon>\r\n\t\t\t</v-btn>\r\n\t\t</template>\r\n\r\n\t\t<v-list ref=\"list\">\r\n\t\t\t<v-list-item v-for=\"(volume, index) in volumes\" :key=\"index\" @click=\"selectVolume(index)\">\r\n\t\t\t\t<v-icon class=\"mr-1\">{{ volume.mounted ? 'mdi-check' : 'mdi-close' }}</v-icon>\r\n\t\t\t\t{{ getVolumeName(index) }} ({{ $t(volume.mounted ? 'generic.mounted' : 'generic.notMounted') }})\r\n\t\t\t</v-list-item>\r\n\t\t</v-list>\r\n\t</v-menu>\r\n</template>\r\n\r\n<script>\r\n'use strict'\r\n\r\nimport { mapState, mapGetters, mapActions } from 'vuex'\r\n\r\nexport default {\r\n\tprops: {\r\n\t\tvalue: {\r\n\t\t\ttype: Number,\r\n\t\t\trequired: true\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(['isConnected']),\r\n\t\t...mapState('machine/model', ['volumes'])\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmounting: false\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t...mapActions('machine', ['sendCode']),\r\n\t\tgetVolumeName(index) {\r\n\t\t\tif (index >= 0 && index < this.volumes.length && this.volumes[index].name) {\r\n\t\t\t\treturn this.volumes[index].name;\r\n\t\t\t}\r\n\t\t\treturn this.$t('generic.sdCard', [index]);\r\n\t\t},\r\n\t\tasync selectVolume(index) {\r\n\t\t\tif (!this.isConnected) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Check if the volume is already mounted\r\n\t\t\tconst volume = this.volumes[index];\r\n\t\t\tif (volume.mounted) {\r\n\t\t\t\tthis.$emit('input', index);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Try to mount it\r\n\t\t\tlet success = true, response;\r\n\t\t\tthis.mounting = true;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await this.sendCode({ code: `M21 P${index}`, log: false });\r\n\t\t\t\tsuccess = response.indexOf('Error') === -1;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tresponse = e.message;\r\n\t\t\t\tsuccess = false;\r\n\t\t\t}\r\n\t\t\tthis.mounting = false;\r\n\r\n\t\t\t// Deal with the result\r\n\t\t\tif (success) {\r\n\t\t\t\tthis.$log('success', this.$t('notification.mount.successTitle'), response);\r\n\t\t\t\tthis.$emit('input', index);\r\n\t\t\t} else {\r\n\t\t\t\tthis.$log('error', this.$t('notification.mount.errorTitle'), response);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n"]}]}