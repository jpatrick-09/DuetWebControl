{"remainingRequest":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\lists\\FilamentFileList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\lists\\FilamentFileList.vue","mtime":1592248188541},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQondXNlIHN0cmljdCcNCg0KaW1wb3J0IEpTWmlwIGZyb20gJ2pzemlwJw0KaW1wb3J0IHNhdmVBcyBmcm9tICdmaWxlLXNhdmVyJw0KDQppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwR2V0dGVycywgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnDQoNCmltcG9ydCB7IERpc2Nvbm5lY3RlZEVycm9yLCBGaWxlTm90Rm91bmRFcnJvciwgT3BlcmF0aW9uQ2FuY2VsbGVkRXJyb3IgfSBmcm9tICcuLi8uLi91dGlscy9lcnJvcnMuanMnDQppbXBvcnQgUGF0aCBmcm9tICcuLi8uLi91dGlscy9wYXRoLmpzJw0KDQpleHBvcnQgZGVmYXVsdCB7DQoJY29tcHV0ZWQ6IHsNCgkJLi4ubWFwR2V0dGVycyhbJ3VpRnJvemVuJ10pLA0KCQkuLi5tYXBTdGF0ZSgnbWFjaGluZS9tb2RlbCcsIHsNCgkJCWZpbGFtZW50c0RpcmVjdG9yeTogc3RhdGUgPT4gc3RhdGUuZGlyZWN0b3JpZXMuZmlsYW1lbnRzLA0KCQkJdG9vbHM6IHN0YXRlID0+IHN0YXRlLnRvb2xzDQoJCX0pLA0KCQlpc1Jvb3REaXJlY3RvcnkoKSB7IHJldHVybiBQYXRoLmVxdWFscyh0aGlzLmRpcmVjdG9yeSwgdGhpcy5maWxhbWVudHNEaXJlY3RvcnkpOyB9LA0KCQlmaWxhbWVudFNlbGVjdGVkKCkgeyByZXR1cm4gUGF0aC5lcXVhbHModGhpcy5kaXJlY3RvcnksIHRoaXMuZmlsYW1lbnRzRGlyZWN0b3J5KSAmJiAodGhpcy5zZWxlY3Rpb24ubGVuZ3RoID09PSAxKSAmJiB0aGlzLnNlbGVjdGlvblswXS5pc0RpcmVjdG9yeTsgfQ0KCX0sDQoJZGF0YSgpIHsNCgkJcmV0dXJuIHsNCgkJCWRpcmVjdG9yeTogUGF0aC5maWxhbWVudHMsDQoJCQlzZWxlY3Rpb246IFtdLA0KCQkJbG9hZGluZzogZmFsc2UsDQoJCQlkb2luZ0ZpbGVPcGVyYXRpb246IGZhbHNlLA0KCQkJc2hvd05ld0ZpbGU6IGZhbHNlLA0KCQkJc2hvd05ld0ZpbGFtZW50OiBmYWxzZSwNCgkJCWZhYjogZmFsc2UNCgkJfQ0KCX0sDQoJbWV0aG9kczogew0KCQkuLi5tYXBBY3Rpb25zKCdtYWNoaW5lJywgWydzZW5kQ29kZScsICd1cGxvYWQnLCAnZG93bmxvYWQnLCAnZGVsZXRlJywgJ2dldEZpbGVMaXN0J10pLA0KCQlkaXJlY3RvcnlDcmVhdGlvbkZhaWxlZChlcnJvcikgew0KCQkJdGhpcy4kbWFrZU5vdGlmaWNhdGlvbignZXJyb3InLCB0aGlzLiR0KCdub3RpZmljYXRpb24ubmV3RmlsYW1lbnQuZXJyb3JUaXRsZScpLCBlcnJvci5tZXNzYWdlKTsNCgkJfSwNCgkJYXN5bmMgY3JlYXRlRmlsYW1lbnRGaWxlcyhwYXRoKSB7DQoJCQlpZiAodGhpcy5kb2luZ0ZpbGVPcGVyYXRpb24pIHsNCgkJCQlyZXR1cm47DQoJCQl9DQoNCgkJCXRoaXMuZG9pbmdGaWxlT3BlcmF0aW9uID0gdHJ1ZTsNCgkJCXRyeSB7DQoJCQkJY29uc3QgZW1wdHlGaWxlID0gbmV3IEJsb2IoKTsNCgkJCQlhd2FpdCB0aGlzLnVwbG9hZCh7IGZpbGVuYW1lOiBQYXRoLmNvbWJpbmUocGF0aCwgJ2xvYWQuZycpLCBjb250ZW50OiBlbXB0eUZpbGUsIHNob3dTdWNjZXNzOiBmYWxzZSB9KTsNCgkJCQlhd2FpdCB0aGlzLnVwbG9hZCh7IGZpbGVuYW1lOiBQYXRoLmNvbWJpbmUocGF0aCwgJ2NvbmZpZy5nJyksIGNvbnRlbnQ6IGVtcHR5RmlsZSwgc2hvd1N1Y2Nlc3M6IGZhbHNlIH0pOw0KCQkJCWF3YWl0IHRoaXMudXBsb2FkKHsgZmlsZW5hbWU6IFBhdGguY29tYmluZShwYXRoLCAndW5sb2FkLmcnKSwgY29udGVudDogZW1wdHlGaWxlLCBzaG93U3VjY2VzczogZmFsc2UgfSk7DQoJCQkJdGhpcy4kbWFrZU5vdGlmaWNhdGlvbignc3VjY2VzcycsIHRoaXMuJHQoJ25vdGlmaWNhdGlvbi5uZXdGaWxhbWVudC5zdWNjZXNzVGl0bGUnKSwgdGhpcy4kdCgnbm90aWZpY2F0aW9uLm5ld0ZpbGFtZW50LnN1Y2Nlc3NNZXNzYWdlJywgW1BhdGguZXh0cmFjdEZpbGVOYW1lKHBhdGgpXSkpOw0KCQkJfSBjYXRjaCAoZSkgew0KCQkJCWNvbnNvbGUud2FybihlKTsNCgkJCQl0aGlzLiRtYWtlTm90aWZpY2F0aW9uKCdlcnJvcicsIHRoaXMuJHQoJ25vdGlmaWNhdGlvbi5uZXdGaWxhbWVudC5lcnJvclRpdGxlTWFjcm9zJyksIGUubWVzc2FnZSk7DQoJCQl9DQoJCQl0aGlzLmRvaW5nRmlsZU9wZXJhdGlvbiA9IGZhbHNlOw0KCQl9LA0KCQlyZWZyZXNoKCkgew0KCQkJdGhpcy4kcmVmcy5maWxlbGlzdC5yZWZyZXNoKCk7DQoJCX0sDQoJCWFzeW5jIGRvd25sb2FkRmlsYW1lbnQoKSB7DQoJCQljb25zdCBmaWxhbWVudCA9IHRoaXMuc2VsZWN0aW9uWzBdLm5hbWU7DQoNCgkJCS8vIERvd25sb2FkIHRoZSBmaWxlcyBmaXJzdA0KCQkJbGV0IGxvYWRHLCB1bmxvYWRHOw0KCQkJdHJ5IHsNCgkJCQlsb2FkRyA9IGF3YWl0IHRoaXMuZG93bmxvYWQoeyBmaWxlbmFtZTogUGF0aC5jb21iaW5lKFBhdGguZmlsYW1lbnRzLCBmaWxhbWVudCwgJ2xvYWQuZycpLCB0eXBlOiAnYmxvYicsIHNob3dTdWNjZXNzOiBmYWxzZSwgc2hvd0Vycm9yOiBmYWxzZSB9KTsNCgkJCQl1bmxvYWRHID0gYXdhaXQgdGhpcy5kb3dubG9hZCh7IGZpbGVuYW1lOiBQYXRoLmNvbWJpbmUoUGF0aC5maWxhbWVudHMsIGZpbGFtZW50LCAndW5sb2FkLmcnKSwgdHlwZTogJ2Jsb2InLCBzaG93U3VjY2VzczogZmFsc2UsIHNob3dFcnJvcjogZmFsc2UgfSk7DQoJCQl9IGNhdGNoIChlKSB7DQoJCQkJaWYgKCEoZSBpbnN0YW5jZW9mIERpc2Nvbm5lY3RlZEVycm9yKSAmJiAhKGUgaW5zdGFuY2VvZiBPcGVyYXRpb25DYW5jZWxsZWRFcnJvcikpIHsNCgkJCQkJdGhpcy4kbWFrZU5vdGlmaWNhdGlvbignZXJyb3InLCB0aGlzLiR0KCdub3RpZmljYXRpb24uZG93bmxvYWQuZXJyb3InLCBbIWxvYWRHID8gJ2xvYWQuZycgOiAndW5sb2FkLmcnXSksIGUubWVzc2FnZSk7DQoJCQkJfQ0KCQkJCXJldHVybjsNCgkJCX0NCg0KCQkJbGV0IGNvbmZpZ0c7DQoJCQl0cnkgew0KCQkJCWNvbmZpZ0cgPSBhd2FpdCB0aGlzLmRvd25sb2FkKHsgZmlsZW5hbWU6IFBhdGguY29tYmluZShQYXRoLmZpbGFtZW50cywgZmlsYW1lbnQsICdjb25maWcuZycpLCB0eXBlOiAnYmxvYicsIHNob3dTdWNjZXNzOiBmYWxzZSwgc2hvd0Vycm9yOiBmYWxzZSB9KTsNCgkJCX0gY2F0Y2ggKGUpIHsNCgkJCQkvLyBjb25maWcuZyBtYXkgbm90IGV4aXN0DQoJCQkJaWYgKCEoZSBpbnN0YW5jZW9mIERpc2Nvbm5lY3RlZEVycm9yKSAmJiAhKGUgaW5zdGFuY2VvZiBPcGVyYXRpb25DYW5jZWxsZWRFcnJvcikgJiYgIShlIGluc3RhbmNlb2YgRmlsZU5vdEZvdW5kRXJyb3IpKSB7DQoJCQkJCXRoaXMuJG1ha2VOb3RpZmljYXRpb24oJ2Vycm9yJywgdGhpcy4kdCgnbm90aWZpY2F0aW9uLmRvd25sb2FkLmVycm9yJywgWydjb25maWcuZyddKSwgZS5tZXNzYWdlKTsNCgkJCQl9DQoJCQl9DQoNCgkJCS8vIEJ1bmRsZSB0aGVtIGluIGEgWklQIGZpbGUgYW5kIHBhc3MgaXQgdG8gdGhlIHVzZXINCgkJCWNvbnN0IHppcCA9IG5ldyBKU1ppcCgpOw0KCQkJemlwLmZpbGUoYCR7ZmlsYW1lbnR9L2xvYWQuZ2AsIGxvYWRHKTsNCgkJCXppcC5maWxlKGAke2ZpbGFtZW50fS91bmxvYWQuZ2AsIHVubG9hZEcpOw0KCQkJaWYgKGNvbmZpZ0cpIHsNCgkJCQl6aXAuZmlsZShgJHtmaWxhbWVudH0vY29uZmlnLmdgLCBjb25maWdHKTsNCgkJCX0NCg0KCQkJdHJ5IHsNCgkJCQljb25zdCB6aXBCbG9iID0gYXdhaXQgemlwLmdlbmVyYXRlQXN5bmMoeyB0eXBlOiAnYmxvYicgfSk7DQoJCQkJc2F2ZUFzKHppcEJsb2IsIGAke2ZpbGFtZW50fS56aXBgKTsNCgkJCX0gY2F0Y2ggKGUpIHsNCgkJCQljb25zb2xlLndhcm4oZSk7DQoJCQkJdGhpcy4kbWFrZU5vdGlmaWNhdGlvbignZXJyb3InLCB0aGlzLiR0KCdub3RpZmljYXRpb24uY29tcHJlc3MuZXJyb3JUaXRsZScsIFsnbG9hZC5nJ10pLCBlLm1lc3NhZ2UpOw0KCQkJfQ0KCQl9LA0KCQlhc3luYyByZW5hbWUoKSB7DQoJCQljb25zdCBmaWxhbWVudCA9IHRoaXMuc2VsZWN0aW9uWzBdLm5hbWU7DQoJCQlpZiAodGhpcy50b29scy5zb21lKHRvb2wgPT4gdG9vbCAmJiB0b29sLmZpbGFtZW50ID09PSBmaWxhbWVudCkpIHsNCgkJCQl0aGlzLiRtYWtlTm90aWZpY2F0aW9uKCdlcnJvcicsIHRoaXMuJHQoJ25vdGlmaWNhdGlvbi5yZW5hbWVGaWxhbWVudC5lcnJvclRpdGxlJyksIHRoaXMuJHQoJ25vdGlmaWNhdGlvbi5yZW5hbWVGaWxhbWVudC5lcnJvclN0aWxsTG9hZGVkJykpOw0KCQkJCXJldHVybjsNCgkJCX0NCg0KCQkJdGhpcy4kcmVmcy5maWxlbGlzdC5yZW5hbWUodGhpcy5zZWxlY3Rpb25bMF0pOw0KCQl9LA0KCQlhc3luYyByZW1vdmUoaXRlbXMpIHsNCgkJCWlmICghaXRlbXMgfHwgIShpdGVtcyBpbnN0YW5jZW9mIEFycmF5KSkgew0KCQkJCWl0ZW1zID0gdGhpcy5zZWxlY3Rpb24uc2xpY2UoKTsNCgkJCX0NCg0KCQkJaWYgKGl0ZW1zLnNvbWUoaXRlbSA9PiBpdGVtLmlzRGlyZWN0b3J5ICYmIHRoaXMudG9vbHMuc29tZSh0b29sID0+IHRvb2wgJiYgdG9vbC5maWxhbWVudCA9PT0gaXRlbS5uYW1lKSkpIHsNCgkJCQl0aGlzLiRtYWtlTm90aWZpY2F0aW9uKCdlcnJvcicsIHRoaXMuJHQoJ25vdGlmaWNhdGlvbi5kZWxldGVGaWxhbWVudC5lcnJvclRpdGxlJyksIHRoaXMuJHQoJ25vdGlmaWNhdGlvbi5kZWxldGVGaWxhbWVudC5lcnJvclN0aWxsTG9hZGVkJykpOw0KCQkJCXJldHVybjsNCgkJCX0NCg0KCQkJaWYgKHRoaXMuZG9pbmdGaWxlT3BlcmF0aW9uKSB7DQoJCQkJcmV0dXJuOw0KCQkJfQ0KDQoJCQl0aGlzLmRvaW5nRmlsZU9wZXJhdGlvbiA9IHRydWU7DQoJCQlmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7DQoJCQkJdHJ5IHsNCgkJCQkJaWYgKGl0ZW1zW2ldLmlzRGlyZWN0b3J5KSB7DQoJCQkJCQkvLyBHZXQgZmlsZXMgZnJvbSB0aGUgZmlsYW1lbnQgZGlyZWN0b3J5DQoJCQkJCQljb25zdCBmaWxlcyA9IGF3YWl0IHRoaXMuZ2V0RmlsZUxpc3QoUGF0aC5jb21iaW5lKFBhdGguZmlsYW1lbnRzLCBpdGVtc1tpXS5uYW1lKSk7DQoJCQkJCQlpZiAoZmlsZXMuc29tZShpdGVtID0+IGl0ZW0uaXNEaXJlY3RvcnkpKSB7DQoJCQkJCQkJdGhpcy4kbWFrZU5vdGlmaWNhdGlvbignZXJyb3InLCB0aGlzLiR0KCdub3RpZmljYXRpb24uZGVsZXRlRmlsYW1lbnQuZXJyb3JUaXRsZScpLCB0aGlzLiR0KCdub3RpZmljYXRpb24uZGVsZXRlRmlsYW1lbnQuZXJyb3JTdWJEaXJlY3RvcmllcycsIFtpdGVtc1tpXS5uYW1lXSkpOw0KCQkJCQkJCWJyZWFrOw0KCQkJCQkJfQ0KDQoJCQkJCQkvLyBEZWxldGUgZWFjaCBmaWxlIGZyb20gdGhlIGRpcmVjdG9yeQ0KCQkJCQkJZm9yIChsZXQgayA9IDA7IGsgPCBmaWxlcy5sZW5ndGg7IGsrKykgew0KCQkJCQkJCWF3YWl0IHRoaXMuZGVsZXRlKFBhdGguY29tYmluZShQYXRoLmZpbGFtZW50cywgaXRlbXNbaV0ubmFtZSwgZmlsZXNba10ubmFtZSkpOw0KCQkJCQkJfQ0KCQkJCQl9DQoNCgkJCQkJLy8gRGVsZXRlIHRoZSBpdGVtDQoJCQkJCWF3YWl0IHRoaXMuZGVsZXRlKFBhdGguY29tYmluZShQYXRoLmZpbGFtZW50cywgaXRlbXNbaV0ubmFtZSkpOw0KCQkJCQlhd2FpdCB0aGlzLnJlZnJlc2goKTsNCgkJCQl9IGNhdGNoIChlKSB7DQoJCQkJCWlmICghKGUgaW5zdGFuY2VvZiBEaXNjb25uZWN0ZWRFcnJvcikpIHsNCgkJCQkJCWNvbnNvbGUud2FybihlKTsNCgkJCQkJCXRoaXMuJG1ha2VOb3RpZmljYXRpb24oJ2Vycm9yJywgdGhpcy4kdCgnbm90aWZpY2F0aW9uLmRlbGV0ZUZpbGFtZW50LmVycm9yVGl0bGUnKSwgZS5tZXNzYWdlKTsNCgkJCQkJfQ0KCQkJCQlicmVhazsNCgkJCQl9DQoJCQl9DQoJCQl0aGlzLmRvaW5nRmlsZU9wZXJhdGlvbiA9IGZhbHNlOw0KCQl9LA0KCQlmaWxlQ2xpY2tlZChpdGVtKSB7DQoJCQl0aGlzLiRyZWZzLmZpbGVsaXN0LmVkaXQoaXRlbSk7DQoJCX0NCgl9LA0KCW1vdW50ZWQoKSB7DQoJCXRoaXMuZGlyZWN0b3J5ID0gdGhpcy5maWxhbWVudHNEaXJlY3Rvcnk7DQoJfSwNCgl3YXRjaDogew0KCQlmaWxhbWVudHNEaXJlY3RvcnkodG8sIGZyb20pIHsNCgkJCWlmIChQYXRoLmVxdWFscyh0aGlzLmRpcmVjdG9yeSwgZnJvbSkgfHwgIVBhdGguc3RhcnRzV2l0aCh0aGlzLmRpcmVjdG9yeSwgdG8pKSB7DQoJCQkJdGhpcy5kaXJlY3RvcnkgPSB0bzsNCgkJCX0NCgkJfQ0KCX0NCn0NCg=="},{"version":3,"sources":["FilamentFileList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FilamentFileList.vue","sourceRoot":"src/components/lists","sourcesContent":["<template>\r\n\t<div class=\"component\">\r\n\t\t<v-toolbar>\r\n\t\t\t<directory-breadcrumbs v-model=\"directory\"></directory-breadcrumbs>\r\n\r\n\t\t\t<v-spacer></v-spacer>\r\n\r\n\t\t\t<v-btn class=\"hidden-sm-and-down mr-3\" v-show=\"!isRootDirectory\" :disabled=\"uiFrozen\" @click=\"showNewFile = true\">\r\n\t\t\t\t<v-icon class=\"mr-1\">mdi-file-plus</v-icon> {{ $t('button.newFile.caption') }}\r\n\t\t\t</v-btn>\r\n\t\t\t<v-btn class=\"hidden-sm-and-down mr-3\" v-show=\"isRootDirectory\" :disabled=\"uiFrozen\" @click=\"showNewFilament = true\">\r\n\t\t\t\t<v-icon class=\"mr-1\">mdi-folder-plus</v-icon> {{ $t('button.newFilament.caption') }}\r\n\t\t\t</v-btn>\r\n\t\t\t<v-btn class=\"hidden-sm-and-down mr-3\" color=\"info\" :loading=\"loading\" :disabled=\"uiFrozen\" @click=\"refresh\">\r\n\t\t\t\t<v-icon class=\"mr-1\">mdi-refresh</v-icon> {{ $t('button.refresh.caption') }}\r\n\t\t\t</v-btn>\r\n\t\t\t<upload-btn class=\"hidden-sm-and-down\" target=\"filaments\" color=\"success\"></upload-btn>\r\n\t\t</v-toolbar>\r\n\r\n\t\t<base-file-list ref=\"filelist\" v-model=\"selection\" :directory.sync=\"directory\" :folder-icon=\"isRootDirectory ? 'mdi-radiobox-marked' : 'mdi-folder'\" :loading.sync=\"loading\" :doingFileOperation=\"doingFileOperation\" sort-table=\"filaments\" @fileClicked=\"fileClicked\" :no-delete=\"isRootDirectory\" :no-rename=\"filamentSelected\" no-drag-drop :no-files-text=\"isRootDirectory ? 'list.filament.noFilaments' : 'list.baseFileList.noFiles'\">\r\n\t\t\t<template #context-menu>\r\n\t\t\t\t<v-list-item v-show=\"filamentSelected\" @click=\"downloadFilament\">\r\n\t\t\t\t\t<v-icon class=\"mr-1\">mdi-cloud-download</v-icon> {{ $t('list.baseFileList.downloadZIP') }}\r\n\t\t\t\t</v-list-item>\r\n\t\t\t\t<v-list-item v-show=\"filamentSelected\" @click=\"rename\">\r\n\t\t\t\t\t<v-icon class=\"mr-1\">mdi-rename-box</v-icon> {{ $t('list.baseFileList.rename') }}\r\n\t\t\t\t</v-list-item>\r\n\t\t\t\t<v-list-item @click=\"remove\">\r\n\t\t\t\t\t<v-icon class=\"mr-1\">mdi-delete</v-icon> {{ $t('list.baseFileList.delete') }}\r\n\t\t\t\t</v-list-item>\r\n\t\t\t</template>\r\n\t\t</base-file-list>\r\n\r\n\t\t<v-speed-dial v-model=\"fab\" bottom right fixed direction=\"top\" transition=\"scale-transition\" class=\"hidden-md-and-up\">\r\n\t\t\t<template #activator>\r\n\t\t\t\t<v-btn v-model=\"fab\" dark color=\"primary\" fab>\r\n\t\t\t\t\t<v-icon v-if=\"fab\">mdi-close</v-icon>\r\n\t\t\t\t\t<v-icon v-else>mdi-dots-vertical</v-icon>\r\n\t\t\t\t</v-btn>\r\n\t\t\t</template>\r\n\r\n\t\t\t<v-btn v-show=\"!isRootDirectory\" fab :disabled=\"uiFrozen\" @click=\"showNewFile = true\">\r\n\t\t\t\t<v-icon class=\"mr-1\">mdi-file-plus</v-icon>\r\n\t\t\t</v-btn>\r\n\r\n\t\t\t<v-btn v-show=\"isRootDirectory\" fab :disabled=\"uiFrozen\" @click=\"showNewFilament = true\">\r\n\t\t\t\t<v-icon>mdi-folder-plus</v-icon>\r\n\t\t\t</v-btn>\r\n\r\n\t\t\t<v-btn fab color=\"info\" :loading=\"loading\" :disabled=\"uiFrozen\" @click=\"refresh\">\r\n\t\t\t\t<v-icon>mdi-refresh</v-icon>\r\n\t\t\t</v-btn>\r\n\r\n\t\t\t<upload-btn fab dark :directory=\"directory\" target=\"filaments\" color=\"success\">\r\n\t\t\t\t<v-icon>mdi-cloud-upload</v-icon>\r\n\t\t\t</upload-btn>\r\n\t\t</v-speed-dial>\r\n\r\n\t\t<new-directory-dialog :shown.sync=\"showNewFilament\" :directory=\"directory\" :title=\"$t('dialog.newFilament.title')\" :prompt=\"$t('dialog.newFilament.prompt')\" :showSuccess=\"false\" :showError=\"false\" @directoryCreationFailed=\"directoryCreationFailed\" @directoryCreated=\"createFilamentFiles\"></new-directory-dialog>\r\n\t\t<new-file-dialog :shown.sync=\"showNewFile\" :directory=\"directory\"></new-file-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n'use strict'\r\n\r\nimport JSZip from 'jszip'\r\nimport saveAs from 'file-saver'\r\n\r\nimport { mapState, mapGetters, mapActions } from 'vuex'\r\n\r\nimport { DisconnectedError, FileNotFoundError, OperationCancelledError } from '../../utils/errors.js'\r\nimport Path from '../../utils/path.js'\r\n\r\nexport default {\r\n\tcomputed: {\r\n\t\t...mapGetters(['uiFrozen']),\r\n\t\t...mapState('machine/model', {\r\n\t\t\tfilamentsDirectory: state => state.directories.filaments,\r\n\t\t\ttools: state => state.tools\r\n\t\t}),\r\n\t\tisRootDirectory() { return Path.equals(this.directory, this.filamentsDirectory); },\r\n\t\tfilamentSelected() { return Path.equals(this.directory, this.filamentsDirectory) && (this.selection.length === 1) && this.selection[0].isDirectory; }\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tdirectory: Path.filaments,\r\n\t\t\tselection: [],\r\n\t\t\tloading: false,\r\n\t\t\tdoingFileOperation: false,\r\n\t\t\tshowNewFile: false,\r\n\t\t\tshowNewFilament: false,\r\n\t\t\tfab: false\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t...mapActions('machine', ['sendCode', 'upload', 'download', 'delete', 'getFileList']),\r\n\t\tdirectoryCreationFailed(error) {\r\n\t\t\tthis.$makeNotification('error', this.$t('notification.newFilament.errorTitle'), error.message);\r\n\t\t},\r\n\t\tasync createFilamentFiles(path) {\r\n\t\t\tif (this.doingFileOperation) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.doingFileOperation = true;\r\n\t\t\ttry {\r\n\t\t\t\tconst emptyFile = new Blob();\r\n\t\t\t\tawait this.upload({ filename: Path.combine(path, 'load.g'), content: emptyFile, showSuccess: false });\r\n\t\t\t\tawait this.upload({ filename: Path.combine(path, 'config.g'), content: emptyFile, showSuccess: false });\r\n\t\t\t\tawait this.upload({ filename: Path.combine(path, 'unload.g'), content: emptyFile, showSuccess: false });\r\n\t\t\t\tthis.$makeNotification('success', this.$t('notification.newFilament.successTitle'), this.$t('notification.newFilament.successMessage', [Path.extractFileName(path)]));\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.warn(e);\r\n\t\t\t\tthis.$makeNotification('error', this.$t('notification.newFilament.errorTitleMacros'), e.message);\r\n\t\t\t}\r\n\t\t\tthis.doingFileOperation = false;\r\n\t\t},\r\n\t\trefresh() {\r\n\t\t\tthis.$refs.filelist.refresh();\r\n\t\t},\r\n\t\tasync downloadFilament() {\r\n\t\t\tconst filament = this.selection[0].name;\r\n\r\n\t\t\t// Download the files first\r\n\t\t\tlet loadG, unloadG;\r\n\t\t\ttry {\r\n\t\t\t\tloadG = await this.download({ filename: Path.combine(Path.filaments, filament, 'load.g'), type: 'blob', showSuccess: false, showError: false });\r\n\t\t\t\tunloadG = await this.download({ filename: Path.combine(Path.filaments, filament, 'unload.g'), type: 'blob', showSuccess: false, showError: false });\r\n\t\t\t} catch (e) {\r\n\t\t\t\tif (!(e instanceof DisconnectedError) && !(e instanceof OperationCancelledError)) {\r\n\t\t\t\t\tthis.$makeNotification('error', this.$t('notification.download.error', [!loadG ? 'load.g' : 'unload.g']), e.message);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tlet configG;\r\n\t\t\ttry {\r\n\t\t\t\tconfigG = await this.download({ filename: Path.combine(Path.filaments, filament, 'config.g'), type: 'blob', showSuccess: false, showError: false });\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// config.g may not exist\r\n\t\t\t\tif (!(e instanceof DisconnectedError) && !(e instanceof OperationCancelledError) && !(e instanceof FileNotFoundError)) {\r\n\t\t\t\t\tthis.$makeNotification('error', this.$t('notification.download.error', ['config.g']), e.message);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Bundle them in a ZIP file and pass it to the user\r\n\t\t\tconst zip = new JSZip();\r\n\t\t\tzip.file(`${filament}/load.g`, loadG);\r\n\t\t\tzip.file(`${filament}/unload.g`, unloadG);\r\n\t\t\tif (configG) {\r\n\t\t\t\tzip.file(`${filament}/config.g`, configG);\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\tconst zipBlob = await zip.generateAsync({ type: 'blob' });\r\n\t\t\t\tsaveAs(zipBlob, `${filament}.zip`);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.warn(e);\r\n\t\t\t\tthis.$makeNotification('error', this.$t('notification.compress.errorTitle', ['load.g']), e.message);\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync rename() {\r\n\t\t\tconst filament = this.selection[0].name;\r\n\t\t\tif (this.tools.some(tool => tool && tool.filament === filament)) {\r\n\t\t\t\tthis.$makeNotification('error', this.$t('notification.renameFilament.errorTitle'), this.$t('notification.renameFilament.errorStillLoaded'));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.$refs.filelist.rename(this.selection[0]);\r\n\t\t},\r\n\t\tasync remove(items) {\r\n\t\t\tif (!items || !(items instanceof Array)) {\r\n\t\t\t\titems = this.selection.slice();\r\n\t\t\t}\r\n\r\n\t\t\tif (items.some(item => item.isDirectory && this.tools.some(tool => tool && tool.filament === item.name))) {\r\n\t\t\t\tthis.$makeNotification('error', this.$t('notification.deleteFilament.errorTitle'), this.$t('notification.deleteFilament.errorStillLoaded'));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.doingFileOperation) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.doingFileOperation = true;\r\n\t\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (items[i].isDirectory) {\r\n\t\t\t\t\t\t// Get files from the filament directory\r\n\t\t\t\t\t\tconst files = await this.getFileList(Path.combine(Path.filaments, items[i].name));\r\n\t\t\t\t\t\tif (files.some(item => item.isDirectory)) {\r\n\t\t\t\t\t\t\tthis.$makeNotification('error', this.$t('notification.deleteFilament.errorTitle'), this.$t('notification.deleteFilament.errorSubDirectories', [items[i].name]));\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Delete each file from the directory\r\n\t\t\t\t\t\tfor (let k = 0; k < files.length; k++) {\r\n\t\t\t\t\t\t\tawait this.delete(Path.combine(Path.filaments, items[i].name, files[k].name));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Delete the item\r\n\t\t\t\t\tawait this.delete(Path.combine(Path.filaments, items[i].name));\r\n\t\t\t\t\tawait this.refresh();\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tif (!(e instanceof DisconnectedError)) {\r\n\t\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\t\tthis.$makeNotification('error', this.$t('notification.deleteFilament.errorTitle'), e.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.doingFileOperation = false;\r\n\t\t},\r\n\t\tfileClicked(item) {\r\n\t\t\tthis.$refs.filelist.edit(item);\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.directory = this.filamentsDirectory;\r\n\t},\r\n\twatch: {\r\n\t\tfilamentsDirectory(to, from) {\r\n\t\t\tif (Path.equals(this.directory, from) || !Path.startsWith(this.directory, to)) {\r\n\t\t\t\tthis.directory = to;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n"]}]}