{"remainingRequest":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\misc\\DirectoryBreadcrumbs.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\misc\\DirectoryBreadcrumbs.vue","mtime":1592248188549},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQondXNlIHN0cmljdCcNCg0KaW1wb3J0IHsgbWFwU3RhdGUsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4Jw0KDQppbXBvcnQgUGF0aCBmcm9tICcuLi8uLi91dGlscy9wYXRoLmpzJw0KDQpleHBvcnQgZGVmYXVsdCB7DQoJcHJvcHM6IHsNCgkJdmFsdWU6IHsNCgkJCXR5cGU6IFN0cmluZywNCgkJCXJlcXVpcmVkOiB0cnVlDQoJCX0NCgl9LA0KCWNvbXB1dGVkOiB7DQoJCS4uLm1hcFN0YXRlKCdtYWNoaW5lL21vZGVsJywgWydkaXJlY3RvcmllcyddKSwNCgkJcGF0aEl0ZW1zKCkgew0KCQkJY29uc3QgcGF0aEl0ZW1zID0gdGhpcy52YWx1ZS5zcGxpdCgnLycpLmZpbHRlcihpdGVtID0+IGl0ZW0gIT09ICcnKTsNCgkJCWxldCByb290Q2FwdGlvbiA9IChwYXRoSXRlbXMubGVuZ3RoID09PSAwKSA/IHRoaXMuJHQoJ2dlbmVyaWMubm9WYWx1ZScpIDogcGF0aEl0ZW1zWzBdOw0KCQkJaWYgKHBhdGhJdGVtcy5sZW5ndGggPiAxKSB7DQoJCQkJaWYgKFBhdGguc3RhcnRzV2l0aCh0aGlzLnZhbHVlLCB0aGlzLmRpcmVjdG9yaWVzLmdDb2RlcykpIHsNCgkJCQkJcGF0aEl0ZW1zLnNoaWZ0KCk7DQoJCQkJCXBhdGhJdGVtc1swXSA9IHRoaXMuZGlyZWN0b3JpZXMuZ0NvZGVzOw0KCQkJCQlyb290Q2FwdGlvbiA9IHRoaXMuJHQoJ2RpcmVjdG9yeS5nY29kZXMnKTsNCgkJCQl9IGVsc2UgaWYgKFBhdGguc3RhcnRzV2l0aCh0aGlzLnZhbHVlLCB0aGlzLmRpcmVjdG9yaWVzLm1hY3JvcykpIHsNCgkJCQkJcGF0aEl0ZW1zLnNoaWZ0KCk7DQoJCQkJCXBhdGhJdGVtc1swXSA9IHRoaXMuZGlyZWN0b3JpZXMubWFjcm9zOw0KCQkJCQlyb290Q2FwdGlvbiA9IHRoaXMuJHQoJ2RpcmVjdG9yeS5tYWNyb3MnKTsNCgkJCQl9IGVsc2UgaWYgKFBhdGguc3RhcnRzV2l0aCh0aGlzLnZhbHVlLCB0aGlzLmRpcmVjdG9yaWVzLmZpbGFtZW50cykpIHsNCgkJCQkJcGF0aEl0ZW1zLnNoaWZ0KCk7DQoJCQkJCXBhdGhJdGVtc1swXSA9IHRoaXMuZGlyZWN0b3JpZXMuZmlsYW1lbnRzOw0KCQkJCQlyb290Q2FwdGlvbiA9IHRoaXMuJHQoJ2RpcmVjdG9yeS5maWxhbWVudHMnKTsNCgkJCQl9IGVsc2UgaWYgKFBhdGguc3RhcnRzV2l0aCh0aGlzLnZhbHVlLCB0aGlzLmRpcmVjdG9yaWVzLm1lbnUpKSB7DQoJCQkJCXBhdGhJdGVtcy5zaGlmdCgpOw0KCQkJCQlwYXRoSXRlbXNbMF0gPSB0aGlzLmRpcmVjdG9yaWVzLm1lbnU7DQoJCQkJCXJvb3RDYXB0aW9uID0gdGhpcy4kdCgnZGlyZWN0b3J5Lm1lbnUnKTsNCgkJCQl9IGVsc2UgaWYgKFBhdGguc3RhcnRzV2l0aCh0aGlzLnZhbHVlLCBQYXRoLnN5c3RlbSkpIHsNCgkJCQkJcGF0aEl0ZW1zLnNoaWZ0KCk7DQoJCQkJCXBhdGhJdGVtc1swXSA9IFBhdGguc3lzdGVtOw0KCQkJCQlyb290Q2FwdGlvbiA9IHRoaXMuJHQoJ2RpcmVjdG9yeS5zeXN0ZW0nKTsNCgkJCQl9IGVsc2UgaWYgKFBhdGguc3RhcnRzV2l0aCh0aGlzLnZhbHVlLCB0aGlzLmRpcmVjdG9yaWVzLnN5c3RlbSkpIHsNCgkJCQkJcGF0aEl0ZW1zLnNoaWZ0KCk7DQoJCQkJCXBhdGhJdGVtc1swXSA9IHRoaXMuZGlyZWN0b3JpZXMuc3lzdGVtOw0KCQkJCQlyb290Q2FwdGlvbiA9IHRoaXMuJHQoJ2RpcmVjdG9yeS5zeXN0ZW0nKTsNCgkJCQl9IGVsc2UgaWYgKFBhdGguc3RhcnRzV2l0aCh0aGlzLnZhbHVlLCB0aGlzLmRpcmVjdG9yaWVzLndlYikpIHsNCgkJCQkJcGF0aEl0ZW1zLnNoaWZ0KCk7DQoJCQkJCXBhdGhJdGVtc1swXSA9IHRoaXMuZGlyZWN0b3JpZXMud2ViOw0KCQkJCQlyb290Q2FwdGlvbiA9IHRoaXMuJHQoJ2RpcmVjdG9yeS53ZWInKTsNCgkJCQl9DQoJCQl9DQoNCgkJCWNvbnN0IHRoYXQgPSB0aGlzOw0KCQkJbGV0IGl0ZW1zID0gW10sIHBhdGggPSAnJzsNCgkJCXBhdGhJdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7DQoJCQkJcGF0aCA9IFBhdGguY29tYmluZShwYXRoLCBpdGVtKTsNCgkJCQlpZiAoaW5kZXggPT09IDApIHsNCgkJCQkJaXRlbXMucHVzaCh7DQoJCQkJCQl0ZXh0OiBpdGVtLnN0YXJ0c1dpdGgoJzA6JykgPyByb290Q2FwdGlvbiA6IHRoYXQuJHQoJ2dlbmVyaWMuc2RDYXJkJywgWy9eKFxkKykvLmV4ZWMoaXRlbSlbMV1dKSwNCgkJCQkJCWRpc2FibGVkOiBpbmRleCA9PT0gcGF0aEl0ZW1zLmxlbmd0aCAtIDEsDQoJCQkJCQlocmVmOiBwYXRoDQoJCQkJCX0pOw0KCQkJCX0gZWxzZSB7DQoJCQkJCWl0ZW1zLnB1c2goew0KCQkJCQkJdGV4dDogaXRlbSwNCgkJCQkJCWRpc2FibGVkOiBpbmRleCA9PT0gcGF0aEl0ZW1zLmxlbmd0aCAtIDEsDQoJCQkJCQlocmVmOiBwYXRoDQoJCQkJCX0pOw0KCQkJCX0NCgkJCX0pOw0KCQkJcmV0dXJuIGl0ZW1zOw0KCQl9DQoJfSwNCgltZXRob2RzOiB7DQoJCS4uLm1hcEFjdGlvbnMoJ21hY2hpbmUnLCBbJ21vdmUnXSksDQoJCWNoYW5nZURpcmVjdG9yeShkaXJlY3RvcnkpIHsNCgkJCXRoaXMuJGVtaXQoJ2lucHV0JywgZGlyZWN0b3J5KTsNCgkJfSwNCgkJZHJhZ092ZXIoZGlyZWN0b3J5LCBlKSB7DQoJCQljb25zdCBqc29uRGF0YSA9IGUuZGF0YVRyYW5zZmVyLmdldERhdGEoJ2FwcGxpY2F0aW9uL2pzb24nKTsNCgkJCWlmIChqc29uRGF0YSkgew0KCQkJCWNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGpzb25EYXRhKTsNCgkJCQlpZiAoZGF0YS50eXBlID09PSAnZHdjRmlsZXMnICYmICFkYXRhLml0ZW1zLnNvbWUoZGF0YUl0ZW0gPT4gZGF0YUl0ZW0uaXNEaXJlY3RvcnkgJiYgZGlyZWN0b3J5ID09PSBQYXRoLmNvbWJpbmUoZGF0YS5kaXJlY3RvcnksIGRhdGFJdGVtLm5hbWUpKSkgew0KCQkJCQllLnByZXZlbnREZWZhdWx0KCk7DQoJCQkJCWUuc3RvcFByb3BhZ2F0aW9uKCk7DQoJCQkJfQ0KCQkJfSBlbHNlIHsNCgkJCQkvLyBGaXggZm9yIENocm9tZTogSXQgZG9lcyBub3QgZ3JhbnQgYWNjZXNzIHRvIGRhdGFUcmFuc2ZlciBvbiB0aGUgc2FtZSBkb21haW4gImZvciBzZWN1cml0eSByZWFzb25zIi4uLg0KCQkJCWUucHJldmVudERlZmF1bHQoKTsNCgkJCQllLnN0b3BQcm9wYWdhdGlvbigpOw0KCQkJfQ0KCQl9LA0KCQlhc3luYyBkcmFnRHJvcChkaXJlY3RvcnksIGUpIHsNCgkJCWNvbnN0IGpzb25EYXRhID0gZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgnYXBwbGljYXRpb24vanNvbicpOw0KCQkJaWYgKGpzb25EYXRhKSB7DQoJCQkJY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoanNvbkRhdGEpOw0KCQkJCWlmIChkYXRhLnR5cGUgPT09ICdkd2NGaWxlcycgJiYgIWRhdGEuaXRlbXMuc29tZShkYXRhSXRlbSA9PiBkYXRhSXRlbS5pc0RpcmVjdG9yeSAmJiBkaXJlY3RvcnkgPT09IFBhdGguY29tYmluZShkYXRhLmRpcmVjdG9yeSwgZGF0YUl0ZW0ubmFtZSkpKSB7DQoJCQkJCWNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGpzb25EYXRhKTsNCgkJCQkJZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLml0ZW1zLmxlbmd0aDsgaSsrKSB7DQoJCQkJCQljb25zdCBmcm9tID0gUGF0aC5jb21iaW5lKGRhdGEuZGlyZWN0b3J5LCBkYXRhLml0ZW1zW2ldLm5hbWUpOw0KCQkJCQkJY29uc3QgdG8gPSBQYXRoLmNvbWJpbmUoZGlyZWN0b3J5LCBkYXRhLml0ZW1zW2ldLm5hbWUpOw0KCQkJCQkJdHJ5IHsNCgkJCQkJCQlhd2FpdCB0aGlzLm1vdmUoeyBmcm9tLCB0byB9KTsNCgkJCQkJCX0gY2F0Y2ggKGUpIHsNCgkJCQkJCQl0aGlzLiRsb2coJ2Vycm9yJywgdGhpcy4kdCgnZXJyb3IubW92ZScsIFtkYXRhLml0ZW1zW2ldLm5hbWUsIGRpcmVjdG9yeV0pLCBlLm1lc3NhZ2UpOw0KCQkJCQkJCWJyZWFrOw0KCQkJCQkJfQ0KCQkJCQl9DQoJCQkJfQ0KCQkJfQ0KCQl9DQoJfQ0KfQ0K"},{"version":3,"sources":["DirectoryBreadcrumbs.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DirectoryBreadcrumbs.vue","sourceRoot":"src/components/misc","sourcesContent":["<template>\r\n\t<v-breadcrumbs :items=\"pathItems\" divider=\">\">\r\n\t\t<template #item=\"props\">\r\n\t\t\t<v-breadcrumbs-item href=\"javascript:void(0)\" :disabled=\"props.item.disabled\" @click=\"changeDirectory(props.item.href)\" @dragover=\"dragOver(props.item.href, $event)\" @drop.prevent=\"dragDrop(props.item.href, $event)\">\r\n\t\t\t\t{{ props.item.text }}\r\n\t\t\t</v-breadcrumbs-item>\r\n\t\t</template>\r\n\t</v-breadcrumbs>\r\n</template>\r\n\r\n<script>\r\n'use strict'\r\n\r\nimport { mapState, mapActions } from 'vuex'\r\n\r\nimport Path from '../../utils/path.js'\r\n\r\nexport default {\r\n\tprops: {\r\n\t\tvalue: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState('machine/model', ['directories']),\r\n\t\tpathItems() {\r\n\t\t\tconst pathItems = this.value.split('/').filter(item => item !== '');\r\n\t\t\tlet rootCaption = (pathItems.length === 0) ? this.$t('generic.noValue') : pathItems[0];\r\n\t\t\tif (pathItems.length > 1) {\r\n\t\t\t\tif (Path.startsWith(this.value, this.directories.gCodes)) {\r\n\t\t\t\t\tpathItems.shift();\r\n\t\t\t\t\tpathItems[0] = this.directories.gCodes;\r\n\t\t\t\t\trootCaption = this.$t('directory.gcodes');\r\n\t\t\t\t} else if (Path.startsWith(this.value, this.directories.macros)) {\r\n\t\t\t\t\tpathItems.shift();\r\n\t\t\t\t\tpathItems[0] = this.directories.macros;\r\n\t\t\t\t\trootCaption = this.$t('directory.macros');\r\n\t\t\t\t} else if (Path.startsWith(this.value, this.directories.filaments)) {\r\n\t\t\t\t\tpathItems.shift();\r\n\t\t\t\t\tpathItems[0] = this.directories.filaments;\r\n\t\t\t\t\trootCaption = this.$t('directory.filaments');\r\n\t\t\t\t} else if (Path.startsWith(this.value, this.directories.menu)) {\r\n\t\t\t\t\tpathItems.shift();\r\n\t\t\t\t\tpathItems[0] = this.directories.menu;\r\n\t\t\t\t\trootCaption = this.$t('directory.menu');\r\n\t\t\t\t} else if (Path.startsWith(this.value, Path.system)) {\r\n\t\t\t\t\tpathItems.shift();\r\n\t\t\t\t\tpathItems[0] = Path.system;\r\n\t\t\t\t\trootCaption = this.$t('directory.system');\r\n\t\t\t\t} else if (Path.startsWith(this.value, this.directories.system)) {\r\n\t\t\t\t\tpathItems.shift();\r\n\t\t\t\t\tpathItems[0] = this.directories.system;\r\n\t\t\t\t\trootCaption = this.$t('directory.system');\r\n\t\t\t\t} else if (Path.startsWith(this.value, this.directories.web)) {\r\n\t\t\t\t\tpathItems.shift();\r\n\t\t\t\t\tpathItems[0] = this.directories.web;\r\n\t\t\t\t\trootCaption = this.$t('directory.web');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst that = this;\r\n\t\t\tlet items = [], path = '';\r\n\t\t\tpathItems.forEach(function(item, index) {\r\n\t\t\t\tpath = Path.combine(path, item);\r\n\t\t\t\tif (index === 0) {\r\n\t\t\t\t\titems.push({\r\n\t\t\t\t\t\ttext: item.startsWith('0:') ? rootCaption : that.$t('generic.sdCard', [/^(\\d+)/.exec(item)[1]]),\r\n\t\t\t\t\t\tdisabled: index === pathItems.length - 1,\r\n\t\t\t\t\t\thref: path\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\titems.push({\r\n\t\t\t\t\t\ttext: item,\r\n\t\t\t\t\t\tdisabled: index === pathItems.length - 1,\r\n\t\t\t\t\t\thref: path\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn items;\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t...mapActions('machine', ['move']),\r\n\t\tchangeDirectory(directory) {\r\n\t\t\tthis.$emit('input', directory);\r\n\t\t},\r\n\t\tdragOver(directory, e) {\r\n\t\t\tconst jsonData = e.dataTransfer.getData('application/json');\r\n\t\t\tif (jsonData) {\r\n\t\t\t\tconst data = JSON.parse(jsonData);\r\n\t\t\t\tif (data.type === 'dwcFiles' && !data.items.some(dataItem => dataItem.isDirectory && directory === Path.combine(data.directory, dataItem.name))) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// Fix for Chrome: It does not grant access to dataTransfer on the same domain \"for security reasons\"...\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync dragDrop(directory, e) {\r\n\t\t\tconst jsonData = e.dataTransfer.getData('application/json');\r\n\t\t\tif (jsonData) {\r\n\t\t\t\tconst data = JSON.parse(jsonData);\r\n\t\t\t\tif (data.type === 'dwcFiles' && !data.items.some(dataItem => dataItem.isDirectory && directory === Path.combine(data.directory, dataItem.name))) {\r\n\t\t\t\t\tconst data = JSON.parse(jsonData);\r\n\t\t\t\t\tfor (let i = 0; i < data.items.length; i++) {\r\n\t\t\t\t\t\tconst from = Path.combine(data.directory, data.items[i].name);\r\n\t\t\t\t\t\tconst to = Path.combine(directory, data.items[i].name);\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tawait this.move({ from, to });\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tthis.$log('error', this.$t('error.move', [data.items[i].name, directory]), e.message);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n"]}]}