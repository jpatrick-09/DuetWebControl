{"remainingRequest":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vuetify-loader\\lib\\loader.js??ref--18-0!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\lists\\BaseFileList.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\lists\\BaseFileList.vue","mtime":1592248188537},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KJ3VzZSBzdHJpY3QnOwoKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5yZWR1Y2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOlxcVXNlcnNcXGpwYXRyaWNrXFxEb2N1bWVudHNcXEdpdEh1YlxcRHVldFdlYkNvbnRyb2xfRm9ya1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkM6XFxVc2Vyc1xcanBhdHJpY2tcXERvY3VtZW50c1xcR2l0SHViXFxEdWV0V2ViQ29udHJvbF9Gb3JrXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IEpTWmlwIGZyb20gJ2pzemlwJzsKaW1wb3J0IHNhdmVBcyBmcm9tICdmaWxlLXNhdmVyJzsKaW1wb3J0IHsgVkRhdGFUYWJsZSB9IGZyb20gJ3Z1ZXRpZnkvbGliJzsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwR2V0dGVycywgbWFwQWN0aW9ucywgbWFwTXV0YXRpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCBpMThuIGZyb20gJy4uLy4uL2kxOG4nOwppbXBvcnQgeyBkZWZhdWx0TWFjaGluZSwgZ2V0TW9kaWZpZWREaXJlY3RvcmllcyB9IGZyb20gJy4uLy4uL3N0b3JlL21hY2hpbmUnOwppbXBvcnQgeyBEaXNjb25uZWN0ZWRFcnJvciwgT3BlcmF0aW9uQ2FuY2VsbGVkRXJyb3IgfSBmcm9tICcuLi8uLi91dGlscy9lcnJvcnMuanMnOwppbXBvcnQgUGF0aCBmcm9tICcuLi8uLi91dGlscy9wYXRoLmpzJzsKdmFyIG1heEVkaXRGaWxlU2l6ZSA9IDE1NzI4NjQwOyAvLyAxNSBNaUIKCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgaGVhZGVyczogQXJyYXksCiAgICBzb3J0VGFibGU6IFN0cmluZywKICAgIGRpcmVjdG9yeTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgZmlsZWxpc3Q6IEFycmF5LAogICAgdmFsdWU6IEFycmF5LAogICAgZmlsZUljb246IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnbWRpLWZpbGUnCiAgICB9LAogICAgZm9sZGVySWNvbjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdtZGktZm9sZGVyJwogICAgfSwKICAgIGxvYWRpbmc6IEJvb2xlYW4sCiAgICBkb2luZ0ZpbGVPcGVyYXRpb246IEJvb2xlYW4sCiAgICBub0RyYWdEcm9wOiBCb29sZWFuLAogICAgbm9Eb3dubG9hZDogQm9vbGVhbiwKICAgIG5vRWRpdDogQm9vbGVhbiwKICAgIG5vRmlsZXNUZXh0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCiAgICBub1JlbmFtZTogQm9vbGVhbiwKICAgIG5vRGVsZXRlOiBCb29sZWFuCiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoWydzZWxlY3RlZE1hY2hpbmUnXSksIHt9LCBtYXBHZXR0ZXJzKFsnaXNDb25uZWN0ZWQnXSksIHt9LCBtYXBTdGF0ZSgnbWFjaGluZScsIFsnaXNSZWNvbm5lY3RpbmcnXSksIHt9LCBtYXBTdGF0ZSgnbWFjaGluZS9jYWNoZScsIFsnc29ydGluZyddKSwge30sIG1hcFN0YXRlKCdtYWNoaW5lL21vZGVsJywgWyd2b2x1bWVzJ10pLCB7CiAgICBkZWZhdWx0SGVhZGVyczogZnVuY3Rpb24gZGVmYXVsdEhlYWRlcnMoKSB7CiAgICAgIHJldHVybiBbewogICAgICAgIHRleHQ6IGkxOG4udCgnbGlzdC5iYXNlRmlsZUxpc3QuZmlsZU5hbWUnKSwKICAgICAgICB2YWx1ZTogJ25hbWUnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiBpMThuLnQoJ2xpc3QuYmFzZUZpbGVMaXN0LnNpemUnKSwKICAgICAgICB2YWx1ZTogJ3NpemUnLAogICAgICAgIHVuaXQ6ICdieXRlcycKICAgICAgfSwgewogICAgICAgIHRleHQ6IGkxOG4udCgnbGlzdC5iYXNlRmlsZUxpc3QubGFzdE1vZGlmaWVkJyksCiAgICAgICAgdmFsdWU6ICdsYXN0TW9kaWZpZWQnLAogICAgICAgIHVuaXQ6ICdkYXRlJwogICAgICB9XTsKICAgIH0sCiAgICBpc0xvYWRpbmc6IGZ1bmN0aW9uIGlzTG9hZGluZygpIHsKICAgICAgcmV0dXJuIHRoaXMubG9hZGluZyB8fCB0aGlzLmlubmVyTG9hZGluZyB8fCB0aGlzLmRvaW5nRmlsZU9wZXJhdGlvbiB8fCB0aGlzLmlubmVyRG9pbmdGaWxlT3BlcmF0aW9uOwogICAgfSwKICAgIGZvbGRlcnNTZWxlY3RlZDogZnVuY3Rpb24gZm9sZGVyc1NlbGVjdGVkKCkgewogICAgICByZXR1cm4gdGhpcy5pbm5lclZhbHVlLnNvbWUoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5pc0RpcmVjdG9yeTsKICAgICAgfSk7CiAgICB9LAogICAgZmlsZXNTZWxlY3RlZDogZnVuY3Rpb24gZmlsZXNTZWxlY3RlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaW5uZXJWYWx1ZS5zb21lKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuICFpdGVtLmlzRGlyZWN0b3J5OwogICAgICB9KTsKICAgIH0sCiAgICBjYW5FZGl0RmlsZTogZnVuY3Rpb24gY2FuRWRpdEZpbGUoKSB7CiAgICAgIHJldHVybiB0aGlzLmlubmVyVmFsdWUubGVuZ3RoID4gMCAmJiB0aGlzLmlubmVyVmFsdWVbMF0uc2l6ZSA8IG1heEVkaXRGaWxlU2l6ZTsKICAgIH0sCiAgICBub0l0ZW1zVGV4dDogZnVuY3Rpb24gbm9JdGVtc1RleHQoKSB7CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkTWFjaGluZSA9PT0gZGVmYXVsdE1hY2hpbmUpIHsKICAgICAgICByZXR1cm4gdGhpcy5ub0ZpbGVzVGV4dDsKICAgICAgfQoKICAgICAgdmFyIHZvbHVtZSA9IFBhdGguZ2V0Vm9sdW1lKHRoaXMuaW5uZXJEaXJlY3RvcnkpOwogICAgICByZXR1cm4gdm9sdW1lID49IDAgJiYgdm9sdW1lIDwgdGhpcy52b2x1bWVzLmxlbmd0aCAmJiB0aGlzLnZvbHVtZXNbdm9sdW1lXS5tb3VudGVkID8gdGhpcy5ub0ZpbGVzVGV4dCA6ICdsaXN0LmJhc2VGaWxlTGlzdC5kcml2ZVVubW91bnRlZCc7CiAgICB9LAogICAgaW50ZXJuYWxTb3J0Qnk6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGluZ1t0aGlzLnNvcnRUYWJsZV0uY29sdW1uOwogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICAgIHRoaXMuc2V0U29ydGluZyh7CiAgICAgICAgICB0YWJsZTogdGhpcy5zb3J0VGFibGUsCiAgICAgICAgICBjb2x1bW46IHZhbHVlLAogICAgICAgICAgZGVzY2VuZGluZzogdGhpcy5pbnRlcm5hbFNvcnREZXNjCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBpbnRlcm5hbFNvcnREZXNjOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHJldHVybiB0aGlzLnNvcnRpbmdbdGhpcy5zb3J0VGFibGVdLmRlc2NlbmRpbmc7CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CiAgICAgICAgdGhpcy5zZXRTb3J0aW5nKHsKICAgICAgICAgIHRhYmxlOiB0aGlzLnNvcnRUYWJsZSwKICAgICAgICAgIGNvbHVtbjogdGhpcy5pbnRlcm5hbFNvcnRCeSwKICAgICAgICAgIGRlc2NlbmRpbmc6IHZhbHVlCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9KSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdW5zdWJzY3JpYmU6IHVuZGVmaW5lZCwKICAgICAgd2FzTW91bnRlZDogZmFsc2UsCiAgICAgIGluaXRpYWxEaXJlY3Rvcnk6IHRoaXMuZGlyZWN0b3J5LAogICAgICBpbm5lckRpcmVjdG9yeTogdGhpcy5kaXJlY3RvcnksCiAgICAgIGlubmVyRmlsZWxpc3Q6IFtdLAogICAgICBpbm5lckxvYWRpbmc6IGZhbHNlLAogICAgICBpbm5lckRvaW5nRmlsZU9wZXJhdGlvbjogZmFsc2UsCiAgICAgIGlubmVyVmFsdWU6IFtdLAogICAgICBwcmV2U2VsZWN0aW9uOiBbXSwKICAgICAgY29udGV4dE1lbnU6IHsKICAgICAgICBzaG93bjogZmFsc2UsCiAgICAgICAgdG91Y2hUaW1lcjogdW5kZWZpbmVkLAogICAgICAgIHg6IDAsCiAgICAgICAgeTogMAogICAgICB9LAogICAgICBlZGl0RGlhbG9nOiB7CiAgICAgICAgc2hvd246IGZhbHNlLAogICAgICAgIGZpbGVuYW1lOiAnJywKICAgICAgICBjb250ZW50OiAnJwogICAgICB9LAogICAgICByZW5hbWVEaWFsb2c6IHsKICAgICAgICBzaG93bjogZmFsc2UsCiAgICAgICAgZGlyZWN0b3J5OiAnJywKICAgICAgICBpdGVtOiBudWxsCiAgICAgIH0KICAgIH07CiAgfSwKICBleHRlbmRzOiBWRGF0YVRhYmxlLAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoe30sIG1hcEFjdGlvbnMoJ21hY2hpbmUnLCB7CiAgICBtYWNoaW5lRG93bmxvYWQ6ICdkb3dubG9hZCcsCiAgICBtYWNoaW5lTW92ZTogJ21vdmUnLAogICAgbWFjaGluZURlbGV0ZTogJ2RlbGV0ZScsCiAgICBnZXRGaWxlTGlzdDogJ2dldEZpbGVMaXN0JwogIH0pLCB7fSwgbWFwTXV0YXRpb25zKCdtYWNoaW5lL2NhY2hlJywgWydzZXRTb3J0aW5nJ10pLCB7CiAgICB0b2dnbGVBbGw6IGZ1bmN0aW9uIHRvZ2dsZUFsbCgpIHsKICAgICAgdGhpcy5pbm5lclZhbHVlID0gdGhpcy5pbm5lclZhbHVlLmxlbmd0aCA/IFtdIDogdGhpcy5pbm5lckZpbGVsaXN0LnNsaWNlKCk7CiAgICB9LAogICAgc29ydDogZnVuY3Rpb24gc29ydChpdGVtcywgc29ydEJ5LCBzb3J0RGVzYykgewogICAgICBzb3J0QnkgPSBzb3J0QnkubGVuZ3RoID8gc29ydEJ5WzBdIDogJ25hbWUnOwogICAgICBzb3J0RGVzYyA9IHNvcnREZXNjWzBdOyAvLyBTb3J0IGJ5IGluZGV4CgogICAgICBpdGVtcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgaWYgKGFbc29ydEJ5XSA9PT0gYltzb3J0QnldKSB7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CgogICAgICAgIGlmIChhW3NvcnRCeV0gPT09IG51bGwgfHwgYVtzb3J0QnldID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9CgogICAgICAgIGlmIChiW3NvcnRCeV0gPT09IG51bGwgfHwgYltzb3J0QnldID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHJldHVybiAxOwogICAgICAgIH0KCiAgICAgICAgaWYgKGFbc29ydEJ5XS5jb25zdHJ1Y3RvciA9PT0gU3RyaW5nICYmIGJbc29ydEJ5XS5jb25zdHJ1Y3RvciA9PT0gU3RyaW5nKSB7CiAgICAgICAgICByZXR1cm4gYVtzb3J0QnldLmxvY2FsZUNvbXBhcmUoYltzb3J0QnldLCB1bmRlZmluZWQsIHsKICAgICAgICAgICAgc2Vuc2l2aXR5OiAnYmFzZScKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKGFbc29ydEJ5XSBpbnN0YW5jZW9mIEFycmF5ICYmIGJbc29ydEJ5XSBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgICB2YXIgcmVkdWNlZEEgPSBhW3NvcnRCeV0ubGVuZ3RoID8gYS5maWxhbWVudC5yZWR1Y2UoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgcmV0dXJuIGEgKyBiOwogICAgICAgICAgfSkgOiAwOwogICAgICAgICAgdmFyIHJlZHVjZWRCID0gYltzb3J0QnldLmxlbmd0aCA/IGIuZmlsYW1lbnQucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgIHJldHVybiBhICsgYjsKICAgICAgICAgIH0pIDogMDsKICAgICAgICAgIHJldHVybiByZWR1Y2VkQSAtIHJlZHVjZWRCOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGFbc29ydEJ5XSAtIGJbc29ydEJ5XTsKICAgICAgfSk7IC8vIERlYWwgd2l0aCBkZXNjZW5kaW5nIG9yZGVyCgogICAgICBpZiAoc29ydERlc2MpIHsKICAgICAgICBpdGVtcy5yZXZlcnNlKCk7CiAgICAgIH0gLy8gVGhlbiBtYWtlIHN1cmUgZGlyZWN0b3JpZXMgY29tZSBmaXJzdAoKCiAgICAgIGl0ZW1zLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gYS5pc0RpcmVjdG9yeSA9PT0gYi5pc0RpcmVjdG9yeSA/IDAgOiBhLmlzRGlyZWN0b3J5ID8gLTEgOiAxOwogICAgICB9KTsKICAgICAgcmV0dXJuIGl0ZW1zOwogICAgfSwKICAgIHJlZnJlc2g6IGZ1bmN0aW9uIHJlZnJlc2goKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmxvYWREaXJlY3RvcnkoX3RoaXMuaW5uZXJEaXJlY3RvcnkpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbG9hZERpcmVjdG9yeTogZnVuY3Rpb24gbG9hZERpcmVjdG9yeShkaXJlY3RvcnkpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgdm9sdW1lLCBmaWxlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKF90aGlzMi5pc0Nvbm5lY3RlZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgLy8gVXBkYXRlIG91ciBwYXRoIGV2ZW4gaWYgd2UncmUgc3RpbGwgYnVzeSBsb2FkaW5nCiAgICAgICAgICAgICAgICBfdGhpczIuaW5uZXJEaXJlY3RvcnkgPSBkaXJlY3Rvcnk7CgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczIuaW5uZXJMb2FkaW5nKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIGN1cnJlbnQgdm9sdW1lIGlzIGFjdHVhbGx5IGF2YWlsYWJsZQogICAgICAgICAgICAgICAgdm9sdW1lID0gUGF0aC5nZXRWb2x1bWUoX3RoaXMyLmlubmVyRGlyZWN0b3J5KTsKCiAgICAgICAgICAgICAgICBpZiAoISh2b2x1bWUgPCAwIHx8IHZvbHVtZSA+PSBfdGhpczIudm9sdW1lcy5sZW5ndGggfHwgIV90aGlzMi52b2x1bWVzW3ZvbHVtZV0ubW91bnRlZCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMyLmlubmVyRGlyZWN0b3J5ID0gdm9sdW1lID09PSAwID8gX3RoaXMyLmluaXRpYWxEaXJlY3RvcnkgOiAiIi5jb25jYXQodm9sdW1lLCAiOiIpOwogICAgICAgICAgICAgICAgX3RoaXMyLmlubmVyRmlsZWxpc3QgPSBbXTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIC8vIExvYWQgZmlsZSBsaXN0CiAgICAgICAgICAgICAgICBfdGhpczIuaW5uZXJMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTE7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5nZXRGaWxlTGlzdChkaXJlY3RvcnkpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgZmlsZXMgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbWlzc2luZyBwcm9wcyBpZiByZXF1aXJlZAogICAgICAgICAgICAgICAgaWYgKF90aGlzMi5oZWFkZXJzKSB7CiAgICAgICAgICAgICAgICAgIGZpbGVzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbiAoaGVhZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbVtoZWFkZXIudmFsdWVdID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgVnVlLnNldChpdGVtLCBoZWFkZXIudmFsdWUsIHVuZGVmaW5lZCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0sIF90aGlzMik7CiAgICAgICAgICAgICAgICB9IC8vIENoZWNrIGlmIGFub3RoZXIgZGlyZWN0b3J5IHdhcyByZXF1ZXN0ZWQgd2hpbGUgZmlsZXMgd2VyZSBiZWluZyBsb2FkZWQKCgogICAgICAgICAgICAgICAgaWYgKCEoZGlyZWN0b3J5ICE9PSBfdGhpczIuaW5uZXJEaXJlY3RvcnkpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzMi5pbm5lckxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBfdGhpczIubG9hZERpcmVjdG9yeShfdGhpczIuaW5uZXJEaXJlY3RvcnkpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgIC8vIEFzc2lnbiBuZXcgZmlsZSBsaXN0CiAgICAgICAgICAgICAgICBfdGhpczIuaW5uZXJGaWxlbGlzdCA9IGZpbGVzOwogICAgICAgICAgICAgICAgX3RoaXMyLmlubmVyVmFsdWUgPSBbXTsKCiAgICAgICAgICAgICAgICBfdGhpczIuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnZGlyZWN0b3J5TG9hZGVkJywgZGlyZWN0b3J5KTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjg7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMjU7CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMTEpOwoKICAgICAgICAgICAgICAgIGlmICghKF9jb250ZXh0Mi50MCBpbnN0YW5jZW9mIERpc2Nvbm5lY3RlZEVycm9yKSkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oX2NvbnRleHQyLnQwKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMi4kbWFrZU5vdGlmaWNhdGlvbignZXJyb3InLCBfdGhpczIuJHQoJ2Vycm9yLmZpbGVsaXN0UmVxdWVzdEZhaWxlZCcpLCBfY29udGV4dDIudDAubWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMjg6CiAgICAgICAgICAgICAgICBfdGhpczIuaW5uZXJMb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMTEsIDI1XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBkaXNwbGF5TG9hZGluZ1ZhbHVlOiBmdW5jdGlvbiBkaXNwbGF5TG9hZGluZ1ZhbHVlKGl0ZW0sIHByb3AsIHByZWNpc2lvbikgewogICAgICB2YXIgdW5pdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogJyc7CgogICAgICBpZiAoaXRlbS5pc0RpcmVjdG9yeSkgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQoKICAgICAgaWYgKCFpdGVtW3Byb3BdKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHQoaXRlbVtwcm9wXSA9PT0gdW5kZWZpbmVkID8gJ2dlbmVyaWMubG9hZGluZycgOiAnZ2VuZXJpYy5ub1ZhbHVlJyk7CiAgICAgIH0KCiAgICAgIHZhciBkaXNwbGF5VmFsdWU7CgogICAgICBpZiAoaXRlbVtwcm9wXSBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgaWYgKCFpdGVtW3Byb3BdLmxlbmd0aCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuJHQoJ2dlbmVyaWMubm9WYWx1ZScpOwogICAgICAgIH0KCiAgICAgICAgZGlzcGxheVZhbHVlID0gaXRlbVtwcm9wXS5yZWR1Y2UoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgIHJldHVybiBhICsgYjsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkaXNwbGF5VmFsdWUgPSBpdGVtW3Byb3BdOwogICAgICB9CgogICAgICBpZiAocHJlY2lzaW9uICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBkaXNwbGF5VmFsdWUgPSBkaXNwbGF5VmFsdWUudG9GaXhlZChwcmVjaXNpb24pOwogICAgICB9CgogICAgICByZXR1cm4gIiIuY29uY2F0KGRpc3BsYXlWYWx1ZSwgIiAiKS5jb25jYXQodW5pdCk7CiAgICB9LAogICAgZGlzcGxheVRpbWVWYWx1ZTogZnVuY3Rpb24gZGlzcGxheVRpbWVWYWx1ZShpdGVtLCBwcm9wKSB7CiAgICAgIGlmIChpdGVtLmlzRGlyZWN0b3J5KSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CgogICAgICByZXR1cm4gaXRlbVtwcm9wXSAhPT0gbnVsbCA/IHRoaXMuJGRpc3BsYXlUaW1lKGl0ZW1bcHJvcF0pIDogdGhpcy4kdCgnZ2VuZXJpYy5ub1ZhbHVlJyk7CiAgICB9LAogICAgb25JdGVtVG91Y2hTdGFydDogZnVuY3Rpb24gb25JdGVtVG91Y2hTdGFydChwcm9wcywgZSkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHRoaXMuY29udGV4dE1lbnUudG91Y2hUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHRoYXQuY29udGV4dE1lbnUudG91Y2hUaW1lciA9IHVuZGVmaW5lZDsKICAgICAgICB0aGF0Lm9uSXRlbUNvbnRleHRtZW51KHByb3BzLCB7CiAgICAgICAgICBjbGllbnRYOiBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WCwKICAgICAgICAgIGNsaWVudFk6IGUudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRZCiAgICAgICAgfSk7CiAgICAgIH0sIDEwMDApOwogICAgfSwKICAgIG9uSXRlbVRvdWNoRW5kOiBmdW5jdGlvbiBvbkl0ZW1Ub3VjaEVuZCgpIHsKICAgICAgaWYgKHRoaXMuY29udGV4dE1lbnUudG91Y2hUaW1lcikgewogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNvbnRleHRNZW51LnRvdWNoVGltZXIpOwogICAgICAgIHRoaXMuY29udGV4dE1lbnUudG91Y2hUaW1lciA9IHVuZGVmaW5lZDsKICAgICAgfQogICAgfSwKICAgIG9uSXRlbUNsaWNrOiBmdW5jdGlvbiBvbkl0ZW1DbGljayhwcm9wcykgewogICAgICBpZiAocHJvcHMuaXRlbS5pc0RpcmVjdG9yeSkgewogICAgICAgIHRoaXMubG9hZERpcmVjdG9yeShQYXRoLmNvbWJpbmUodGhpcy5pbm5lckRpcmVjdG9yeSwgcHJvcHMuaXRlbS5uYW1lKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kZW1pdCgnZmlsZUNsaWNrZWQnLCBwcm9wcy5pdGVtKTsKICAgICAgfQogICAgfSwKICAgIG9uSXRlbUNvbnRleHRtZW51OiBmdW5jdGlvbiBvbkl0ZW1Db250ZXh0bWVudShwcm9wcywgZSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmNvbnRleHRNZW51LnNob3duKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLm9uSXRlbVRvdWNoRW5kKCk7IC8vIERlYWwgd2l0aCBzZWxlY3Rpb24KCiAgICAgIHRoaXMucHJldlNlbGVjdGlvbiA9IHRoaXMuaW5uZXJWYWx1ZTsKCiAgICAgIGlmICghcHJvcHMuaXNTZWxlY3RlZCkgewogICAgICAgIHRoaXMuaW5uZXJWYWx1ZSA9IFtdOwogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBwcm9wcy5zZWxlY3QodHJ1ZSk7CiAgICAgICAgfSk7CiAgICAgIH0gLy8gT3BlbiB0aGUgY29udGV4dCBtZW51CgoKICAgICAgdGhpcy5jb250ZXh0TWVudS5zaG93biA9IGZhbHNlOwogICAgICB0aGlzLmNvbnRleHRNZW51LnggPSBlLmNsaWVudFg7CiAgICAgIHRoaXMuY29udGV4dE1lbnUueSA9IGUuY2xpZW50WTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMy5jb250ZXh0TWVudS5zaG93biA9IHRydWU7CiAgICAgIH0pOwogICAgfSwKICAgIG9uSXRlbURyYWdTdGFydDogZnVuY3Rpb24gb25JdGVtRHJhZ1N0YXJ0KGl0ZW0sIGUpIHsKICAgICAgaWYgKHRoaXMubm9EcmFnRHJvcCB8fCB0aGlzLmNvbnRleHRNZW51LnRvdWNoVGltZXIgfHwgdGhpcy5jb250ZXh0TWVudS5zaG93bikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGl0ZW1zVG9EcmFnID0gdGhpcy5pbm5lclZhbHVlOwoKICAgICAgaWYgKGl0ZW1zVG9EcmFnLmluZGV4T2YoaXRlbSkgPT09IC0xKSB7CiAgICAgICAgaXRlbXNUb0RyYWcucHVzaChpdGVtKTsKICAgICAgfQoKICAgICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YSgnYXBwbGljYXRpb24vanNvbicsIEpTT04uc3RyaW5naWZ5KHsKICAgICAgICB0eXBlOiAnZHdjRmlsZXMnLAogICAgICAgIGRpcmVjdG9yeTogdGhpcy5pbm5lckRpcmVjdG9yeSwKICAgICAgICBpdGVtczogaXRlbXNUb0RyYWcKICAgICAgfSkpOwogICAgICBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ21vdmUnOwogICAgICB2YXIgdGFibGUgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCd0YWJsZScpLAogICAgICAgICAgZmlyc3RSb3cgPSB0YWJsZS50Qm9kaWVzWzBdLnJvd3NbMF07CiAgICAgIHZhciB0YWJsZUNsb25lID0gdGFibGUuY2xvbmVOb2RlKHRydWUpLAogICAgICAgICAgaXRlbUZpbGVuYW1lID0gKGl0ZW0uaXNEaXJlY3RvcnkgPyAnKicgOiAnJykgKyBpdGVtLm5hbWU7CiAgICAgIHZhciBvZmZzZXRZID0gMCwKICAgICAgICAgIGNvdW50aW5nT2Zmc2V0ID0gdHJ1ZTsKICAgICAgdGFibGVDbG9uZS50SGVhZC5yZW1vdmUoKTsKICAgICAgQXJyYXkuZnJvbSh0YWJsZUNsb25lLnRCb2RpZXNbMF0ucm93cykuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7CiAgICAgICAgdmFyIGZpbGVuYW1lID0gcm93LmRhdGFzZXQuZmlsZW5hbWU7CgogICAgICAgIGlmIChpdGVtc1RvRHJhZy5zb21lKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICByZXR1cm4gKGl0ZW0uaXNEaXJlY3RvcnkgPyAnKicgOiAnJykgKyBpdGVtLm5hbWUgPT09IGZpbGVuYW1lOwogICAgICAgIH0pKSB7CiAgICAgICAgICBBcnJheS5mcm9tKHJvdy5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAodGQsIGluZGV4KSB7CiAgICAgICAgICAgIGlmICh0ZC50YWdOYW1lID09PSAnVEQnKSB7CiAgICAgICAgICAgICAgdGQuc3R5bGUud2lkdGggPSAiIi5jb25jYXQoZmlyc3RSb3cuY2hpbGRyZW5baW5kZXhdLm9mZnNldFdpZHRoLCAicHgiKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0ZC5yZW1vdmUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKGNvdW50aW5nT2Zmc2V0KSB7CiAgICAgICAgICAgIGlmIChmaWxlbmFtZSA9PT0gaXRlbUZpbGVuYW1lKSB7CiAgICAgICAgICAgICAgY291bnRpbmdPZmZzZXQgPSBmYWxzZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBvZmZzZXRZICs9IGZpcnN0Um93Lm9mZnNldEhlaWdodDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByb3cucmVtb3ZlKCk7CiAgICAgICAgfQogICAgICB9LCB0aGlzKTsKICAgICAgdGFibGVDbG9uZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLiR2dWV0aWZ5LnRoZW1lLmlzRGFyayA/ICcjNDI0MjQyJyA6ICcjRkZGRkZGJzsKICAgICAgdGFibGVDbG9uZS5zdHlsZS5vcGFjaXR5ID0gMC43OwogICAgICB0YWJsZUNsb25lLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJzsKICAgICAgdGFibGVDbG9uZS5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnOwogICAgICBBcnJheS5mcm9tKHRhYmxlQ2xvbmUucXVlcnlTZWxlY3RvckFsbCgnW2NsYXNzXj0idi1yaXBwbGUiXScpKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaXRlbS5jbGFzc0xpc3QgPSBBcnJheS5mcm9tKGl0ZW0uY2xhc3NMaXN0KS5maWx0ZXIoZnVuY3Rpb24gKGMpIHsKICAgICAgICAgIHJldHVybiAhYy5zdGFydHNXaXRoKCd2LXJpcHBsZScpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdGFibGUucGFyZW50Tm9kZS5hcHBlbmQodGFibGVDbG9uZSk7CiAgICAgIHZhciB4ID0gZS5jbGllbnRYIC0gdGFibGUuZ2V0Q2xpZW50UmVjdHMoKVswXS5sZWZ0OwogICAgICB2YXIgeSA9IGUuY2xpZW50WSAtIGUudGFyZ2V0LmNsb3Nlc3QoJ3RyJykuZ2V0Q2xpZW50UmVjdHMoKVswXS50b3AgKyBvZmZzZXRZOwogICAgICBlLmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UodGFibGVDbG9uZSwgeCwgeSk7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0YWJsZUNsb25lLnJlbW92ZSgpOwogICAgICB9LCAwKTsKICAgIH0sCiAgICBvbkl0ZW1EcmFnT3ZlcjogZnVuY3Rpb24gb25JdGVtRHJhZ092ZXIoaXRlbSwgZSkgewogICAgICBpZiAoIXRoaXMubm9EcmFnRHJvcCAmJiBpdGVtLmlzRGlyZWN0b3J5KSB7CiAgICAgICAgdmFyIGpzb25EYXRhID0gZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgnYXBwbGljYXRpb24vanNvbicpOwoKICAgICAgICBpZiAoanNvbkRhdGEpIHsKICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShqc29uRGF0YSk7CgogICAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ2R3Y0ZpbGVzJyAmJiAhZGF0YS5pdGVtcy5zb21lKGZ1bmN0aW9uIChkYXRhSXRlbSkgewogICAgICAgICAgICByZXR1cm4gZGF0YUl0ZW0uaXNEaXJlY3RvcnkgJiYgZGF0YUl0ZW0ubmFtZSA9PT0gaXRlbS5uYW1lOwogICAgICAgICAgfSkpIHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBGaXggZm9yIENocm9tZTogSXQgZG9lcyBub3QgZ3JhbnQgYWNjZXNzIHRvIGRhdGFUcmFuc2ZlciBvbiB0aGUgc2FtZSBkb21haW4gImZvciBzZWN1cml0eSByZWFzb25zIi4uLgogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBvbkl0ZW1EcmFnRHJvcDogZnVuY3Rpb24gb25JdGVtRHJhZ0Ryb3AoaXRlbSwgZSkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBqc29uRGF0YSwgZGF0YSwgZGlyZWN0b3J5LCBpLCBmcm9tLCB0bzsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAganNvbkRhdGEgPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKCdhcHBsaWNhdGlvbi9qc29uJyk7CgogICAgICAgICAgICAgICAgaWYgKCFqc29uRGF0YSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShqc29uRGF0YSk7CgogICAgICAgICAgICAgICAgaWYgKCEoZGF0YS50eXBlID09PSAnZHdjRmlsZXMnICYmICFkYXRhLml0ZW1zLnNvbWUoZnVuY3Rpb24gKGRhdGFJdGVtKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhSXRlbS5pc0RpcmVjdG9yeSAmJiBkYXRhSXRlbS5uYW1lID09PSBpdGVtLm5hbWU7CiAgICAgICAgICAgICAgICB9KSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZGlyZWN0b3J5ID0gX3RoaXM0LmlubmVyRGlyZWN0b3J5OwogICAgICAgICAgICAgICAgaSA9IDA7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGlmICghKGkgPCBkYXRhLml0ZW1zLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnJvbSA9IFBhdGguY29tYmluZShkYXRhLmRpcmVjdG9yeSwgZGF0YS5pdGVtc1tpXS5uYW1lKTsKICAgICAgICAgICAgICAgIHRvID0gUGF0aC5jb21iaW5lKGRpcmVjdG9yeSwgaXRlbS5uYW1lLCBkYXRhLml0ZW1zW2ldLm5hbWUpOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSA5OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczQubWFjaGluZU1vdmUoewogICAgICAgICAgICAgICAgICBmcm9tOiBmcm9tLAogICAgICAgICAgICAgICAgICB0bzogdG8KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxODsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxNDsKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSg5KTsKCiAgICAgICAgICAgICAgICBfdGhpczQuJG1ha2VOb3RpZmljYXRpb24oJ2Vycm9yJywgIkZhaWxlZCB0byBtb3ZlICIuY29uY2F0KGRhdGEuaXRlbXNbaV0ubmFtZSwgIiB0byAiKS5jb25jYXQoZGlyZWN0b3J5KSwgX2NvbnRleHQzLnQwLm1lc3NhZ2UpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJicmVhayIsIDIxKTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCBudWxsLCBbWzksIDE0XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBkb3dubG9hZDogZnVuY3Rpb24gZG93bmxvYWQoaXRlbSkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHZhciBmaWxlbmFtZSwgYmxvYjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAwOwogICAgICAgICAgICAgICAgZmlsZW5hbWUgPSBpdGVtICYmIGl0ZW0ubmFtZSA/IGl0ZW0ubmFtZSA6IF90aGlzNS5pbm5lclZhbHVlWzBdLm5hbWU7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM1Lm1hY2hpbmVEb3dubG9hZCh7CiAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBQYXRoLmNvbWJpbmUoX3RoaXM1LmlubmVyRGlyZWN0b3J5LCBmaWxlbmFtZSksCiAgICAgICAgICAgICAgICAgIHR5cGU6ICdibG9iJwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGJsb2IgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIHNhdmVBcyhibG9iLCBmaWxlbmFtZSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gODsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC50MCA9IF9jb250ZXh0NFsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgICBpZiAoIShfY29udGV4dDQudDAgaW5zdGFuY2VvZiBEaXNjb25uZWN0ZWRFcnJvcikgJiYgIShfY29udGV4dDQudDAgaW5zdGFuY2VvZiBPcGVyYXRpb25DYW5jZWxsZWRFcnJvcikpIHsKICAgICAgICAgICAgICAgICAgLy8gc2hvdWxkIGJlIGhhbmRsZWQgYmVmb3JlIHdlIGdldCBoZXJlCiAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihfY29udGV4dDQudDApOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0LCBudWxsLCBbWzAsIDhdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGVkaXQ6IGZ1bmN0aW9uIGVkaXQoaXRlbSkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgIHZhciBmaWxlbmFtZSwgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gUGF0aC5jb21iaW5lKF90aGlzNi5pbm5lckRpcmVjdG9yeSwgaXRlbS5uYW1lKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczYubWFjaGluZURvd25sb2FkKHsKICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IGZpbGVuYW1lLAogICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgICAgICAgICAgIHNob3dTdWNjZXNzOiBmYWxzZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgICAgICBfdGhpczYuZWRpdERpYWxvZy5maWxlbmFtZSA9IGZpbGVuYW1lOwogICAgICAgICAgICAgICAgX3RoaXM2LmVkaXREaWFsb2cuY29udGVudCA9IHJlc3BvbnNlOwogICAgICAgICAgICAgICAgX3RoaXM2LmVkaXREaWFsb2cuc2hvd24gPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAxMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IF9jb250ZXh0NVsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgICBpZiAoIShfY29udGV4dDUudDAgaW5zdGFuY2VvZiBEaXNjb25uZWN0ZWRFcnJvcikgJiYgIShfY29udGV4dDUudDAgaW5zdGFuY2VvZiBPcGVyYXRpb25DYW5jZWxsZWRFcnJvcikpIHsKICAgICAgICAgICAgICAgICAgLy8gc2hvdWxkIGJlIGhhbmRsZWQgYmVmb3JlIHdlIGdldCBoZXJlCiAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihfY29udGV4dDUudDApOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1LCBudWxsLCBbWzAsIDEwXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICByZW5hbWU6IGZ1bmN0aW9uIHJlbmFtZShpdGVtKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzNy5yZW5hbWVEaWFsb2cuZGlyZWN0b3J5ID0gX3RoaXM3LmlubmVyRGlyZWN0b3J5OwogICAgICAgICAgICAgICAgX3RoaXM3LnJlbmFtZURpYWxvZy5pdGVtID0gaXRlbSAmJiBpdGVtLm5hbWUgPyBpdGVtIDogX3RoaXM3LmlubmVyVmFsdWVbMF07CiAgICAgICAgICAgICAgICBfdGhpczcucmVuYW1lRGlhbG9nLnNob3duID0gdHJ1ZTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgcmVuYW1lQ2FsbGJhY2s6IGZ1bmN0aW9uIHJlbmFtZUNhbGxiYWNrKG5ld0ZpbGVuYW1lKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgICAgdmFyIG9sZEZpbGVuYW1lOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBvbGRGaWxlbmFtZSA9IF90aGlzOC5yZW5hbWVEaWFsb2cuaXRlbS5uYW1lOwoKICAgICAgICAgICAgICAgIGlmICghX3RoaXM4LmlubmVyRG9pbmdGaWxlT3BlcmF0aW9uKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBfdGhpczguaW5uZXJEb2luZ0ZpbGVPcGVyYXRpb24gPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQ3LnByZXYgPSA0OwogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzOC5tYWNoaW5lTW92ZSh7CiAgICAgICAgICAgICAgICAgIGZyb206IFBhdGguY29tYmluZShfdGhpczgucmVuYW1lRGlhbG9nLmRpcmVjdG9yeSwgb2xkRmlsZW5hbWUpLAogICAgICAgICAgICAgICAgICB0bzogUGF0aC5jb21iaW5lKF90aGlzOC5yZW5hbWVEaWFsb2cuZGlyZWN0b3J5LCBuZXdGaWxlbmFtZSkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfdGhpczguaW5uZXJGaWxlbGlzdC5zb21lKGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgICAgICAgICAgICAgIGlmIChmaWxlLmlzRGlyZWN0b3J5ID09PSB0aGlzLmlzRGlyZWN0b3J5ICYmIGZpbGUubmFtZSA9PT0gdGhpcy5uYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZS5uYW1lID0gbmV3RmlsZW5hbWU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0sIF90aGlzOC5yZW5hbWVEaWFsb2cuaXRlbSk7CgogICAgICAgICAgICAgICAgX3RoaXM4LiRtYWtlTm90aWZpY2F0aW9uKCdzdWNjZXNzJywgX3RoaXM4LiR0KCdub3RpZmljYXRpb24ucmVuYW1lLnN1Y2Nlc3MnLCBbb2xkRmlsZW5hbWUsIG5ld0ZpbGVuYW1lXSkpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5wcmV2ID0gMTE7CiAgICAgICAgICAgICAgICBfY29udGV4dDcudDAgPSBfY29udGV4dDdbImNhdGNoIl0oNCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oX2NvbnRleHQ3LnQwKTsKCiAgICAgICAgICAgICAgICBfdGhpczguJGxvZygnZXJyb3InLCBfdGhpczguJHQoJ25vdGlmaWNhdGlvbi5yZW5hbWUuZXJyb3InLCBbb2xkRmlsZW5hbWUsIG5ld0ZpbGVuYW1lXSksIF9jb250ZXh0Ny50MC5tZXNzYWdlKTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIF90aGlzOC5pbm5lckRvaW5nRmlsZU9wZXJhdGlvbiA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU3LCBudWxsLCBbWzQsIDExXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShpdGVtcykgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KCkgewogICAgICAgIHZhciBkZWxldGVkSXRlbXMsIGRpcmVjdG9yeSwgaTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCFpdGVtcyB8fCAhKGl0ZW1zIGluc3RhbmNlb2YgQXJyYXkpKSB7CiAgICAgICAgICAgICAgICAgIGl0ZW1zID0gX3RoaXM5LmlubmVyVmFsdWUuc2xpY2UoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIV90aGlzOS5pbm5lckRvaW5nRmlsZU9wZXJhdGlvbikgewogICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX3RoaXM5LmlubmVyRG9pbmdGaWxlT3BlcmF0aW9uID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGRlbGV0ZWRJdGVtcyA9IFtdLCBkaXJlY3RvcnkgPSBfdGhpczkuZGlyZWN0b3J5OwogICAgICAgICAgICAgICAgaSA9IDA7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGlmICghKGkgPCBpdGVtcy5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5wcmV2ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuZGVsZWdhdGVZaWVsZCggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICAgICAgICAgICAgICB2YXIgaXRlbTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gaXRlbXNbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczkubWFjaGluZURlbGV0ZShQYXRoLmNvbWJpbmUoZGlyZWN0b3J5LCBpdGVtLm5hbWUpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVkSXRlbXMucHVzaChpdGVtc1tpXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM5LmlubmVyRmlsZWxpc3QgPSBfdGhpczkuaW5uZXJGaWxlbGlzdC5maWx0ZXIoZnVuY3Rpb24gKGZpbGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWxlLmlzRGlyZWN0b3J5ICE9PSBpdGVtLmlzRGlyZWN0b3J5IHx8IGZpbGUubmFtZSAhPT0gaXRlbS5uYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzOS5pbm5lclZhbHVlID0gX3RoaXM5LmlubmVyVmFsdWUuZmlsdGVyKGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsZS5pc0RpcmVjdG9yeSAhPT0gaXRlbS5pc0RpcmVjdG9yeSB8fCBmaWxlLm5hbWUgIT09IGl0ZW0ubmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgICAgICAgICAgIH0pKCksICJ0MCIsIDkpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBfY29udGV4dDkucHJldiA9IDExOwogICAgICAgICAgICAgICAgX2NvbnRleHQ5LnQxID0gX2NvbnRleHQ5WyJjYXRjaCJdKDcpOwoKICAgICAgICAgICAgICAgIF90aGlzOS4kbWFrZU5vdGlmaWNhdGlvbignZXJyb3InLCBfdGhpczkuJHQoJ25vdGlmaWNhdGlvbi5kZWxldGUuZXJyb3JUaXRsZScsIFtpdGVtc1tpXS5uYW1lXSksIGl0ZW1zW2ldLmlzRGlyZWN0b3J5ID8gX3RoaXM5LiR0KCdub3RpZmljYXRpb24uZGVsZXRlLmVycm9yTWVzc2FnZURpcmVjdG9yeScpIDogX2NvbnRleHQ5LnQxLm1lc3NhZ2UpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICBpZiAoZGVsZXRlZEl0ZW1zLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICBfdGhpczkuJGxvZygnc3VjY2VzcycsIGRlbGV0ZWRJdGVtcy5sZW5ndGggPiAxID8gX3RoaXM5LiR0KCdub3RpZmljYXRpb24uZGVsZXRlLnN1Y2Nlc3NNdWx0aXBsZScsIFtkZWxldGVkSXRlbXMubGVuZ3RoXSkgOiBfdGhpczkuJHQoJ25vdGlmaWNhdGlvbi5kZWxldGUuc3VjY2VzcycsIFtkZWxldGVkSXRlbXNbMF0ubmFtZV0pKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczkuaW5uZXJEb2luZ0ZpbGVPcGVyYXRpb24gPSBmYWxzZTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOSwgbnVsbCwgW1s3LCAxMV1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZG93bmxvYWRaSVA6IGZ1bmN0aW9uIGRvd25sb2FkWklQKGl0ZW1zKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMCgpIHsKICAgICAgICB2YXIgZGlyZWN0b3J5LCB6aXAsIGksIGJsb2IsIG5vdGlmaWNhdGlvbiwgemlwQmxvYjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghaXRlbXMgfHwgIShpdGVtcyBpbnN0YW5jZW9mIEFycmF5KSkgewogICAgICAgICAgICAgICAgICBpdGVtcyA9IF90aGlzMTAuaW5uZXJWYWx1ZS5zbGljZSgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRpcmVjdG9yeSA9IF90aGlzMTAuZGlyZWN0b3J5OyAvLyBEb3dubG9hZCBmaWxlcwoKICAgICAgICAgICAgICAgIHppcCA9IG5ldyBKU1ppcCgpOwogICAgICAgICAgICAgICAgaSA9IDA7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGlmICghKGkgPCBpdGVtcy5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDEwLnByZXYgPSA1OwogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczEwLm1hY2hpbmVEb3dubG9hZCh7CiAgICAgICAgICAgICAgICAgIGZpbGVuYW1lOiBQYXRoLmNvbWJpbmUoZGlyZWN0b3J5LCBpdGVtc1tpXS5uYW1lKSwKICAgICAgICAgICAgICAgICAgdHlwZTogJ2Jsb2InLAogICAgICAgICAgICAgICAgICBudW06IGkgKyAxLAogICAgICAgICAgICAgICAgICBjb3VudDogaXRlbXMubGVuZ3RoCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgYmxvYiA9IF9jb250ZXh0MTAuc2VudDsKICAgICAgICAgICAgICAgIHppcC5maWxlKGl0ZW1zW2ldLm5hbWUsIGJsb2IpOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAucHJldiA9IDEyOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMC50MCA9IF9jb250ZXh0MTBbImNhdGNoIl0oNSk7CgogICAgICAgICAgICAgICAgaWYgKCEoX2NvbnRleHQxMC50MCBpbnN0YW5jZW9mIERpc2Nvbm5lY3RlZEVycm9yKSAmJiAhKF9jb250ZXh0MTAudDAgaW5zdGFuY2VvZiBPcGVyYXRpb25DYW5jZWxsZWRFcnJvcikpIHsKICAgICAgICAgICAgICAgICAgLy8gc2hvdWxkIGJlIGhhbmRsZWQgYmVmb3JlIHdlIGdldCBoZXJlCiAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihfY29udGV4dDEwLnQwKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgLy8gQ29tcHJlc3MgZmlsZXMgYW5kIHNhdmUgdGhlIG5ldyBhcmNoaXZlCiAgICAgICAgICAgICAgICBub3RpZmljYXRpb24gPSBfdGhpczEwLiRtYWtlTm90aWZpY2F0aW9uKCdpbmZvJywgX3RoaXMxMC4kdCgnbm90aWZpY2F0aW9uLmNvbXByZXNzLnRpdGxlJyksIF90aGlzMTAuJHQoJ25vdGlmaWNhdGlvbi5jb21wcmVzcy5tZXNzYWdlJykpOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5wcmV2ID0gMjA7CiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAyMzsKICAgICAgICAgICAgICAgIHJldHVybiB6aXAuZ2VuZXJhdGVBc3luYyh7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICdibG9iJwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICB6aXBCbG9iID0gX2NvbnRleHQxMC5zZW50OwogICAgICAgICAgICAgICAgc2F2ZUFzKHppcEJsb2IsICdkb3dubG9hZC56aXAnKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDMxOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgICBfY29udGV4dDEwLnByZXYgPSAyNzsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAudDEgPSBfY29udGV4dDEwWyJjYXRjaCJdKDIwKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihfY29udGV4dDEwLnQxKTsKCiAgICAgICAgICAgICAgICBfdGhpczEwLiRtYWtlTm90aWZpY2F0aW9uKCdlcnJvcicsIF90aGlzMTAuJHQoJ25vdGlmaWNhdGlvbi5jb21wcmVzcy5lcnJvclRpdGxlJyksIF9jb250ZXh0MTAudDEubWVzc2FnZSk7CgogICAgICAgICAgICAgIGNhc2UgMzE6CiAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uaGlkZSgpOwoKICAgICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTAsIG51bGwsIFtbNSwgMTJdLCBbMjAsIDI3XV0pOwogICAgICB9KSkoKTsKICAgIH0KICB9KSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgLy8gUGVyZm9ybSBpbml0aWFsIGxvYWQKICAgIGlmICh0aGlzLmlzQ29ubmVjdGVkKSB7CiAgICAgIHZhciB2b2x1bWUgPSBQYXRoLmdldFZvbHVtZSh0aGlzLmlubmVyRGlyZWN0b3J5KTsKICAgICAgdGhpcy53YXNNb3VudGVkID0gdm9sdW1lID49IDAgJiYgdm9sdW1lID49IHRoaXMudm9sdW1lcy5sZW5ndGggJiYgdGhpcy52b2x1bWVzW3ZvbHVtZV0ubW91bnRlZDsKICAgICAgdGhpcy5yZWZyZXNoKCk7CiAgICB9IC8vIEtlZXAgdHJhY2sgb2YgZmlsZSBjaGFuZ2VzCgoKICAgIHZhciB0aGF0ID0gdGhpczsKICAgIHRoaXMudW5zdWJzY3JpYmUgPSB0aGlzLiRzdG9yZS5zdWJzY3JpYmVBY3Rpb24oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEoYWN0aW9uLCBzdGF0ZSkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEoIXRoYXQuZG9pbmdGaWxlT3BlcmF0aW9uICYmICF0aGF0LmlubmVyRG9pbmdGaWxlT3BlcmF0aW9uICYmIGdldE1vZGlmaWVkRGlyZWN0b3JpZXMoYWN0aW9uLCBzdGF0ZSkuc29tZShmdW5jdGlvbiAoZGlyZWN0b3J5KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBQYXRoLmVxdWFscyhkaXJlY3RvcnksIHRoYXQuaW5uZXJEaXJlY3RvcnkpOwogICAgICAgICAgICAgICAgfSkpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5yZWZyZXNoKCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTExKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCwgX3gyKSB7CiAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKSk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy51bnN1YnNjcmliZSgpOwogIH0sCiAgd2F0Y2g6IHsKICAgIGlzQ29ubmVjdGVkOiBmdW5jdGlvbiBpc0Nvbm5lY3RlZCh0bykgewogICAgICBpZiAodG8pIHsKICAgICAgICB0aGlzLnJlZnJlc2goKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlubmVyRGlyZWN0b3J5ID0gdGhpcy5pbml0aWFsRGlyZWN0b3J5OwogICAgICAgIHRoaXMuaW5uZXJGaWxlbGlzdCA9IFtdOwogICAgICAgIHRoaXMuZWRpdERpYWxvZy5zaG93biA9IGZhbHNlOwogICAgICAgIHRoaXMucmVuYW1lRGlhbG9nLnNob3duID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBzZWxlY3RlZE1hY2hpbmU6IGZ1bmN0aW9uIHNlbGVjdGVkTWFjaGluZSgpIHsKICAgICAgLy8gVE9ETyBzdG9yZSBjdXJyZW50IGRpcmVjdG9yeSBwZXIgc2VsZWN0ZWQgbWFjaGluZQogICAgICB0aGlzLmlubmVyRGlyZWN0b3J5ID0gdGhpcy5pbml0aWFsRGlyZWN0b3J5OwogICAgICB0aGlzLmlubmVyRmlsZWxpc3QgPSBbXTsKICAgICAgdGhpcy5lZGl0RGlhbG9nLnNob3duID0gZmFsc2U7CiAgICAgIHRoaXMucmVuYW1lRGlhbG9nLnNob3duID0gZmFsc2U7CiAgICB9LAogICAgdm9sdW1lczogewogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIGlmICh0aGlzLmlzQ29ubmVjdGVkKSB7CiAgICAgICAgICB2YXIgdm9sdW1lID0gUGF0aC5nZXRWb2x1bWUodGhpcy5kaXJlY3RvcnkpOwoKICAgICAgICAgIGlmICh2b2x1bWUgPj0gMCAmJiB2b2x1bWUgPCB0aGlzLnZvbHVtZXMubGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciBtb3VudGVkID0gdGhpcy52b2x1bWVzW3ZvbHVtZV0ubW91bnRlZDsKCiAgICAgICAgICAgIGlmICh0aGlzLndhc01vdW50ZWQgIT09IG1vdW50ZWQpIHsKICAgICAgICAgICAgICB0aGlzLndhc01vdW50ZWQgPSBtb3VudGVkOwogICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLndhc01vdW50ZWQgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgZGlyZWN0b3J5OiBmdW5jdGlvbiBkaXJlY3RvcnkodG8pIHsKICAgICAgaWYgKHRvICE9PSB0aGlzLmlubmVyRGlyZWN0b3J5KSB7CiAgICAgICAgdGhpcy5sb2FkRGlyZWN0b3J5KHRvKTsKICAgICAgfQogICAgfSwKICAgIGlubmVyRGlyZWN0b3J5OiBmdW5jdGlvbiBpbm5lckRpcmVjdG9yeSh0bykgewogICAgICBpZiAodGhpcy5kaXJlY3RvcnkgIT09IHRvKSB7CiAgICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOmRpcmVjdG9yeScsIHRvKTsKICAgICAgfQogICAgfSwKICAgIGlubmVyRmlsZWxpc3Q6IGZ1bmN0aW9uIGlubmVyRmlsZWxpc3QodG8pIHsKICAgICAgaWYgKHRoaXMuZmlsZWxpc3QgIT09IHRvKSB7CiAgICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOmZpbGVsaXN0JywgdG8pOwogICAgICB9CiAgICB9LAogICAgaW5uZXJMb2FkaW5nOiBmdW5jdGlvbiBpbm5lckxvYWRpbmcodG8pIHsKICAgICAgaWYgKHRoaXMubG9hZGluZyAhPT0gdG8pIHsKICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6bG9hZGluZycsIHRvKTsKICAgICAgfQogICAgfSwKICAgIGlubmVyVmFsdWU6IGZ1bmN0aW9uIGlubmVyVmFsdWUodG8pIHsKICAgICAgaWYgKHRoaXMudmFsdWUgIT09IHRvKSB7CiAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB0byk7CiAgICAgIH0KICAgIH0sCiAgICAnY29udGV4dE1lbnUuc2hvd24nOiBmdW5jdGlvbiBjb250ZXh0TWVudVNob3duKHRvKSB7CiAgICAgIGlmICghdG8pIHsKICAgICAgICAvLyBSZXN0b3JlIHByZXZpb3VzbHkgc2VsZWN0ZWQgaXRlbXMKICAgICAgICB0aGlzLmlubmVyVmFsdWUgPSB0aGlzLnByZXZTZWxlY3Rpb247CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["BaseFileList.vue"],"names":[],"mappings":"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","sourcesContent":["<style scoped>\r\ntd {\r\n\tcursor: pointer;\r\n}\r\n\r\n.loading-cursor {\r\n\tcursor: wait;\r\n}\r\n.loading-cursor td {\r\n\tcursor: wait;\r\n}\r\n</style>\r\n\r\n<style>\r\n.base-file-list th {\r\n\twhite-space: nowrap;\r\n}\r\n</style>\r\n\r\n<template>\r\n\t<div>\r\n\t\t<v-data-table v-model=\"innerValue\" v-bind=\"$props\"\r\n\t\t\t:items=\"innerFilelist\" item-key=\"name\" :headers=\"headers || defaultHeaders\" show-select \r\n\t\t\t:loading=\"loading || innerLoading\"\r\n\t\t\t:custom-sort=\"sort\" :sort-by.sync=\"internalSortBy\" :sort-desc.sync=\"internalSortDesc\" must-sort\r\n\t\t\tdisable-pagination hide-default-footer :mobile-breakpoint=\"0\"\r\n\t\t\tclass=\"base-file-list elevation-3\" :class=\"{ 'empty-table-fix' : !innerFilelist.length, 'loading-cursor' : isLoading }\">\r\n\r\n\t\t\t<template #progress>\r\n\t\t\t\t<slot name=\"progress\">\r\n\t\t\t\t\t<v-progress-linear indeterminate></v-progress-linear>\r\n\t\t\t\t</slot>\r\n\t\t\t</template>\r\n\r\n\t\t\t<template #no-data>\r\n\t\t\t\t<slot name=\"no-data\">\r\n\t\t\t\t\t<v-alert :value=\"true\" type=\"info\" class=\"text-left ma-0\" @contextmenu.prevent=\"\">\r\n\t\t\t\t\t\t{{ $t(noItemsText) }}\r\n\t\t\t\t\t</v-alert>\r\n\t\t\t\t</slot>\r\n\t\t\t</template>\r\n\r\n\t\t\t<template #item=\"props\">\r\n\t\t\t\t<tr v-ripple :active=\"props.isSelected\" @keydown.space.prevent=\"props.select(!props.isSelected)\"\r\n\t\t\t\t\t@touchstart=\"onItemTouchStart(props, $event)\" @touchend=\"onItemTouchEnd\"\r\n\t\t\t\t\t@click=\"onItemClick(props)\" @keydown.enter.prevent=\"onItemClick(props)\"\r\n\t\t\t\t\t@contextmenu.prevent=\"onItemContextmenu(props, $event)\" @keydown.escape.prevent=\"contextMenu.shown = false\"\r\n\t\t\t\t\t@dragstart=\"onItemDragStart(props.item, $event)\" @dragover=\"onItemDragOver(props.item, $event)\" @drop.prevent=\"onItemDragDrop(props.item, $event)\"\r\n\t\t\t\t\t:data-filename=\"(props.item.isDirectory ? '*' : '') + props.item.name\" draggable=\"true\" tabindex=\"0\">\r\n\r\n\t\t\t\t\t<td v-for=\"header in props.headers\" :key=\"header.value\" :class=\"{ 'pr-0': header.value === 'data-table-select' }\">\r\n\t\t\t\t\t\t<template v-if=\"header.value === 'data-table-select'\">\r\n\t\t\t\t\t\t\t<v-checkbox :input-value=\"props.isSelected\" @touchstart.stop=\"\" @touchend.stop=\"\" @click.stop.prevent=\"props.select(!props.isSelected)\" primary hide-details class=\"mt-n1\" tabindex=\"-1\"></v-checkbox>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else-if=\"header.value === 'name'\">\r\n\t\t\t\t\t\t\t<div class=\"d-inline-flex align-center\">\r\n\t\t\t\t\t\t\t\t<slot :name=\"`${props.item.isDirectory ? 'folder' : 'file'}.${props.item.name}`\">\r\n\t\t\t\t\t\t\t\t\t<v-icon class=\"mr-1\">{{ props.item.isDirectory ? folderIcon : fileIcon }}</v-icon> {{ props.item.name }}\r\n\t\t\t\t\t\t\t\t</slot>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else-if=\"header.unit === 'bytes'\">\r\n\t\t\t\t\t\t\t{{ (props.item[header.value] !== null) ? $displaySize(props.item[header.value]) : '' }}\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else-if=\"header.unit === 'date'\">\r\n\t\t\t\t\t\t\t{{ props.item.lastModified ? props.item.lastModified.toLocaleString() : $t('generic.noValue') }}\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else-if=\"header.unit === 'filaments'\">\r\n\t\t\t\t\t\t\t<v-tooltip bottom :disabled=\"!props.item[header.value] || props.item[header.value].length <= 1\">\r\n\t\t\t\t\t\t\t\t<template #activator=\"{ on }\">\r\n\t\t\t\t\t\t\t\t\t<span v-on=\"on\">\r\n\t\t\t\t\t\t\t\t\t\t{{ displayLoadingValue(props.item, header.value, 1, 'mm') }}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</template>\r\n\r\n\t\t\t\t\t\t\t\t{{ $display(props.item[header.value], 1, 'mm') }}\r\n\t\t\t\t\t\t\t</v-tooltip>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else-if=\"header.unit === 'time'\">\r\n\t\t\t\t\t\t\t{{ displayTimeValue(props.item, header.value) }}\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t{{ displayLoadingValue(props.item, header.value, header.precision, header.unit) }}\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t</template>\r\n\t\t</v-data-table>\r\n\r\n\t\t<v-menu v-model=\"contextMenu.shown\" :position-x=\"contextMenu.x\" :position-y=\"contextMenu.y\" absolute offset-y>\r\n\t\t\t<v-list>\r\n\t\t\t\t<slot name=\"context-menu\"></slot>\r\n\r\n\t\t\t\t<v-list-item v-show=\"!noDownload && innerValue.length === 1 && filesSelected\" @click=\"download\">\r\n\t\t\t\t\t<v-icon class=\"mr-1\">mdi-cloud-download</v-icon> {{ $tc('list.baseFileList.download', innerValue.length) }}\r\n\t\t\t\t</v-list-item>\r\n\t\t\t\t<v-list-item v-show=\"!noEdit && innerValue.length === 1 && filesSelected\" :disabled=\"!canEditFile\" @click=\"edit(innerValue[0])\">\r\n\t\t\t\t\t<v-icon class=\"mr-1\">mdi-file-document-edit</v-icon> {{ $t('list.baseFileList.edit') }}\r\n\t\t\t\t</v-list-item>\r\n\t\t\t\t<v-list-item v-show=\"!noRename && innerValue.length === 1\" @click=\"rename\">\r\n\t\t\t\t\t<v-icon class=\"mr-1\">mdi-rename-box</v-icon> {{ $t('list.baseFileList.rename') }}\r\n\t\t\t\t</v-list-item>\r\n\t\t\t\t<v-list-item v-show=\"!noDelete\" @click=\"remove\">\r\n\t\t\t\t\t<v-icon class=\"mr-1\">mdi-delete</v-icon> {{ $t('list.baseFileList.delete') }}\r\n\t\t\t\t</v-list-item>\r\n\t\t\t\t<v-list-item v-show=\"!foldersSelected && innerValue.length > 1\" @click=\"downloadZIP\">\r\n\t\t\t\t\t<v-icon class=\"mr-1\">mdi-package-down</v-icon> {{ $t('list.baseFileList.downloadZIP') }}\r\n\t\t\t\t</v-list-item>\r\n\t\t\t</v-list>\r\n\t\t</v-menu>\r\n\r\n\t\t<file-edit-dialog :shown.sync=\"editDialog.shown\" :filename=\"editDialog.filename\" v-model=\"editDialog.content\" @editComplete=\"$emit('fileEdited', $event)\"></file-edit-dialog>\r\n\t\t<input-dialog :shown.sync=\"renameDialog.shown\" :title=\"$t('dialog.renameFile.title')\" :prompt=\"$t('dialog.renameFile.prompt')\" :preset=\"renameDialog.item && renameDialog.item.name\" @confirmed=\"renameCallback\"></input-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n'use strict'\r\n\r\nimport JSZip from 'jszip'\r\nimport saveAs from 'file-saver'\r\nimport { VDataTable } from 'vuetify/lib'\r\n\r\nimport Vue from 'vue'\r\nimport { mapState, mapGetters, mapActions, mapMutations } from 'vuex'\r\n\r\nimport i18n from '../../i18n'\r\nimport { defaultMachine, getModifiedDirectories } from '../../store/machine'\r\nimport { DisconnectedError, OperationCancelledError } from '../../utils/errors.js'\r\nimport Path from '../../utils/path.js'\r\n\r\nconst maxEditFileSize = 15728640;\t\t// 15 MiB\r\n\r\nexport default {\r\n\tprops: {\r\n\t\theaders: Array,\r\n\t\tsortTable: String,\r\n\t\tdirectory: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\tfilelist: Array,\r\n\t\tvalue: Array,\r\n\t\tfileIcon: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'mdi-file'\r\n\t\t},\r\n\t\tfolderIcon: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'mdi-folder'\r\n\t\t},\r\n\t\tloading: Boolean,\r\n\t\tdoingFileOperation: Boolean,\r\n\t\tnoDragDrop: Boolean,\r\n\t\tnoDownload: Boolean,\r\n\t\tnoEdit: Boolean,\r\n\t\tnoFilesText:\r\n\t\t{\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t},\r\n\t\tnoRename: Boolean,\r\n\t\tnoDelete: Boolean\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState(['selectedMachine']),\r\n\t\t...mapGetters(['isConnected']),\r\n\t\t...mapState('machine', ['isReconnecting']),\r\n\t\t...mapState('machine/cache', ['sorting']),\r\n\t\t...mapState('machine/model', ['volumes']),\r\n\t\tdefaultHeaders() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: i18n.t('list.baseFileList.fileName'),\r\n\t\t\t\t\tvalue: 'name'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: i18n.t('list.baseFileList.size'),\r\n\t\t\t\t\tvalue: 'size',\r\n\t\t\t\t\tunit: 'bytes'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: i18n.t('list.baseFileList.lastModified'),\r\n\t\t\t\t\tvalue: 'lastModified',\r\n\t\t\t\t\tunit: 'date'\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t},\r\n\t\tisLoading() {\r\n\t\t\treturn this.loading || this.innerLoading || this.doingFileOperation || this.innerDoingFileOperation;\r\n\t\t},\r\n\t\tfoldersSelected() {\r\n\t\t\treturn this.innerValue.some(item => item.isDirectory)\r\n\t\t},\r\n\t\tfilesSelected() {\r\n\t\t\treturn this.innerValue.some(item => !item.isDirectory)\r\n\t\t},\r\n\t\tcanEditFile() {\r\n\t\t\treturn (this.innerValue.length > 0) && (this.innerValue[0].size < maxEditFileSize);\r\n\t\t},\r\n\t\tnoItemsText() {\r\n\t\t\tif (this.selectedMachine === defaultMachine) {\r\n\t\t\t\treturn this.noFilesText;\r\n\t\t\t}\r\n\t\t\tconst volume = Path.getVolume(this.innerDirectory);\r\n\t\t\treturn (volume >= 0 && volume < this.volumes.length && this.volumes[volume].mounted) ? this.noFilesText : 'list.baseFileList.driveUnmounted';\r\n\t\t},\r\n\t\tinternalSortBy: {\r\n\t\t\tget() { return this.sorting[this.sortTable].column; },\r\n\t\t\tset(value) {\r\n\t\t\t\tthis.setSorting({ table: this.sortTable, column: value, descending: this.internalSortDesc });\r\n\t\t\t}\r\n\t\t},\r\n\t\tinternalSortDesc: {\r\n\t\t\tget() { return this.sorting[this.sortTable].descending; },\r\n\t\t\tset(value) {\r\n\t\t\t\tthis.setSorting({ table: this.sortTable, column: this.internalSortBy, descending: value });\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tunsubscribe: undefined,\r\n\t\t\twasMounted: false,\r\n\t\t\tinitialDirectory: this.directory,\r\n\t\t\tinnerDirectory: this.directory,\r\n\t\t\tinnerFilelist: [],\r\n\t\t\tinnerLoading: false,\r\n\t\t\tinnerDoingFileOperation: false,\r\n\t\t\tinnerValue: [],\r\n\t\t\tprevSelection: [],\r\n\t\t\tcontextMenu: {\r\n\t\t\t\tshown: false,\r\n\t\t\t\ttouchTimer: undefined,\r\n\t\t\t\tx: 0,\r\n\t\t\t\ty: 0\r\n\t\t\t},\r\n\t\t\teditDialog: {\r\n\t\t\t\tshown: false,\r\n\t\t\t\tfilename: '',\r\n\t\t\t\tcontent: ''\r\n\t\t\t},\r\n\t\t\trenameDialog: {\r\n\t\t\t\tshown: false,\r\n\t\t\t\tdirectory: '',\r\n\t\t\t\titem: null\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\textends: VDataTable,\r\n\tmethods: {\r\n\t\t...mapActions('machine', {\r\n\t\t\tmachineDownload: 'download',\r\n\t\t\tmachineMove: 'move',\r\n\t\t\tmachineDelete: 'delete',\r\n\t\t\tgetFileList: 'getFileList'\r\n\t\t}),\r\n\t\t...mapMutations('machine/cache', ['setSorting']),\r\n\t\ttoggleAll() {\r\n\t\t\tthis.innerValue = this.innerValue.length ? [] : this.innerFilelist.slice();\r\n\t\t},\r\n\t\tsort(items, sortBy, sortDesc) {\r\n\t\t\tsortBy = sortBy.length ? sortBy[0] : 'name';\r\n\t\t\tsortDesc = sortDesc[0];\r\n\r\n\t\t\t// Sort by index\r\n\t\t\titems.sort(function(a, b) {\r\n\t\t\t\tif (a[sortBy] === b[sortBy]) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (a[sortBy] === null || a[sortBy] === undefined) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\t\t\t\tif (b[sortBy] === null || b[sortBy] === undefined) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\tif (a[sortBy].constructor === String && b[sortBy].constructor === String) {\r\n\t\t\t\t\treturn a[sortBy].localeCompare(b[sortBy], undefined, { sensivity: 'base' });\r\n\t\t\t\t}\r\n\t\t\t\tif (a[sortBy] instanceof Array && b[sortBy] instanceof Array) {\r\n\t\t\t\t\tconst reducedA = a[sortBy].length ? a.filament.reduce((a, b) => a + b) : 0;\r\n\t\t\t\t\tconst reducedB = b[sortBy].length ? b.filament.reduce((a, b) => a + b) : 0;\r\n\t\t\t\t\treturn reducedA - reducedB;\r\n\t\t\t\t}\r\n\t\t\t\treturn a[sortBy] - b[sortBy];\r\n\t\t\t});\r\n\r\n\t\t\t// Deal with descending order\r\n\t\t\tif (sortDesc) {\r\n\t\t\t\titems.reverse();\r\n\t\t\t}\r\n\r\n\t\t\t// Then make sure directories come first\r\n\t\t\titems.sort((a, b) => (a.isDirectory === b.isDirectory) ? 0 : (a.isDirectory ? -1 : 1));\r\n\t\t\treturn items;\r\n\t\t},\r\n\t\tasync refresh() {\r\n\t\t\tawait this.loadDirectory(this.innerDirectory);\r\n\t\t},\r\n\t\tasync loadDirectory(directory) {\r\n\t\t\tif (!this.isConnected) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Update our path even if we're still busy loading\r\n\t\t\tthis.innerDirectory = directory;\r\n\t\t\tif (this.innerLoading) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Make sure the current volume is actually available\r\n\t\t\tconst volume = Path.getVolume(this.innerDirectory);\r\n\t\t\tif (volume < 0 || volume >= this.volumes.length || !this.volumes[volume].mounted) {\r\n\t\t\t\tthis.innerDirectory = (volume === 0) ? this.initialDirectory : `${volume}:`;\r\n\t\t\t\tthis.innerFilelist = [];\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Load file list\r\n\t\t\tthis.innerLoading = true;\r\n\t\t\ttry {\r\n\t\t\t\tconst files = await this.getFileList(directory);\r\n\r\n\t\t\t\t// Create missing props if required\r\n\t\t\t\tif (this.headers) {\r\n\t\t\t\t\tfiles.forEach(function(item) {\r\n\t\t\t\t\t\tthis.headers.forEach(function(header) {\r\n\t\t\t\t\t\t\tif (item[header.value] === undefined) {\r\n\t\t\t\t\t\t\t\tVue.set(item, header.value, undefined);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}, this);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if another directory was requested while files were being loaded\r\n\t\t\t\tif (directory !== this.innerDirectory) {\r\n\t\t\t\t\tthis.innerLoading = false;\r\n\t\t\t\t\tthis.loadDirectory(this.innerDirectory);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Assign new file list\r\n\t\t\t\tthis.innerFilelist = files;\r\n\t\t\t\tthis.innerValue = [];\r\n\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\tthis.$emit('directoryLoaded', directory);\r\n\t\t\t\t});\r\n\t\t\t} catch (e) {\r\n\t\t\t\tif (!(e instanceof DisconnectedError)) {\r\n\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\tthis.$makeNotification('error', this.$t('error.filelistRequestFailed'), e.message);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.innerLoading = false;\r\n\t\t},\r\n\t\tdisplayLoadingValue(item, prop, precision, unit = '') {\r\n\t\t\tif (item.isDirectory) {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t\tif (!item[prop]) {\r\n\t\t\t\treturn this.$t((item[prop] === undefined) ? 'generic.loading' : 'generic.noValue');\r\n\t\t\t}\r\n\r\n\t\t\tlet displayValue;\r\n\t\t\tif (item[prop] instanceof Array) {\r\n\t\t\t\tif (!item[prop].length) {\r\n\t\t\t\t\treturn this.$t('generic.noValue');\r\n\t\t\t\t}\r\n\t\t\t\tdisplayValue = item[prop].reduce((a, b) => a + b);\r\n\t\t\t} else {\r\n\t\t\t\tdisplayValue = item[prop];\r\n\t\t\t}\r\n\r\n\t\t\tif (precision !== undefined) {\r\n\t\t\t\tdisplayValue = displayValue.toFixed(precision);\r\n\t\t\t}\r\n\t\t\treturn `${displayValue} ${unit}`;\r\n\t\t},\r\n\t\tdisplayTimeValue(item, prop) {\r\n\t\t\tif (item.isDirectory) {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t\treturn (item[prop] !== null) ? this.$displayTime(item[prop]) : this.$t('generic.noValue');\r\n\t\t},\r\n\t\tonItemTouchStart(props, e) {\r\n\t\t\tconst that = this;\r\n\t\t\tthis.contextMenu.touchTimer = setTimeout(function() {\r\n\t\t\t\tthat.contextMenu.touchTimer = undefined;\r\n\t\t\t\tthat.onItemContextmenu(props, { clientX: e.targetTouches[0].clientX, clientY: e.targetTouches[0].clientY });\r\n\t\t\t}, 1000);\r\n\t\t},\r\n\t\tonItemTouchEnd() {\r\n\t\t\tif (this.contextMenu.touchTimer) {\r\n\t\t\t\tclearTimeout(this.contextMenu.touchTimer);\r\n\t\t\t\tthis.contextMenu.touchTimer = undefined;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonItemClick(props) {\r\n\t\t\tif (props.item.isDirectory) {\r\n\t\t\t\tthis.loadDirectory(Path.combine(this.innerDirectory, props.item.name));\r\n\t\t\t} else {\r\n\t\t\t\tthis.$emit('fileClicked', props.item);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonItemContextmenu(props, e) {\r\n\t\t\tif (this.contextMenu.shown) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.onItemTouchEnd();\r\n\r\n\t\t\t// Deal with selection\r\n\t\t\tthis.prevSelection = this.innerValue;\r\n\t\t\tif (!props.isSelected) {\r\n\t\t\t\tthis.innerValue = [];\r\n\t\t\t\tthis.$nextTick(() => props.select(true));\r\n\t\t\t}\r\n\r\n\t\t\t// Open the context menu\r\n\t\t\tthis.contextMenu.shown = false;\r\n\t\t\tthis.contextMenu.x = e.clientX;\r\n\t\t\tthis.contextMenu.y = e.clientY;\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.contextMenu.shown = true;\r\n\t\t\t});\r\n\t\t},\r\n\t\tonItemDragStart(item, e) {\r\n\t\t\tif (this.noDragDrop || this.contextMenu.touchTimer || this.contextMenu.shown) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst itemsToDrag = this.innerValue;\r\n\t\t\tif (itemsToDrag.indexOf(item) === -1) {\r\n\t\t\t\titemsToDrag.push(item);\r\n\t\t\t}\r\n\t\t\te.dataTransfer.setData('application/json', JSON.stringify({\r\n\t\t\t\ttype: 'dwcFiles',\r\n\t\t\t\tdirectory: this.innerDirectory,\r\n\t\t\t\titems: itemsToDrag\r\n\t\t\t}));\r\n\t\t\te.dataTransfer.effectAllowed = 'move';\r\n\r\n\t\t\tconst table = this.$el.querySelector('table'), firstRow = table.tBodies[0].rows[0];\r\n\t\t\tconst tableClone = table.cloneNode(true), itemFilename = (item.isDirectory ? '*' : '') + item.name;\r\n\t\t\tlet offsetY = 0, countingOffset = true;\r\n\r\n\t\t\ttableClone.tHead.remove();\r\n\t\t\tArray.from(tableClone.tBodies[0].rows).forEach(function(row) {\r\n\t\t\t\tconst filename = row.dataset.filename;\r\n\t\t\t\tif (itemsToDrag.some(item => (item.isDirectory ? '*' : '') + item.name === filename)) {\r\n\t\t\t\t\tArray.from(row.children).forEach(function(td, index) {\r\n\t\t\t\t\t\tif (td.tagName === 'TD') {\r\n\t\t\t\t\t\t\ttd.style.width = `${firstRow.children[index].offsetWidth}px`;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttd.remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (countingOffset) {\r\n\t\t\t\t\t\tif (filename === itemFilename) {\r\n\t\t\t\t\t\t\tcountingOffset = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\toffsetY += firstRow.offsetHeight;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\trow.remove();\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t\ttableClone.style.backgroundColor = this.$vuetify.theme.isDark ? '#424242' : '#FFFFFF';\r\n\t\t\ttableClone.style.opacity = 0.7;\r\n\t\t\ttableClone.style.position = 'absolute';\r\n\t\t\ttableClone.style.pointerEvents = 'none';\r\n\t\t\tArray.from(tableClone.querySelectorAll('[class^=\"v-ripple\"]')).forEach(function(item) {\r\n\t\t\t\titem.classList = Array.from(item.classList).filter(c => !c.startsWith('v-ripple'));\r\n\t\t\t});\r\n\t\t\ttable.parentNode.append(tableClone);\r\n\r\n\t\t\tconst x = e.clientX - table.getClientRects()[0].left;\r\n\t\t\tconst y = e.clientY - e.target.closest('tr').getClientRects()[0].top + offsetY;\r\n\t\t\te.dataTransfer.setDragImage(tableClone, x, y);\r\n\r\n\t\t\tsetTimeout(() => tableClone.remove(), 0);\r\n\t\t},\r\n\t\tonItemDragOver(item, e) {\r\n\t\t\tif (!this.noDragDrop && item.isDirectory) {\r\n\t\t\t\tconst jsonData = e.dataTransfer.getData('application/json');\r\n\t\t\t\tif (jsonData) {\r\n\t\t\t\t\tconst data = JSON.parse(jsonData);\r\n\t\t\t\t\tif (data.type === 'dwcFiles' && !data.items.some(dataItem => dataItem.isDirectory && dataItem.name === item.name)) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Fix for Chrome: It does not grant access to dataTransfer on the same domain \"for security reasons\"...\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync onItemDragDrop(item, e) {\r\n\t\t\tconst jsonData = e.dataTransfer.getData('application/json');\r\n\t\t\tif (jsonData) {\r\n\t\t\t\tconst data = JSON.parse(jsonData);\r\n\t\t\t\tif (data.type === 'dwcFiles' && !data.items.some(dataItem => dataItem.isDirectory && dataItem.name === item.name)) {\r\n\t\t\t\t\tconst directory = this.innerDirectory;\r\n\t\t\t\t\tfor (let i = 0; i < data.items.length; i++) {\r\n\t\t\t\t\t\tconst from = Path.combine(data.directory, data.items[i].name);\r\n\t\t\t\t\t\tconst to = Path.combine(directory, item.name, data.items[i].name);\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tawait this.machineMove({ from, to });\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tthis.$makeNotification('error', `Failed to move ${data.items[i].name} to ${directory}`, e.message);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync download(item) {\r\n\t\t\ttry {\r\n\t\t\t\tconst filename = (item && item.name) ? item.name : this.innerValue[0].name;\r\n\t\t\t\tconst blob = await this.machineDownload({ filename: Path.combine(this.innerDirectory, filename), type: 'blob' });\r\n\t\t\t\tsaveAs(blob, filename);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tif (!(e instanceof DisconnectedError) && !(e instanceof OperationCancelledError)) {\r\n\t\t\t\t\t// should be handled before we get here\r\n\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync edit(item) {\r\n\t\t\ttry {\r\n\t\t\t\tconst filename = Path.combine(this.innerDirectory, item.name);\r\n\t\t\t\tconst response = await this.machineDownload({ filename, type: 'text', showSuccess: false });\r\n\t\t\t\tthis.editDialog.filename = filename;\r\n\t\t\t\tthis.editDialog.content = response;\r\n\t\t\t\tthis.editDialog.shown = true;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tif (!(e instanceof DisconnectedError) && !(e instanceof OperationCancelledError)) {\r\n\t\t\t\t\t// should be handled before we get here\r\n\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync rename(item) {\r\n\t\t\tthis.renameDialog.directory = this.innerDirectory;\r\n\t\t\tthis.renameDialog.item = (item && item.name) ? item : this.innerValue[0];\r\n\t\t\tthis.renameDialog.shown = true;\r\n\t\t},\r\n\t\tasync renameCallback(newFilename) {\r\n\t\t\tconst oldFilename = this.renameDialog.item.name;\r\n\t\t\tif (this.innerDoingFileOperation) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.innerDoingFileOperation = true;\r\n\t\t\ttry {\r\n\t\t\t\tawait this.machineMove({\r\n\t\t\t\t\tfrom: Path.combine(this.renameDialog.directory, oldFilename),\r\n\t\t\t\t\tto: Path.combine(this.renameDialog.directory, newFilename)\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.innerFilelist.some(function(file) {\r\n\t\t\t\t\tif (file.isDirectory === this.isDirectory && file.name === this.name) {\r\n\t\t\t\t\t\tfile.name = newFilename;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, this.renameDialog.item);\r\n\r\n\t\t\t\tthis.$makeNotification('success', this.$t('notification.rename.success', [oldFilename, newFilename]));\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.warn(e);\r\n\t\t\t\tthis.$log('error', this.$t('notification.rename.error', [oldFilename, newFilename]), e.message);\r\n\t\t\t}\r\n\t\t\tthis.innerDoingFileOperation = false;\r\n\t\t},\r\n\t\tasync remove(items) {\r\n\t\t\tif (!items || !(items instanceof Array)) {\r\n\t\t\t\titems = this.innerValue.slice();\r\n\t\t\t}\r\n\r\n\t\t\tif (this.innerDoingFileOperation) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.innerDoingFileOperation = true;\r\n\t\t\tconst deletedItems = [], directory = this.directory;\r\n\t\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst item = items[i];\r\n\t\t\t\t\tawait this.machineDelete(Path.combine(directory, item.name));\r\n\r\n\t\t\t\t\tdeletedItems.push(items[i]);\r\n\t\t\t\t\tthis.innerFilelist = this.innerFilelist.filter(file => file.isDirectory !== item.isDirectory || file.name !== item.name);\r\n\t\t\t\t\tthis.innerValue = this.innerValue.filter(file => file.isDirectory !== item.isDirectory || file.name !== item.name);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tthis.$makeNotification('error', this.$t('notification.delete.errorTitle', [items[i].name]), items[i].isDirectory ? this.$t('notification.delete.errorMessageDirectory') : e.message);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (deletedItems.length) {\r\n\t\t\t\tthis.$log('success', (deletedItems.length > 1) ? this.$t('notification.delete.successMultiple', [deletedItems.length]) : this.$t('notification.delete.success', [deletedItems[0].name]));\r\n\t\t\t}\r\n\t\t\tthis.innerDoingFileOperation = false;\r\n\t\t},\r\n\t\tasync downloadZIP(items) {\r\n\t\t\tif (!items || !(items instanceof Array)) { items = this.innerValue.slice(); }\r\n\t\t\tconst directory = this.directory;\r\n\r\n\t\t\t// Download files\r\n\t\t\tconst zip = new JSZip();\r\n\t\t\tfor (let i = 0; i < items.length; i++) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst blob = await this.machineDownload({ filename: Path.combine(directory, items[i].name), type: 'blob', num: i + 1, count: items.length });\r\n\t\t\t\t\tzip.file(items[i].name, blob);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tif (!(e instanceof DisconnectedError) && !(e instanceof OperationCancelledError)) {\r\n\t\t\t\t\t\t// should be handled before we get here\r\n\t\t\t\t\t\tconsole.warn(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Compress files and save the new archive\r\n\t\t\tconst notification = this.$makeNotification('info', this.$t('notification.compress.title'), this.$t('notification.compress.message'));\r\n\t\t\ttry {\r\n\t\t\t\tconst zipBlob = await zip.generateAsync({ type: 'blob' });\r\n\t\t\t\tsaveAs(zipBlob, 'download.zip');\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.warn(e);\r\n\t\t\t\tthis.$makeNotification('error', this.$t('notification.compress.errorTitle'), e.message);\r\n\t\t\t}\r\n\t\t\tnotification.hide();\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\t// Perform initial load\r\n\t\tif (this.isConnected) {\r\n\t\t\tconst volume = Path.getVolume(this.innerDirectory);\r\n\t\t\tthis.wasMounted = (volume >= 0) && (volume >= this.volumes.length) && this.volumes[volume].mounted;\r\n\t\t\tthis.refresh();\r\n\t\t}\r\n\r\n\t\t// Keep track of file changes\r\n\t\tconst that = this;\r\n\t\tthis.unsubscribe = this.$store.subscribeAction(async function(action, state) {\r\n\t\t\tif (!that.doingFileOperation && !that.innerDoingFileOperation &&\r\n\t\t\t\tgetModifiedDirectories(action, state).some(directory => Path.equals(directory, that.innerDirectory))) {\r\n\t\t\t\t// Refresh the list when a file or directory has been changed\r\n\t\t\t\tawait that.refresh();\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\tthis.unsubscribe();\r\n\t},\r\n\twatch: {\r\n\t\tisConnected(to) {\r\n\t\t\tif (to) {\r\n\t\t\t\tthis.refresh();\r\n\t\t\t} else {\r\n\t\t\t\tthis.innerDirectory = this.initialDirectory;\r\n\t\t\t\tthis.innerFilelist = [];\r\n\r\n\t\t\t\tthis.editDialog.shown = false;\r\n\t\t\t\tthis.renameDialog.shown = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tselectedMachine() {\r\n\t\t\t// TODO store current directory per selected machine\r\n\t\t\tthis.innerDirectory = this.initialDirectory;\r\n\t\t\tthis.innerFilelist = [];\r\n\r\n\t\t\tthis.editDialog.shown = false;\r\n\t\t\tthis.renameDialog.shown = false;\r\n\t\t},\r\n\t\tvolumes: {\r\n\t\t\tdeep: true,\r\n\t\t\thandler() {\r\n\t\t\t\tif (this.isConnected) {\r\n\t\t\t\t\tconst volume = Path.getVolume(this.directory);\r\n\t\t\t\t\tif (volume >= 0 && volume < this.volumes.length) {\r\n\t\t\t\t\t\tconst mounted = this.volumes[volume].mounted;\r\n\t\t\t\t\t\tif (this.wasMounted !== mounted) {\r\n\t\t\t\t\t\t\tthis.wasMounted = mounted;\r\n\t\t\t\t\t\t\tthis.refresh();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.wasMounted = false;\r\n\t\t\t\t\t\tthis.refresh();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdirectory(to) {\r\n\t\t\tif (to !== this.innerDirectory) {\r\n\t\t\t\tthis.loadDirectory(to);\r\n\t\t\t}\r\n\t\t},\r\n\t\tinnerDirectory(to) {\r\n\t\t\tif (this.directory !== to) {\r\n\t\t\t\tthis.$emit('update:directory', to);\r\n\t\t\t}\r\n\t\t},\r\n\t\tinnerFilelist(to) {\r\n\t\t\tif (this.filelist !== to) {\r\n\t\t\t\tthis.$emit('update:filelist', to);\r\n\t\t\t}\r\n\t\t},\r\n\t\tinnerLoading(to) {\r\n\t\t\tif (this.loading !== to) {\r\n\t\t\t\tthis.$emit('update:loading', to);\r\n\t\t\t}\r\n\t\t},\r\n\t\tinnerValue(to) {\r\n\t\t\tif (this.value !== to) {\r\n\t\t\t\tthis.$emit('input', to);\r\n\t\t\t}\r\n\t\t},\r\n\t\t'contextMenu.shown'(to) {\r\n\t\t\tif (!to) {\r\n\t\t\t\t// Restore previously selected items\r\n\t\t\t\tthis.innerValue = this.prevSelection;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n"],"sourceRoot":"src/components/lists"}]}