{"remainingRequest":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\plugins\\logging.js","dependencies":[{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\plugins\\logging.js","mtime":1592248188615},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGgiOwppbXBvcnQgeyBtYWtlTm90aWZpY2F0aW9uIH0gZnJvbSAnLi90b2FzdC5qcyc7CmltcG9ydCBpMThuIGZyb20gJy4uL2kxOG4nOwppbXBvcnQgeyBkZWZhdWx0TWFjaGluZSB9IGZyb20gJy4uL3N0b3JlL21hY2hpbmUnOwp2YXIgc3RvcmU7CmV4cG9ydCBmdW5jdGlvbiBsb2codHlwZSwgdGl0bGUsIG1lc3NhZ2UpIHsKICB2YXIgaG9zdG5hbWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHN0b3JlLnN0YXRlLnNlbGVjdGVkTWFjaGluZTsKICBtYWtlTm90aWZpY2F0aW9uKHR5cGUsIHRpdGxlLCBtZXNzYWdlKTsKICBzdG9yZS5jb21taXQoIm1hY2hpbmVzLyIuY29uY2F0KGhvc3RuYW1lLCAiL2xvZyIpLCB7CiAgICBkYXRlOiBuZXcgRGF0ZSgpLAogICAgdHlwZTogdHlwZSwKICAgIHRpdGxlOiB0aXRsZSwKICAgIG1lc3NhZ2U6IG1lc3NhZ2UKICB9KTsKfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKCmV4cG9ydCBmdW5jdGlvbiBsb2dDb2RlKCkgewogIHZhciBjb2RlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnJzsKICB2YXIgcmVzcG9uc2UgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDsKICB2YXIgaG9zdG5hbWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHN0b3JlLnN0YXRlLnNlbGVjdGVkTWFjaGluZTsKICB2YXIgZnJvbUlucHV0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBmYWxzZTsKCiAgaWYgKCFjb2RlICYmICFyZXNwb25zZSkgewogICAgLy8gTWFrZSBzdXJlIHRoZXJlIGlzIHNvbWV0aGluZyB0byBsb2cuLi4KICAgIHJldHVybjsKICB9IC8vIERldGVybWluZSB0eXBlCgoKICB2YXIgdHlwZSA9ICdpbmZvJywKICAgICAgdG9Mb2cgPSByZXNwb25zZTsKCiAgaWYgKHJlc3BvbnNlLnN0YXJ0c1dpdGgoJ0Vycm9yOiAnKSkgewogICAgdHlwZSA9ICdlcnJvcic7CiAgfSBlbHNlIGlmIChyZXNwb25zZS5zdGFydHNXaXRoKCdXYXJuaW5nOiAnKSkgewogICAgdHlwZSA9ICd3YXJuaW5nJzsKICB9IGVsc2UgaWYgKHJlc3BvbnNlID09PSAnJykgewogICAgdHlwZSA9ICdzdWNjZXNzJzsKICB9IC8vIExvZyBpdAoKCiAgdmFyIHJlc3BvbnNlTGluZXMgPSB0b0xvZy5zcGxpdCgiXG4iKTsKCiAgaWYgKGhvc3RuYW1lID09PSBzdG9yZS5zdGF0ZS5zZWxlY3RlZE1hY2hpbmUpIHsKICAgIHZhciB0aXRsZSA9IGNvZGUsCiAgICAgICAgbWVzc2FnZSA9IHJlc3BvbnNlTGluZXMuam9pbignPGJyPicpOwoKICAgIGlmIChyZXNwb25zZUxpbmVzLmxlbmd0aCA+IDMpIHsKICAgICAgdGl0bGUgPSBjb2RlID09PSAnJyA/IGkxOG4udCgnbm90aWZpY2F0aW9uLnJlc3BvbnNlVG9vTG9uZycpIDogY29kZTsKICAgICAgbWVzc2FnZSA9IGNvZGUgPT09ICcnID8gJycgOiBpMThuLnQoJ25vdGlmaWNhdGlvbi5yZXNwb25zZVRvb0xvbmcnKTsKICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gJycpIHsKICAgICAgdGl0bGUgPSByZXNwb25zZUxpbmVzWzBdOwogICAgICBtZXNzYWdlID0gcmVzcG9uc2VMaW5lcy5zbGljZSgxKS5qb2luKCc8YnI+Jyk7CiAgICB9CgogICAgbWFrZU5vdGlmaWNhdGlvbih0eXBlLCB0aXRsZSwgbWVzc2FnZSk7CiAgfQoKICBzdG9yZS5jb21taXQoIm1hY2hpbmVzLyIuY29uY2F0KGhvc3RuYW1lLCAiL2xvZyIpLCB7CiAgICBkYXRlOiBuZXcgRGF0ZSgpLAogICAgdHlwZTogdHlwZSwKICAgIHRpdGxlOiBjb2RlLAogICAgbWVzc2FnZTogcmVzcG9uc2UKICB9KTsKfQpleHBvcnQgZnVuY3Rpb24gbG9nR2xvYmFsKHR5cGUsIHRpdGxlLCBtZXNzYWdlKSB7CiAgaWYgKHN0b3JlLnN0YXRlLnNlbGVjdGVkTWFjaGluZSAhPT0gZGVmYXVsdE1hY2hpbmUpIHsKICAgIGxvZyh0eXBlLCB0aXRsZSwgbWVzc2FnZSk7CiAgfSBlbHNlIHsKICAgIG1ha2VOb3RpZmljYXRpb24odHlwZSwgdGl0bGUsIG1lc3NhZ2UpOwogIH0KCiAgc3RvcmUuY29tbWl0KCJtYWNoaW5lcy8iLmNvbmNhdChkZWZhdWx0TWFjaGluZSwgIi9sb2ciKSwgewogICAgZGF0ZTogbmV3IERhdGUoKSwKICAgIHR5cGU6IHR5cGUsCiAgICB0aXRsZTogdGl0bGUsCiAgICBtZXNzYWdlOiBtZXNzYWdlCiAgfSk7Cn0KZXhwb3J0IGRlZmF1bHQgewogIGluc3RhbGw6IGZ1bmN0aW9uIGluc3RhbGwoVnVlKSB7CiAgICBWdWUucHJvdG90eXBlLiRsb2cgPSBsb2c7CiAgICBWdWUucHJvdG90eXBlLiRsb2dDb2RlID0gbG9nQ29kZTsKICAgIFZ1ZS5wcm90b3R5cGUuJGxvZ0dsb2JhbCA9IGxvZ0dsb2JhbDsKICB9LAogIGluc3RhbGxTdG9yZTogZnVuY3Rpb24gaW5zdGFsbFN0b3JlKHN0b3JlSW5zdGFuY2UpIHsKICAgIHN0b3JlID0gc3RvcmVJbnN0YW5jZTsKICB9Cn07"},{"version":3,"sources":["C:/Users/jpatrick/Documents/GitHub/DuetWebControl_Fork/src/plugins/logging.js"],"names":["makeNotification","i18n","defaultMachine","store","log","type","title","message","hostname","state","selectedMachine","commit","date","Date","logCode","code","response","fromInput","toLog","startsWith","responseLines","split","join","length","t","slice","logGlobal","install","Vue","prototype","$log","$logCode","$logGlobal","installStore","storeInstance"],"mappings":"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","sourcesContent":["'use strict'\r\n\r\nimport { makeNotification } from './toast.js'\r\n\r\nimport i18n from '../i18n'\r\nimport { defaultMachine } from '../store/machine'\r\n\r\nlet store\r\n\r\nexport function log(type, title, message, hostname = store.state.selectedMachine) {\r\n\tmakeNotification(type, title, message);\r\n\tstore.commit(`machines/${hostname}/log`, { date: new Date(), type, title, message });\r\n}\r\n\r\n// eslint-disable-next-line\r\nexport function logCode(code = '', response, hostname = store.state.selectedMachine, fromInput = false) {\r\n\tif (!code && !response) {\r\n\t\t// Make sure there is something to log...\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Determine type\r\n\tlet type = 'info', toLog = response;\r\n\tif (response.startsWith('Error: ')) {\r\n\t\ttype = 'error';\r\n\t} else if (response.startsWith('Warning: ')) {\r\n\t\ttype = 'warning';\r\n\t} else if (response === '') {\r\n\t\ttype = 'success';\r\n\t}\r\n\r\n\t// Log it\r\n\tconst responseLines = toLog.split(\"\\n\")\r\n\tif (hostname === store.state.selectedMachine) {\r\n\t\tlet title = code, message = responseLines.join('<br>');\r\n\t\tif (responseLines.length > 3) {\r\n\t\t\ttitle = (code === '') ? i18n.t('notification.responseTooLong') : code;\r\n\t\t\tmessage = (code === '') ? '' : i18n.t('notification.responseTooLong');\r\n\t\t} else if (code === '') {\r\n\t\t\ttitle = responseLines[0];\r\n\t\t\tmessage = responseLines.slice(1).join('<br>');\r\n\t\t}\r\n\r\n\t\tmakeNotification(type, title, message);\r\n\t}\r\n\tstore.commit(`machines/${hostname}/log`, { date: new Date(), type, title: code, message: response });\r\n}\r\n\r\nexport function logGlobal(type, title, message) {\r\n\tif (store.state.selectedMachine !== defaultMachine) {\r\n\t\tlog(type, title, message);\r\n\t} else {\r\n\t\tmakeNotification(type, title, message);\r\n\t}\r\n\tstore.commit(`machines/${defaultMachine}/log`, { date: new Date(), type, title, message });\r\n}\r\n\r\nexport default {\r\n\tinstall(Vue) {\r\n\t\tVue.prototype.$log = log;\r\n\t\tVue.prototype.$logCode = logCode;\r\n\t\tVue.prototype.$logGlobal = logGlobal;\r\n\t},\r\n\r\n\tinstallStore(storeInstance) {\r\n\t\tstore = storeInstance;\r\n\t}\r\n}\r\n"]}]}