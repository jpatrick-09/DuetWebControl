{"remainingRequest":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vuetify-loader\\lib\\loader.js??ref--18-0!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\dialogs\\FileEditDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\dialogs\\FileEditDialog.vue","mtime":1592248188521},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KJ3VzZSBzdHJpY3QnOwoKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzpcXFVzZXJzXFxqcGF0cmlja1xcRG9jdW1lbnRzXFxHaXRIdWJcXER1ZXRXZWJDb250cm9sX0ZvcmtcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJDOlxcVXNlcnNcXGpwYXRyaWNrXFxEb2N1bWVudHNcXEdpdEh1YlxcRHVldFdlYkNvbnRyb2xfRm9ya1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCBQYXRoIGZyb20gJy4uLy4uL3V0aWxzL3BhdGguanMnOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIHNob3duOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgZmlsZW5hbWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHZhbHVlOiBTdHJpbmcKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZSgnbWFjaGluZS9tb2RlbCcsIHsKICAgIG1hY3Jvc0RpcmVjdG9yeTogZnVuY3Rpb24gbWFjcm9zRGlyZWN0b3J5KHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5kaXJlY3Rvcmllcy5tYWNyb3M7CiAgICB9LAogICAgbWVudURpcmVjdG9yeTogZnVuY3Rpb24gbWVudURpcmVjdG9yeShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuZGlyZWN0b3JpZXMubWVudTsKICAgIH0KICB9KSwgewogICAgc2hvd0dDb2RlSGVscDogZnVuY3Rpb24gc2hvd0dDb2RlSGVscCgpIHsKICAgICAgaWYgKFBhdGguc3RhcnRzV2l0aCh0aGlzLmZpbGVuYW1lLCB0aGlzLm1hY3Jvc0RpcmVjdG9yeSkpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgdmFyIG1hdGNoZXMgPSAvXC4oLiopJC8uZXhlYyh0aGlzLmZpbGVuYW1lLnRvTG93ZXJDYXNlKCkpOwogICAgICByZXR1cm4gbWF0Y2hlcyAmJiBbJy5nJywgJy5nY29kZScsICcuZ2MnLCAnLmdjbycsICcubmMnLCAnLm5nYycsICcudGFwJ10uaW5kZXhPZihtYXRjaGVzWzFdKTsKICAgIH0sCiAgICBzaG93RGlzcGxheUhlbHA6IGZ1bmN0aW9uIHNob3dEaXNwbGF5SGVscCgpIHsKICAgICAgcmV0dXJuIFBhdGguc3RhcnRzV2l0aCh0aGlzLmZpbGVuYW1lLCB0aGlzLm1lbnVEaXJlY3RvcnkpOwogICAgfQogIH0pLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbm5lclZhbHVlOiAnJywKICAgICAgdmFsdWVDaGFuZ2VkOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoe30sIG1hcEFjdGlvbnMoJ21hY2hpbmUnLCBbJ3VwbG9hZCddKSwgewogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKGZpbGVTYXZlZCkgewogICAgICBpZiAodGhpcy52YWx1ZUNoYW5nZWQgJiYgIWZpbGVTYXZlZCAmJiAhY29uZmlybSh0aGlzLiR0KCdkaWFsb2cuZmlsZUVkaXQuY29uZmlybUNsb3NlJykpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsICcnKTsKICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOnNob3duJywgZmFsc2UpOwogICAgICB0aGlzLiRyb290LiRlbWl0KCdkaWFsb2ctY2xvc2luZycpOwogICAgfSwKICAgIHNhdmU6IGZ1bmN0aW9uIHNhdmUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjb250ZW50OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBuZXcgQmxvYihbX3RoaXMuaW5uZXJWYWx1ZV0pOwoKICAgICAgICAgICAgICAgIF90aGlzLmNsb3NlKHRydWUpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudXBsb2FkKHsKICAgICAgICAgICAgICAgICAgZmlsZW5hbWU6IF90aGlzLmZpbGVuYW1lLAogICAgICAgICAgICAgICAgICBjb250ZW50OiBjb250ZW50CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgX3RoaXMuJGVtaXQoJ2VkaXRDb21wbGV0ZScsIF90aGlzLmZpbGVuYW1lKTsKCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDg7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDIpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1syLCA4XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBvbkJlZm9yZUxlYXZlOiBmdW5jdGlvbiBvbkJlZm9yZUxlYXZlKGUpIHsKICAgICAgaWYgKHRoaXMudmFsdWVDaGFuZ2VkKSB7CiAgICAgICAgLy8gQ2FuY2VsIHRoZSBldmVudC4gQ2hyb21lIGFsc28gcmVxdWlyZXMgcmV0dXJuVmFsdWUgdG8gYmUgc2V0CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGUucmV0dXJuVmFsdWUgPSAnJzsKICAgICAgfQogICAgfSwKICAgIG9uVGV4dGFyZWFUYWI6IGZ1bmN0aW9uIG9uVGV4dGFyZWFUYWIoZSkgewogICAgICB2YXIgb3JpZ2luYWxTZWxlY3Rpb25TdGFydCA9IGUudGFyZ2V0LnNlbGVjdGlvblN0YXJ0OwogICAgICB2YXIgdGV4dFN0YXJ0ID0gZS50YXJnZXQudmFsdWUuc2xpY2UoMCwgb3JpZ2luYWxTZWxlY3Rpb25TdGFydCksCiAgICAgICAgICB0ZXh0RW5kID0gZS50YXJnZXQudmFsdWUuc2xpY2Uob3JpZ2luYWxTZWxlY3Rpb25TdGFydCk7CiAgICAgIHRoaXMuaW5uZXJWYWx1ZSA9ICIiLmNvbmNhdCh0ZXh0U3RhcnQsICJcdCIpLmNvbmNhdCh0ZXh0RW5kKTsKICAgICAgZS50YXJnZXQudmFsdWUgPSB0aGlzLmlubmVyVmFsdWU7CiAgICAgIGUudGFyZ2V0LnNlbGVjdGlvbkVuZCA9IGUudGFyZ2V0LnNlbGVjdGlvblN0YXJ0ID0gb3JpZ2luYWxTZWxlY3Rpb25TdGFydCArIDE7CiAgICB9CiAgfSksCiAgd2F0Y2g6IHsKICAgIHNob3duOiBmdW5jdGlvbiBzaG93bih0bykgewogICAgICAvLyBTZXQgdGV4dGFyZWEgY29udGVudAogICAgICB0aGlzLnZhbHVlQ2hhbmdlZCA9IGZhbHNlOwogICAgICB0aGlzLmlubmVyVmFsdWUgPSB0aGlzLnZhbHVlIHx8ICcnOwoKICAgICAgaWYgKHRvKSB7CiAgICAgICAgLy8gQWRkIG5vdGlmaWNhdGlvbiBmb3IgdXNlcnMgaW4gY2FzZSBjaGFuZ2VzIGhhdmUgbm90IGJlZW4gc2F2ZWQgeWV0CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIHRoaXMub25CZWZvcmVMZWF2ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gLi4uIGFuZCB0dXJuIGl0IG9mZiBhZ2FpbiB3aGVuIHRoZSBkaWFsb2cgaXMgaGlkZGVuCiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIHRoaXMub25CZWZvcmVMZWF2ZSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["FileEditDialog.vue"],"names":[],"mappings":"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","sourcesContent":["<style>\r\n.edit-textarea {\r\n\talign-items: stretch !important;\r\n}\r\n.edit-textarea > div > div {\r\n\talign-items: stretch;\r\n\tflex-grow: 1;\r\n\tpadding-left: 0 !important;\r\n}\r\n.edit-textarea > div > div > div {\r\n\talign-items: stretch !important;\r\n}\r\n.edit-textarea textarea {\r\n\tdisplay: flex;\r\n\tflex-grow: 1;\r\n\tfont-family: monospace;\r\n\tpadding-left: 12px !important;\r\n\tmargin-top: 0 !important;\r\n\tresize: none;\r\n\t-moz-tab-size: 4;\r\n\t-o-tab-size: 4;\r\n\ttab-size: 4;\r\n}\r\n</style>\r\n\r\n<template>\r\n\t<v-dialog :value=\"shown\" @input=\"$emit('update:shown', $event)\" fullscreen hide-overlay transition=\"dialog-bottom-transition\">\r\n\t\t<v-card class=\"d-flex flex-column\">\r\n\t\t\t<v-app-bar flat dark color=\"primary\" class=\"flex-grow-0 flex-shrink-1\">\r\n\t\t\t\t<v-btn icon dark @click=\"close(false)\">\r\n\t\t\t\t\t<v-icon>mdi-close</v-icon>\r\n\t\t\t\t</v-btn>\r\n\t\t\t\t<v-toolbar-title>{{ filename }}</v-toolbar-title>\r\n\r\n\t\t\t\t<v-spacer></v-spacer>\r\n\r\n\t\t\t\t<v-btn v-if=\"showGCodeHelp\" dark text href=\"https://duet3d.dozuki.com/Wiki/Gcode\" target=\"_blank\">\r\n\t\t\t\t\t<v-icon class=\"mr-1\">mdi-help</v-icon> {{ $t('dialog.fileEdit.gcodeReference') }}\r\n\t\t\t\t</v-btn>\r\n\t\t\t\t<v-btn v-if=\"showDisplayHelp\" dark text href=\"https://duet3d.dozuki.com/Wiki/Duet_2_Maestro_12864_display_menu_system\" target=\"_blank\">\r\n\t\t\t\t\t<v-icon class=\"mr-1\">mdi-help</v-icon> {{ $t('dialog.fileEdit.menuReference') }}\r\n\t\t\t\t</v-btn>\r\n\t\t\t\t<v-btn dark text @click=\"save\">\r\n\t\t\t\t\t<v-icon class=\"mr-1\">mdi-floppy</v-icon> {{ $t('dialog.fileEdit.save') }}\r\n\t\t\t\t</v-btn>\r\n\t\t\t</v-app-bar>\r\n\r\n\t\t\t<v-textarea ref=\"textarea\" hide-details solo :rows=\"null\" class=\"edit-textarea\"\r\n\t\t\t\t\t\tautocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"\r\n\t\t\t\t\t\t:value=\"innerValue\" @input.passive=\"valueChanged = true\" @blur=\"innerValue = $event.target.value\"\r\n\t\t\t\t\t\t@keydown.tab.exact.prevent=\"onTextareaTab\" @keydown.esc.prevent.stop=\"close(false)\"></v-textarea>\r\n\t\t</v-card>\r\n\t</v-dialog>\r\n</template>\r\n\r\n<script>\r\n'use strict'\r\n\r\nimport { mapState, mapActions } from 'vuex'\r\n\r\nimport Path from '../../utils/path.js'\r\n\r\nexport default {\r\n\tprops: {\r\n\t\tshown: {\r\n\t\t\ttype: Boolean,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\tfilename: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\tvalue: String\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState('machine/model', {\r\n\t\t\tmacrosDirectory: state => state.directories.macros,\r\n\t\t\tmenuDirectory: state => state.directories.menu\r\n\t\t}),\r\n\t\tshowGCodeHelp() {\r\n\t\t\tif (Path.startsWith(this.filename, this.macrosDirectory)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tconst matches = /\\.(.*)$/.exec(this.filename.toLowerCase());\r\n\t\t\treturn matches && ['.g', '.gcode', '.gc', '.gco', '.nc', '.ngc', '.tap'].indexOf(matches[1]);\r\n\t\t},\r\n\t\tshowDisplayHelp() {\r\n\t\t\treturn Path.startsWith(this.filename, this.menuDirectory);\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tinnerValue: '',\r\n\t\t\tvalueChanged: false\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t...mapActions('machine', ['upload']),\r\n\t\tclose(fileSaved) {\r\n\t\t\tif (this.valueChanged && !fileSaved && !confirm(this.$t('dialog.fileEdit.confirmClose'))) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.$emit('input', '');\r\n\t\t\tthis.$emit('update:shown', false);\r\n\t\t\tthis.$root.$emit('dialog-closing')\r\n\t\t},\r\n\t\tasync save() {\r\n\t\t\tconst content = new Blob([this.innerValue]);\r\n\t\t\tthis.close(true);\r\n\r\n\t\t\ttry {\r\n\t\t\t\tawait this.upload({ filename: this.filename, content });\r\n\t\t\t\tthis.$emit('editComplete', this.filename);\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// TODO Optionally ask user to save file somewhere else\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBeforeLeave(e) {\r\n\t\t\tif (this.valueChanged) {\r\n\t\t\t\t// Cancel the event. Chrome also requires returnValue to be set\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.returnValue = '';\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTextareaTab(e) {\r\n\t\t\tconst originalSelectionStart = e.target.selectionStart;\r\n\t\t\tconst textStart = e.target.value.slice(0, originalSelectionStart), textEnd = e.target.value.slice(originalSelectionStart);\r\n\t\t\tthis.innerValue = `${textStart}\\t${textEnd}`;\r\n\t\t\te.target.value = this.innerValue;\r\n\t\t\te.target.selectionEnd = e.target.selectionStart = originalSelectionStart + 1;\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tshown(to) {\r\n\t\t\t// Set textarea content\r\n\t\t\tthis.valueChanged = false;\r\n\t\t\tthis.innerValue = this.value || '';\r\n\r\n\t\t\tif (to) {\r\n\t\t\t\t// Add notification for users in case changes have not been saved yet\r\n\t\t\t\twindow.addEventListener('beforeunload', this.onBeforeLeave);\r\n\t\t\t} else {\r\n\t\t\t\t// ... and turn it off again when the dialog is hidden\r\n\t\t\t\twindow.removeEventListener('beforeunload', this.onBeforeLeave);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n"],"sourceRoot":"src/components/dialogs"}]}