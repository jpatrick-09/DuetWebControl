{"remainingRequest":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vuetify-loader\\lib\\loader.js??ref--18-0!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\panels\\FanPanel.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\panels\\FanPanel.vue","mtime":1592248188561},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KJ3VzZSBzdHJpY3QnOwoKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIudG8tZml4ZWQiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJDOlxcVXNlcnNcXGpwYXRyaWNrXFxEb2N1bWVudHNcXEdpdEh1YlxcRHVldFdlYkNvbnRyb2xfRm9ya1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCB7IG1hcFN0YXRlLCBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoJ21hY2hpbmUvbW9kZWwnLCBbJ2ZhbnMnXSksIHt9LCBtYXBHZXR0ZXJzKFsndWlGcm96ZW4nXSksIHt9LCBtYXBHZXR0ZXJzKCdtYWNoaW5lL21vZGVsJywgWydjdXJyZW50VG9vbCddKSwgewogICAgY2FuQ29udHJvbEZhbnM6IGZ1bmN0aW9uIGNhbkNvbnRyb2xGYW5zKCkgewogICAgICByZXR1cm4gIXRoaXMudWlGcm96ZW4gJiYgKHRoaXMuY3VycmVudFRvb2wgJiYgdGhpcy5jdXJyZW50VG9vbC5mYW5zLmxlbmd0aCA+IDAgfHwgdGhpcy5mYW5zLnNvbWUoZnVuY3Rpb24gKGZhbikgewogICAgICAgIHJldHVybiBmYW4gJiYgIWZhbi50aGVybW9zdGF0aWMuY29udHJvbDsKICAgICAgfSkpOwogICAgfSwKICAgIGZhblZhbHVlOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIC8vIEV2ZW4gdGhvdWdoIFJSRiBhbGxvd3MgbXVsdGlwbGUgZmFucyB0byBiZSBhc3NpZ25lZCB0byBhIHRvb2wsCiAgICAgICAgLy8gd2UgYXNzdW1lIHRoZXkgYWxsIHNoYXJlIHRoZSBzYW1lIGZhbiB2YWx1ZSBpZiBzdWNoIGEgY29uZmlnIGlzIHNldAogICAgICAgIHZhciBmYW4gPSB0aGlzLmZhbiA9PT0gLTEgPyB0aGlzLmN1cnJlbnRUb29sICYmIHRoaXMuY3VycmVudFRvb2wuZmFucy5sZW5ndGggPiAwID8gdGhpcy5jdXJyZW50VG9vbC5mYW5zWzBdIDogLTEgOiB0aGlzLmZhbjsKICAgICAgICByZXR1cm4gZmFuID49IDAgJiYgZmFuIDwgdGhpcy5mYW5zLmxlbmd0aCAmJiB0aGlzLmZhbnNbZmFuXSA/IE1hdGgucm91bmQodGhpcy5mYW5zW2Zhbl0ucmVxdWVzdGVkVmFsdWUgKiAxMDApIDogMDsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHsKICAgICAgICB2YWx1ZSA9IE1hdGgubWluKDEwMCwgTWF0aC5tYXgoMCwgdmFsdWUpKSAvIDEwMDsKCiAgICAgICAgaWYgKHRoaXMuZmFuID09PSAtMSkgewogICAgICAgICAgdGhpcy5zZW5kQ29kZSgiTTEwNiBTIi5jb25jYXQodmFsdWUudG9GaXhlZCgyKSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnNlbmRDb2RlKCJNMTA2IFAiLmNvbmNhdCh0aGlzLmZhbiwgIiBTIikuY29uY2F0KHZhbHVlLnRvRml4ZWQoMikpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9KSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZmFuOiAtMQogICAgfTsKICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoe30sIG1hcEFjdGlvbnMoJ21hY2hpbmUnLCBbJ3NlbmRDb2RlJ10pLCB7CiAgICB1cGRhdGVGYW5TZWxlY3Rpb246IGZ1bmN0aW9uIHVwZGF0ZUZhblNlbGVjdGlvbigpIHsKICAgICAgaWYgKHRoaXMuZmFuID09PSAtMSkgewogICAgICAgIGlmICghdGhpcy5jdXJyZW50VG9vbCkgewogICAgICAgICAgLy8gVG9vbCBubyBsb25nZXIgc2VsZWN0ZWQsIHRyeSB0byBjaGFuZ2UgdG8gdGhlIGZpcnN0IGF2YWlsYWJsZSBmYW4KICAgICAgICAgIHRoaXMuZmFuID0gdGhpcy5mYW5zLmZpbmRJbmRleChmdW5jdGlvbiAoZmFuKSB7CiAgICAgICAgICAgIHJldHVybiBmYW4gJiYgIWZhbi50aGVybW9zdGF0aWMuY29udHJvbDsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0aGlzLmZhbiA+PSB0aGlzLmZhbnMubGVuZ3RoIHx8IHRoaXMuZmFuICE9PSAtMSAmJiB0aGlzLmZhbnNbdGhpcy5mYW5dICYmIHRoaXMuZmFuc1t0aGlzLmZhbl0udGhlcm1vc3RhdGljLmNvbnRyb2wpIHsKICAgICAgICAvLyBTZWxlY3RlZCBmYW4gaXMgbm8gbG9uZ2VyIGNvbnRyb2xsYWJsZSwgdHJ5IHRvIGNoYW5nZSB0byBhbm90aGVyIG9uZQogICAgICAgIGlmICh0aGlzLmN1cnJlbnRUb29sKSB7CiAgICAgICAgICB0aGlzLmZhbiA9IC0xOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmZhbiA9IHRoaXMuZmFucy5maW5kSW5kZXgoZnVuY3Rpb24gKGZhbikgewogICAgICAgICAgICByZXR1cm4gZmFuICYmICFmYW4udGhlcm1vc3RhdGljLmNvbnRyb2w7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9KSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy51cGRhdGVGYW5TZWxlY3Rpb24oKTsKICB9LAogIHdhdGNoOiB7CiAgICBjdXJyZW50VG9vbDogZnVuY3Rpb24gY3VycmVudFRvb2woKSB7CiAgICAgIHRoaXMudXBkYXRlRmFuU2VsZWN0aW9uKCk7CiAgICB9LAogICAgZmFuczogewogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIHRoaXMudXBkYXRlRmFuU2VsZWN0aW9uKCk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["FanPanel.vue"],"names":[],"mappings":"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","sourcesContent":["<style scoped>\r\n.v-btn-toggle {\r\n\tdisplay: flex;\r\n}\r\n.v-btn-toggle > button {\r\n\tdisplay: flex;\r\n\tflex: 1 1 auto;\r\n}\r\n</style>\r\n\r\n<template>\r\n\t<v-card v-show=\"canControlFans\">\r\n\t\t<v-card-title class=\"pb-0\">\r\n\t\t\t<v-icon small class=\"mr-1\">mdi-fan</v-icon> {{ $t('panel.fan.caption') }}\r\n\t\t</v-card-title>\r\n\r\n\t\t<v-card-text class=\"py-0\">\r\n\t\t\t<v-row align=\"start\">\r\n\t\t\t\t<v-col cols=\"12\" sm=\"auto\" order=\"1\" order-sm=\"0\">\r\n\t\t\t\t\t<p class=\"mb-1\">\r\n\t\t\t\t\t\t{{ $t('panel.fan.selection') }}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<v-btn-toggle v-model=\"fan\" mandatory>\r\n\t\t\t\t\t\t<v-btn v-if=\"currentTool && currentTool.fans.length > 0\" :value=\"-1\">\r\n\t\t\t\t\t\t\t{{ $t('panel.fan.toolFan') }}\r\n\t\t\t\t\t\t</v-btn>\r\n\r\n\r\n\t\t\t\t\t\t<template v-for=\"(fan, index) in fans\">\r\n\t\t\t\t\t\t\t<v-btn v-if=\"fan && fan.thermostatic.heaters.length === 0\" :key=\"index\" :value=\"index\" :disabled=\"uiFrozen\">\r\n\t\t\t\t\t\t\t\t{{ fan.name ? fan.name : $t('panel.fan.fan', [index]) }}\r\n\t\t\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</v-btn-toggle>\r\n\t\t\t\t</v-col>\r\n\r\n\t\t\t\t<v-col cols=\"12\" sm=\"auto\" order=\"0\" order-sm=\"1\" class=\"flex-sm-grow-1\">\r\n\t\t\t\t\t<slider v-model=\"fanValue\" :disabled=\"uiFrozen\"></slider>\r\n\t\t\t\t</v-col>\r\n\t\t\t</v-row>\r\n\t\t</v-card-text>\r\n\t</v-card>\r\n</template>\r\n\r\n<script>\r\n'use strict'\r\n\r\nimport { mapState, mapGetters, mapActions } from 'vuex'\r\n\r\nexport default {\r\n\tcomputed: {\r\n\t\t...mapState('machine/model', ['fans']),\r\n\t\t...mapGetters(['uiFrozen']),\r\n\t\t...mapGetters('machine/model', ['currentTool']),\r\n\t\tcanControlFans() {\r\n\t\t\treturn !this.uiFrozen && ((this.currentTool && this.currentTool.fans.length > 0) || (this.fans.some(fan => fan && !fan.thermostatic.control)));\r\n\t\t},\r\n\t\tfanValue: {\r\n\t\t\tget() {\r\n\t\t\t\t// Even though RRF allows multiple fans to be assigned to a tool,\r\n\t\t\t\t// we assume they all share the same fan value if such a config is set\r\n\t\t\t\tconst fan = (this.fan === -1)\r\n\t\t\t\t\t? ((this.currentTool && this.currentTool.fans.length > 0) ? this.currentTool.fans[0] : -1)\r\n\t\t\t\t\t: this.fan;\r\n\t\t\t\treturn (fan >= 0 && fan < this.fans.length && this.fans[fan]) ? Math.round(this.fans[fan].requestedValue * 100) : 0;\r\n\t\t\t},\r\n\t\t\tset(value) {\r\n\t\t\t\tvalue = Math.min(100, Math.max(0, value)) / 100;\r\n\t\t\t\tif (this.fan === -1) {\r\n\t\t\t\t\tthis.sendCode(`M106 S${value.toFixed(2)}`);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.sendCode(`M106 P${this.fan} S${value.toFixed(2)}`);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tfan: -1\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t...mapActions('machine', ['sendCode']),\r\n\t\tupdateFanSelection() {\r\n\t\t\tif (this.fan === -1) {\r\n\t\t\t\tif (!this.currentTool) {\r\n\t\t\t\t\t// Tool no longer selected, try to change to the first available fan\r\n\t\t\t\t\tthis.fan = this.fans.findIndex(fan => fan && !fan.thermostatic.control);\r\n\t\t\t\t}\r\n\t\t\t} else if (this.fan >= this.fans.length || (this.fan !== -1 && this.fans[this.fan] && this.fans[this.fan].thermostatic.control)) {\r\n\t\t\t\t// Selected fan is no longer controllable, try to change to another one\r\n\t\t\t\tif (this.currentTool) {\r\n\t\t\t\t\tthis.fan = -1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.fan = this.fans.findIndex(fan => fan && !fan.thermostatic.control);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.updateFanSelection();\r\n\t},\r\n\twatch: {\r\n\t\tcurrentTool() {\r\n\t\t\tthis.updateFanSelection();\r\n\t\t},\r\n\t\tfans: {\r\n\t\t\tdeep: true,\r\n\t\t\thandler() {\r\n\t\t\t\tthis.updateFanSelection();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n"],"sourceRoot":"src/components/panels"}]}