{"remainingRequest":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vuetify-loader\\lib\\loader.js??ref--18-0!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\buttons\\SDCardBtn.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\src\\components\\buttons\\SDCardBtn.vue","mtime":1592248188508},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jpatrick\\Documents\\GitHub\\DuetWebControl_Fork\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KJ3VzZSBzdHJpY3QnOwoKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzpcXFVzZXJzXFxqcGF0cmlja1xcRG9jdW1lbnRzXFxHaXRIdWJcXER1ZXRXZWJDb250cm9sX0ZvcmtcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJDOlxcVXNlcnNcXGpwYXRyaWNrXFxEb2N1bWVudHNcXEdpdEh1YlxcRHVldFdlYkNvbnRyb2xfRm9ya1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCB7IG1hcFN0YXRlLCBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWydpc0Nvbm5lY3RlZCddKSwge30sIG1hcFN0YXRlKCdtYWNoaW5lL21vZGVsJywgWyd2b2x1bWVzJ10pKSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbW91bnRpbmc6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogX29iamVjdFNwcmVhZCh7fSwgbWFwQWN0aW9ucygnbWFjaGluZScsIFsnc2VuZENvZGUnXSksIHsKICAgIGdldFZvbHVtZU5hbWU6IGZ1bmN0aW9uIGdldFZvbHVtZU5hbWUoaW5kZXgpIHsKICAgICAgaWYgKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLnZvbHVtZXMubGVuZ3RoICYmIHRoaXMudm9sdW1lc1tpbmRleF0ubmFtZSkgewogICAgICAgIHJldHVybiB0aGlzLnZvbHVtZXNbaW5kZXhdLm5hbWU7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLiR0KCdnZW5lcmljLnNkQ2FyZCcsIFtpbmRleF0pOwogICAgfSwKICAgIHNlbGVjdFZvbHVtZTogZnVuY3Rpb24gc2VsZWN0Vm9sdW1lKGluZGV4KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciB2b2x1bWUsIHN1Y2Nlc3MsIHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0Nvbm5lY3RlZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSB2b2x1bWUgaXMgYWxyZWFkeSBtb3VudGVkCiAgICAgICAgICAgICAgICB2b2x1bWUgPSBfdGhpcy52b2x1bWVzW2luZGV4XTsKCiAgICAgICAgICAgICAgICBpZiAoIXZvbHVtZS5tb3VudGVkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpcy4kZW1pdCgnaW5wdXQnLCBpbmRleCk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIC8vIFRyeSB0byBtb3VudCBpdAogICAgICAgICAgICAgICAgc3VjY2VzcyA9IHRydWU7CiAgICAgICAgICAgICAgICBfdGhpcy5tb3VudGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gODsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZW5kQ29kZSh7CiAgICAgICAgICAgICAgICAgIGNvZGU6ICJNMjEgUCIuY29uY2F0KGluZGV4KSwKICAgICAgICAgICAgICAgICAgbG9nOiBmYWxzZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBzdWNjZXNzID0gcmVzcG9uc2UuaW5kZXhPZignRXJyb3InKSA9PT0gLTE7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oOCk7CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnQwLm1lc3NhZ2U7CiAgICAgICAgICAgICAgICBzdWNjZXNzID0gZmFsc2U7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICBfdGhpcy5tb3VudGluZyA9IGZhbHNlOyAvLyBEZWFsIHdpdGggdGhlIHJlc3VsdAoKICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLiRsb2coJ3N1Y2Nlc3MnLCBfdGhpcy4kdCgnbm90aWZpY2F0aW9uLm1vdW50LnN1Y2Nlc3NUaXRsZScpLCByZXNwb25zZSk7CgogICAgICAgICAgICAgICAgICBfdGhpcy4kZW1pdCgnaW5wdXQnLCBpbmRleCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpcy4kbG9nKCdlcnJvcicsIF90aGlzLiR0KCdub3RpZmljYXRpb24ubW91bnQuZXJyb3JUaXRsZScpLCByZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzgsIDE1XV0pOwogICAgICB9KSkoKTsKICAgIH0KICB9KQp9Ow=="},{"version":3,"sources":["SDCardBtn.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAkBA;;;;;;;;AAEA,SAAA,QAAA,EAAA,UAAA,EAAA,UAAA,QAAA,MAAA;AAEA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA;AADA,GADA;AAOA,EAAA,QAAA,oBACA,UAAA,CAAA,CAAA,aAAA,CAAA,CADA,MAEA,QAAA,CAAA,eAAA,EAAA,CAAA,SAAA,CAAA,CAFA,CAPA;AAWA,EAAA,IAXA,kBAWA;AACA,WAAA;AACA,MAAA,QAAA,EAAA;AADA,KAAA;AAGA,GAfA;AAgBA,EAAA,OAAA,oBACA,UAAA,CAAA,SAAA,EAAA,CAAA,UAAA,CAAA,CADA;AAEA,IAAA,aAFA,yBAEA,KAFA,EAEA;AACA,UAAA,KAAA,IAAA,CAAA,IAAA,KAAA,GAAA,KAAA,OAAA,CAAA,MAAA,IAAA,KAAA,OAAA,CAAA,KAAA,EAAA,IAAA,EAAA;AACA,eAAA,KAAA,OAAA,CAAA,KAAA,EAAA,IAAA;AACA;;AACA,aAAA,KAAA,EAAA,CAAA,gBAAA,EAAA,CAAA,KAAA,CAAA,CAAA;AACA,KAPA;AAQA,IAAA,YARA,wBAQA,KARA,EAQA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA,KAAA,CAAA,WADA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAKA;AACA,gBAAA,MANA,GAMA,KAAA,CAAA,OAAA,CAAA,KAAA,CANA;;AAAA,qBAOA,MAAA,CAAA,OAPA;AAAA;AAAA;AAAA;;AAQA,gBAAA,KAAA,CAAA,KAAA,CAAA,OAAA,EAAA,KAAA;;AARA;;AAAA;AAYA;AACA,gBAAA,OAbA,GAaA,IAbA;AAcA,gBAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AAdA;AAAA;AAAA,uBAgBA,KAAA,CAAA,QAAA,CAAA;AAAA,kBAAA,IAAA,iBAAA,KAAA,CAAA;AAAA,kBAAA,GAAA,EAAA;AAAA,iBAAA,CAhBA;;AAAA;AAgBA,gBAAA,QAhBA;AAiBA,gBAAA,OAAA,GAAA,QAAA,CAAA,OAAA,CAAA,OAAA,MAAA,CAAA,CAAA;AAjBA;AAAA;;AAAA;AAAA;AAAA;AAmBA,gBAAA,QAAA,GAAA,YAAA,OAAA;AACA,gBAAA,OAAA,GAAA,KAAA;;AApBA;AAsBA,gBAAA,KAAA,CAAA,QAAA,GAAA,KAAA,CAtBA,CAwBA;;AACA,oBAAA,OAAA,EAAA;AACA,kBAAA,KAAA,CAAA,IAAA,CAAA,SAAA,EAAA,KAAA,CAAA,EAAA,CAAA,iCAAA,CAAA,EAAA,QAAA;;AACA,kBAAA,KAAA,CAAA,KAAA,CAAA,OAAA,EAAA,KAAA;AACA,iBAHA,MAGA;AACA,kBAAA,KAAA,CAAA,IAAA,CAAA,OAAA,EAAA,KAAA,CAAA,EAAA,CAAA,+BAAA,CAAA,EAAA,QAAA;AACA;;AA9BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA+BA;AAvCA;AAhBA,CAAA","sourcesContent":["<template>\r\n\t<v-menu offset-y>\r\n\t\t<template #activator=\"{ on }\">\r\n\t\t\t<v-btn v-bind=\"$props\" v-on=\"on\" color=\"success\" :loading=\"mounting\">\r\n\t\t\t\t<v-icon class=\"mr-1\">mdi-sd</v-icon> {{ getVolumeName(value) }} <v-icon class=\"ml-1\">mdi-menu-down</v-icon>\r\n\t\t\t</v-btn>\r\n\t\t</template>\r\n\r\n\t\t<v-list ref=\"list\">\r\n\t\t\t<v-list-item v-for=\"(volume, index) in volumes\" :key=\"index\" @click=\"selectVolume(index)\">\r\n\t\t\t\t<v-icon class=\"mr-1\">{{ volume.mounted ? 'mdi-check' : 'mdi-close' }}</v-icon>\r\n\t\t\t\t{{ getVolumeName(index) }} ({{ $t(volume.mounted ? 'generic.mounted' : 'generic.notMounted') }})\r\n\t\t\t</v-list-item>\r\n\t\t</v-list>\r\n\t</v-menu>\r\n</template>\r\n\r\n<script>\r\n'use strict'\r\n\r\nimport { mapState, mapGetters, mapActions } from 'vuex'\r\n\r\nexport default {\r\n\tprops: {\r\n\t\tvalue: {\r\n\t\t\ttype: Number,\r\n\t\t\trequired: true\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(['isConnected']),\r\n\t\t...mapState('machine/model', ['volumes'])\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmounting: false\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t...mapActions('machine', ['sendCode']),\r\n\t\tgetVolumeName(index) {\r\n\t\t\tif (index >= 0 && index < this.volumes.length && this.volumes[index].name) {\r\n\t\t\t\treturn this.volumes[index].name;\r\n\t\t\t}\r\n\t\t\treturn this.$t('generic.sdCard', [index]);\r\n\t\t},\r\n\t\tasync selectVolume(index) {\r\n\t\t\tif (!this.isConnected) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Check if the volume is already mounted\r\n\t\t\tconst volume = this.volumes[index];\r\n\t\t\tif (volume.mounted) {\r\n\t\t\t\tthis.$emit('input', index);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Try to mount it\r\n\t\t\tlet success = true, response;\r\n\t\t\tthis.mounting = true;\r\n\t\t\ttry {\r\n\t\t\t\tresponse = await this.sendCode({ code: `M21 P${index}`, log: false });\r\n\t\t\t\tsuccess = response.indexOf('Error') === -1;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tresponse = e.message;\r\n\t\t\t\tsuccess = false;\r\n\t\t\t}\r\n\t\t\tthis.mounting = false;\r\n\r\n\t\t\t// Deal with the result\r\n\t\t\tif (success) {\r\n\t\t\t\tthis.$log('success', this.$t('notification.mount.successTitle'), response);\r\n\t\t\t\tthis.$emit('input', index);\r\n\t\t\t} else {\r\n\t\t\t\tthis.$log('error', this.$t('notification.mount.errorTitle'), response);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n"],"sourceRoot":"src/components/buttons"}]}